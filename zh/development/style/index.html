<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-zh/development/style">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KF1LLRTQ5Q"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KF1LLRTQ5Q",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="ClickHouse Docs" href="/opensearch.xml">
<script src="./src/js/analytics.js"></script><title data-rh="true">å¦‚ä½•ç¼–å†™ C++ ä»£ç  | ClickHouse Docs</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://sturdy-adventure-06fed4eb.pages.github.io//zh/development/style"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="å¦‚ä½•ç¼–å†™ C++ ä»£ç  | ClickHouse Docs"><meta data-rh="true" name="description" content="ru-he-bian-xie-c-dai-ma}"><meta data-rh="true" property="og:description" content="ru-he-bian-xie-c-dai-ma}"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://sturdy-adventure-06fed4eb.pages.github.io//zh/development/style"><link data-rh="true" rel="alternate" href="https://sturdy-adventure-06fed4eb.pages.github.io//zh/development/style" hreflang="en"><link data-rh="true" rel="alternate" href="https://sturdy-adventure-06fed4eb.pages.github.io//zh/development/style" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.d094a63e.css">
<link rel="preload" href="/assets/js/runtime~main.db9e59e5.js" as="script">
<link rel="preload" href="/assets/js/main.028d105f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_ObN2"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://clickhouse.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/clickhouse.svg" alt="ClickHouse" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/clickhouse.svg" alt="ClickHouse" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">ClickHouse</b></a><a class="navbar__item navbar__link" href="/en/intro">Docs</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Language</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/en/intro">English</a></li><li><a class="dropdown__link" href="/ru">Russian</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/zh">Chinese</a></li></ul></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD sidebarWithHideableNavbar_d0QC"><a href="https://clickhouse.com/" target="_blank" rel="noopener noreferrer" tabindex="-1" class="sidebarLogo_YUvz"><img src="/img/clickhouse.svg" alt="ClickHouse" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/clickhouse.svg" alt="ClickHouse" class="themedImage_W2Cr themedImage--dark_oUvU"><b>ClickHouse</b></a><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/">ä»€ä¹ˆæ˜¯ClickHouseï¼Ÿ</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/category/ç®€ä»‹">ç®€ä»‹</a><button aria-label="Toggle the collapsible sidebar category &#x27;ç®€ä»‹&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/getting-started/">å¿«é€Ÿä¸Šæ‰‹</a><button aria-label="Toggle the collapsible sidebar category &#x27;å¿«é€Ÿä¸Šæ‰‹&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/interfaces/">æ¥å£</a><button aria-label="Toggle the collapsible sidebar category &#x27;æ¥å£&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/category/å¼•æ“">å¼•æ“</a><button aria-label="Toggle the collapsible sidebar category &#x27;å¼•æ“&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/sql-reference/">SQLå‚è€ƒ</a><button aria-label="Toggle the collapsible sidebar category &#x27;SQLå‚è€ƒ&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/guides/">ClickHouseæŒ‡å—</a><button aria-label="Toggle the collapsible sidebar category &#x27;ClickHouseæŒ‡å—&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/operations/">æ“ä½œ</a><button aria-label="Toggle the collapsible sidebar category &#x27;æ“ä½œ&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/commercial/">å•†ä¸šæ”¯æŒ</a><button aria-label="Toggle the collapsible sidebar category &#x27;å•†ä¸šæ”¯æŒ&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/faq/">F.A.Q.</a><button aria-label="Toggle the collapsible sidebar category &#x27;F.A.Q.&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/whats-new/">ClickHouseäº‹è¿¹</a><button aria-label="Toggle the collapsible sidebar category &#x27;ClickHouseäº‹è¿¹&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/changelog/">å˜æ›´æ—¥å¿—</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/zh/development/">ClickHouse å¼€å‘</a><button aria-label="Toggle the collapsible sidebar category &#x27;ClickHouse å¼€å‘&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/development/browse-code">æµè§ˆæºä»£ç </a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/development/build-cross-arm">å¦‚ä½•åœ¨Linuxä¸Šæ„å»ºClickHouse for AARCH64ï¼ˆARM64)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/development/adding_test_queries">å¦‚ä½•å°†æµ‹è¯•æŸ¥è¯¢æ·»åŠ åˆ° ClickHouse CI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/development/architecture">ClickHouse æ¶æ„æ¦‚è¿°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/development/build-cross-osx">å¦‚ä½•åœ¨Linuxä¸­ç¼–è¯‘Mac OS X ClickHouse</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/development/build-osx">åœ¨ Mac OS X ä¸­ç¼–è¯‘ ClickHouse</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/development/build">å¦‚ä½•æ„å»º ClickHouse å‘å¸ƒåŒ…</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/development/continuous-integration">æŒç»­é›†æˆæ£€æŸ¥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/development/contrib">ä½¿ç”¨çš„ä¸‰æ–¹åº“</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/development/developer-instruction">developer-instruction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh/development/style">å¦‚ä½•ç¼–å†™ C++ ä»£ç </a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/development/tests">ClickHouse æµ‹è¯•</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/">ğŸ </a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/zh/development/"><span itemprop="name">ClickHouse å¼€å‘</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">å¦‚ä½•ç¼–å†™ C++ ä»£ç </span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>å¦‚ä½•ç¼–å†™ C++ ä»£ç </h1><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="yi-ban-jian-yi">ä¸€èˆ¬å»ºè®®<a class="hash-link" href="#yi-ban-jian-yi" title="Direct link to heading">â€‹</a></h2><p><strong>1.</strong> ä»¥ä¸‹æ˜¯å»ºè®®ï¼Œè€Œä¸æ˜¯è¦æ±‚ã€‚</p><p><strong>2.</strong> å¦‚æœä½ åœ¨ä¿®æ”¹ä»£ç ï¼Œéµå®ˆå·²æœ‰çš„é£æ ¼æ˜¯æœ‰æ„ä¹‰çš„ã€‚</p><p><strong>3.</strong> ä»£ç çš„é£æ ¼éœ€ä¿æŒä¸€è‡´ã€‚ä¸€è‡´çš„é£æ ¼æœ‰åˆ©äºé˜…è¯»ä»£ç ï¼Œå¹¶ä¸”æ–¹ä¾¿æ£€ç´¢ä»£ç ã€‚</p><p><strong>4.</strong> è®¸å¤šè§„åˆ™æ²¡æœ‰é€»è¾‘åŸå› ï¼› å®ƒä»¬æ˜¯ç”±æ—¢å®šçš„åšæ³•å†³å®šçš„ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="ge-shi-hua">æ ¼å¼åŒ–<a class="hash-link" href="#ge-shi-hua" title="Direct link to heading">â€‹</a></h2><p><strong>1.</strong> å¤§å¤šæ•°æ ¼å¼åŒ–å¯ä»¥ç”¨ <code>clang-format</code> è‡ªåŠ¨å®Œæˆã€‚</p><p><strong>2.</strong> ç¼©è¿›æ˜¯4ä¸ªç©ºæ ¼ã€‚ é…ç½®å¼€å‘ç¯å¢ƒï¼Œä½¿å¾— TAB ä»£è¡¨æ·»åŠ å››ä¸ªç©ºæ ¼ã€‚</p><p><strong>3.</strong> å·¦å³èŠ±æ‹¬å·éœ€åœ¨å•ç‹¬çš„è¡Œã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">inline</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">readBoolText</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">bool</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> ReadBuffer </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain"> buf</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">char</span><span class="token plain"> tmp </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token char" style="color:rgb(129, 31, 63)">&#x27;0&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token function" style="color:rgb(0, 0, 255)">readChar</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">tmp</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> buf</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    x </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> tmp </span><span class="token operator" style="color:rgb(0, 0, 0)">!=</span><span class="token plain"> </span><span class="token char" style="color:rgb(129, 31, 63)">&#x27;0&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>4.</strong> è‹¥æ•´ä¸ªæ–¹æ³•ä½“ä»…æœ‰ä¸€è¡Œ <code>æè¿°</code>ï¼Œ åˆ™å¯ä»¥æ”¾åˆ°å•ç‹¬çš„è¡Œä¸Šã€‚ åœ¨èŠ±æ‹¬å·å‘¨å›´æ”¾ç½®ç©ºæ ¼ï¼ˆé™¤äº†è¡Œå°¾çš„ç©ºæ ¼ï¼‰ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">inline</span><span class="token plain"> size_t </span><span class="token function" style="color:rgb(0, 0, 255)">mask</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">buf_size</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">inline</span><span class="token plain"> size_t </span><span class="token function" style="color:rgb(0, 0, 255)">place</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">HashValue x</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">mask</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>5.</strong> å¯¹äºå‡½æ•°ã€‚ ä¸è¦åœ¨æ‹¬å·å‘¨å›´æ”¾ç½®ç©ºæ ¼ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">reinsert</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> Value </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">memcpy</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain">buf</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">place_value</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">sizeof</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>6.</strong> åœ¨<code>if</code>ï¼Œ<code>for</code>ï¼Œ<code>while</code>å’Œå…¶ä»–è¡¨è¾¾å¼ä¸­ï¼Œåœ¨å¼€æ‹¬å·å‰é¢æ’å…¥ä¸€ä¸ªç©ºæ ¼ï¼ˆä¸å‡½æ•°å£°æ˜ç›¸åï¼‰ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">size_t i </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain"> rows</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(0, 0, 0)">+=</span><span class="token plain"> storage</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">index_granularity</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>7.</strong> åœ¨äºŒå…ƒè¿ç®—ç¬¦ï¼ˆ<code>+</code>ï¼Œ<code>-</code>ï¼Œ<code>*</code>ï¼Œ<code>/</code>ï¼Œ<code>ï¼…</code>ï¼Œâ€¦ï¼‰å’Œä¸‰å…ƒè¿ç®—ç¬¦ <code>?:</code> å‘¨å›´æ·»åŠ ç©ºæ ¼ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token plain">UInt16 year </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain"> </span><span class="token char" style="color:rgb(129, 31, 63)">&#x27;0&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1000</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain"> </span><span class="token char" style="color:rgb(129, 31, 63)">&#x27;0&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">100</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain"> </span><span class="token char" style="color:rgb(129, 31, 63)">&#x27;0&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">10</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain"> </span><span class="token char" style="color:rgb(129, 31, 63)">&#x27;0&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">UInt8 month </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">5</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain"> </span><span class="token char" style="color:rgb(129, 31, 63)">&#x27;0&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">10</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">6</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain"> </span><span class="token char" style="color:rgb(129, 31, 63)">&#x27;0&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">UInt8 day </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain"> </span><span class="token char" style="color:rgb(129, 31, 63)">&#x27;0&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">10</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">9</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain"> </span><span class="token char" style="color:rgb(129, 31, 63)">&#x27;0&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>8.</strong> è‹¥æœ‰æ¢è¡Œï¼Œæ–°è¡Œåº”è¯¥ä»¥è¿ç®—ç¬¦å¼€å¤´ï¼Œå¹¶ä¸”å¢åŠ å¯¹åº”çš„ç¼©è¿›ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">elapsed_ns</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    message </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot; (&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;&lt;</span><span class="token plain"> rows_read_on_server </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1000000000</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain"> elapsed_ns </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot; rows/s., &quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;&lt;</span><span class="token plain"> bytes_read_on_server </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1000.0</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain"> elapsed_ns </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot; MB/s.) &quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>9.</strong> å¦‚æœéœ€è¦ï¼Œå¯ä»¥åœ¨ä¸€è¡Œå†…ä½¿ç”¨ç©ºæ ¼æ¥å¯¹é½ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token plain">dst</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">ClickLogID         </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> click</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">LogID</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">dst</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">ClickEventID       </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> click</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">EventID</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">dst</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">ClickGoodEvent     </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> click</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">GoodEvent</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>10.</strong> ä¸è¦åœ¨ <code>.</code>ï¼Œ<code>-&gt;</code> å‘¨å›´åŠ å…¥ç©ºæ ¼</p><p>å¦‚æœ‰å¿…è¦ï¼Œè¿ç®—ç¬¦å¯ä»¥åŒ…è£¹åˆ°ä¸‹ä¸€è¡Œã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒå‰é¢çš„åç§»é‡å¢åŠ ã€‚</p><p><strong>11.</strong> ä¸è¦ä½¿ç”¨ç©ºæ ¼æ¥åˆ†å¼€ä¸€å…ƒè¿ç®—ç¬¦ (<code>--</code>, <code>++</code>, <code>*</code>, <code>&amp;</code>, â€¦) å’Œå‚æ•°ã€‚</p><p><strong>12.</strong> åœ¨é€—å·åé¢åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œè€Œä¸æ˜¯åœ¨ä¹‹å‰ã€‚åŒæ ·çš„è§„åˆ™ä¹Ÿé€‚åˆ <code>for</code> å¾ªç¯ä¸­çš„åˆ†å·ã€‚</p><p><strong>13.</strong> ä¸è¦ç”¨ç©ºæ ¼åˆ†å¼€ <code>[]</code> è¿ç®—ç¬¦ã€‚</p><p><strong>14.</strong> åœ¨ <code>template &lt;...&gt;</code> è¡¨è¾¾å¼ä¸­ï¼Œåœ¨ <code>template</code> å’Œ <code>&lt;</code> ä¸­åŠ å…¥ä¸€ä¸ªç©ºæ ¼ï¼Œåœ¨ <code>&lt;</code> åé¢æˆ–åœ¨ <code>&gt;</code> å‰é¢éƒ½ä¸è¦æœ‰ç©ºæ ¼ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">template</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token keyword" style="color:rgb(0, 0, 255)">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">TKey</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">TValue</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">AggregatedStatElement</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>15.</strong> åœ¨ç±»å’Œç»“æ„ä½“ä¸­ï¼Œ <code>public</code>ï¼Œ <code>private</code> ä»¥åŠ <code>protected</code> åŒ <code>class/struct</code> æ— éœ€ç¼©è¿›ï¼Œå…¶ä»–ä»£ç é¡»ç¼©è¿›ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">template</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token keyword" style="color:rgb(0, 0, 255)">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">T</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">MultiVersion</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">/// Version of object for usage. shared_ptr manage lifetime of version.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">using</span><span class="token plain"> Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> T</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>16.</strong> å¦‚æœå¯¹æ•´ä¸ªæ–‡ä»¶ä½¿ç”¨ç›¸åŒçš„ <code>namespace</code>ï¼Œå¹¶ä¸”æ²¡æœ‰å…¶ä»–é‡è¦çš„ä¸œè¥¿ï¼Œåˆ™ <code>namespace</code> ä¸­ä¸éœ€è¦åç§»é‡ã€‚</p><p><strong>17.</strong> åœ¨ <code>if</code>, <code>for</code>, <code>while</code> ä¸­åŒ…è£¹çš„ä»£ç å—ä¸­ï¼Œè‹¥ä»£ç æ˜¯ä¸€ä¸ªå•è¡Œçš„ <code>statement</code>ï¼Œé‚£ä¹ˆå¤§æ‹¬å·æ˜¯å¯é€‰çš„ã€‚ å¯ä»¥å°† <code>statement</code> æ”¾åˆ°ä¸€è¡Œä¸­ã€‚è¿™ä¸ªè§„åˆ™åŒæ ·é€‚ç”¨äºåµŒå¥—çš„ <code>if</code>ï¼Œ <code>for</code>ï¼Œ <code>while</code>ï¼Œ â€¦</p><p>ä½†æ˜¯å¦‚æœå†…éƒ¨ <code>statement</code> åŒ…å«å¤§æ‹¬å·æˆ– <code>else</code>ï¼Œåˆ™å¤–éƒ¨å—åº”è¯¥ç”¨å¤§æ‹¬å·æ‹¬èµ·æ¥ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">/// Finish write.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">auto</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain"> stream </span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> streams</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    stream</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">second</span><span class="token operator" style="color:rgb(0, 0, 0)">-&gt;</span><span class="token function" style="color:rgb(0, 0, 255)">finalize</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>18.</strong> è¡Œçš„æœ«å°¾ä¸åº”è¯¥åŒ…å«ç©ºæ ¼ã€‚</p><p><strong>19.</strong> æºæ–‡ä»¶åº”è¯¥ç”¨ UTF-8 ç¼–ç ã€‚</p><p><strong>20.</strong> éASCIIå­—ç¬¦å¯ç”¨äºå­—ç¬¦ä¸²æ–‡å­—ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token operator" style="color:rgb(0, 0, 0)">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;, &quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;&lt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">timer</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">elapsed</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain"> chunks_stats</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">hits</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot; Î¼sec/hit.&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>21</strong> ä¸è¦åœ¨ä¸€è¡Œä¸­å†™å…¥å¤šä¸ªè¡¨è¾¾å¼ã€‚</p><p><strong>22.</strong> å°†å‡½æ•°å†…éƒ¨çš„ä»£ç æ®µåˆ†ç»„ï¼Œå¹¶å°†å®ƒä»¬ä¸ä¸è¶…è¿‡ä¸€è¡Œçš„ç©ºè¡Œåˆ†å¼€ã€‚</p><p><strong>23.</strong> å°† å‡½æ•°ï¼Œç±»ç”¨ä¸€ä¸ªæˆ–ä¸¤ä¸ªç©ºè¡Œåˆ†å¼€ã€‚</p><p><strong>24.</strong> <code>const</code> å¿…é¡»å†™åœ¨ç±»å‹åç§°ä¹‹å‰ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">//correct</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">char</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain"> pos</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">string </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain"> s</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//incorrect</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">char</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain"> pos</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>25.</strong> å£°æ˜æŒ‡é’ˆæˆ–å¼•ç”¨æ—¶ï¼Œ<code>*</code> å’Œ <code>ï¼†</code> ç¬¦å·ä¸¤è¾¹åº”è¯¥éƒ½ç”¨ç©ºæ ¼åˆ†éš”ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">//correct</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">char</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain"> pos</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//incorrect</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">char</span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain"> pos</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">char</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain">pos</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>26.</strong> ä½¿ç”¨æ¨¡æ¿ç±»å‹æ—¶ï¼Œä½¿ç”¨ <code>using</code> å…³é”®å­—å¯¹å®ƒä»¬è¿›è¡Œåˆ«åï¼ˆæœ€ç®€å•çš„æƒ…å†µé™¤å¤–ï¼‰ã€‚</p><p>æ¢å¥è¯è¯´ï¼Œæ¨¡æ¿å‚æ•°ä»…åœ¨ <code>using</code> ä¸­æŒ‡å®šï¼Œå¹¶ä¸”ä¸åœ¨ä»£ç ä¸­é‡å¤ã€‚</p><p><code>using</code>å¯ä»¥åœ¨æœ¬åœ°å£°æ˜ï¼Œä¾‹å¦‚åœ¨å‡½æ•°å†…éƒ¨ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">//correct</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">using</span><span class="token plain"> FileStreams </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">map</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">Stream</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">FileStreams streams</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//incorrect</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">map</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">Stream</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;&gt;</span><span class="token plain"> streams</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>27.</strong> ä¸è¦åœ¨ä¸€ä¸ªè¯­å¥ä¸­å£°æ˜ä¸åŒç±»å‹çš„å¤šä¸ªå˜é‡ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">//incorrect</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain">y</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>28.</strong> ä¸è¦ä½¿ç”¨Cé£æ ¼çš„ç±»å‹è½¬æ¢ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">//incorrect</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">cerr </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;&lt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">int</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain">c </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;&lt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//correct</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">cerr </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;&lt;</span><span class="token plain"> </span><span class="token generic-function function" style="color:rgb(0, 0, 255)">static_cast</span><span class="token generic-function generic class-name operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token generic-function generic class-name keyword" style="color:rgb(0, 0, 255)">int</span><span class="token generic-function generic class-name operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>29.</strong> åœ¨ç±»å’Œç»“æ„ä¸­ï¼Œç»„æˆå‘˜å’Œå‡½æ•°åˆ†åˆ«åœ¨æ¯ä¸ªå¯è§èŒƒå›´å†…ã€‚</p><p><strong>30.</strong> å¯¹äºå°ç±»å’Œç»“æ„ï¼Œæ²¡æœ‰å¿…è¦å°†æ–¹æ³•å£°æ˜ä¸å®ç°åˆ†å¼€ã€‚</p><p>å¯¹äºä»»ä½•ç±»æˆ–ç»“æ„ä¸­çš„å°æ–¹æ³•ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><p>å¯¹äºæ¨¡æ¿åŒ–ç±»å’Œç»“æ„ï¼Œä¸è¦å°†æ–¹æ³•å£°æ˜ä¸å®ç°åˆ†å¼€ï¼ˆå› ä¸ºå¦åˆ™å®ƒä»¬å¿…é¡»åœ¨åŒä¸€ä¸ªè½¬æ¢å•å…ƒä¸­å®šä¹‰ï¼‰</p><p><strong>31.</strong> æ‚¨å¯ä»¥å°†æ¢è¡Œè§„åˆ™å®šåœ¨140ä¸ªå­—ç¬¦ï¼Œè€Œä¸æ˜¯80ä¸ªå­—ç¬¦ã€‚</p><p><strong>32.</strong> å¦‚æœä¸éœ€è¦ postfixï¼Œè¯·å§‹ç»ˆä½¿ç”¨å‰ç¼€å¢é‡/å‡é‡è¿ç®—ç¬¦ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">Names</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">const_iterator it </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> column_names</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">begin</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> it </span><span class="token operator" style="color:rgb(0, 0, 0)">!=</span><span class="token plain"> column_names</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">end</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">++</span><span class="token plain">it</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="comments">è¯„è®º<a class="hash-link" href="#comments" title="Direct link to heading">â€‹</a></h2><p><strong>1.</strong> è¯·åŠ¡å¿…ä¸ºæ‰€æœ‰éå¸¸é‡è¦çš„ä»£ç éƒ¨åˆ†æ·»åŠ æ³¨é‡Šã€‚</p><p>è¿™æ˜¯éå¸¸é‡è¦çš„ã€‚ ç¼–å†™æ³¨é‡Šå¯èƒ½ä¼šå¸®åŠ©æ‚¨æ„è¯†åˆ°ä»£ç ä¸æ˜¯å¿…éœ€çš„ï¼Œæˆ–è€…è®¾è®¡é”™è¯¯ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">/** Part of piece of memory, that can be used.</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">  * For example, if internal_buffer is 1MB, and there was only 10 bytes loaded to buffer from file for reading,</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">  * then working_buffer will have size of only 10 bytes</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">  * (working_buffer.end() will point to position right after those 10 bytes available for read).</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">  */</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>2.</strong> æ³¨é‡Šå¯ä»¥å°½å¯èƒ½è¯¦ç»†ã€‚</p><p><strong>3.</strong> åœ¨ä»–ä»¬æè¿°çš„ä»£ç ä¹‹å‰æ”¾ç½®æ³¨é‡Šã€‚ åœ¨æå°‘æ•°æƒ…å†µä¸‹ï¼Œæ³¨é‡Šå¯ä»¥åœ¨ä»£ç ä¹‹åï¼Œåœ¨åŒä¸€è¡Œä¸Šã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">/** Parses and executes the query.</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">executeQuery</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    ReadBuffer </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain"> istr</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">/// Where to read the query from (and data for INSERT, if applicable)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    WriteBuffer </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain"> ostr</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">/// Where to write the result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Context </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">/// DB, tables, data types, engines, functions, aggregate functions...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    BlockInputStreamPtr </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain"> query_plan</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">/// Here could be written the description on how query was executed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    QueryProcessingStage</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">Enum stage </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> QueryProcessingStage</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">Complete </span><span class="token comment" style="color:rgb(0, 128, 0)">/// Up to which stage process the SELECT query</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>4.</strong> æ³¨é‡Šåº”è¯¥åªç”¨è‹±æ–‡æ’°å†™ã€‚</p><p><strong>5.</strong> å¦‚æœæ‚¨æ­£åœ¨ç¼–å†™åº“ï¼Œè¯·åœ¨ä¸»å¤´æ–‡ä»¶ä¸­åŒ…å«è§£é‡Šå®ƒçš„è¯¦ç»†æ³¨é‡Šã€‚</p><p><strong>6.</strong> è¯·å‹¿æ·»åŠ æ— æ•ˆçš„æ³¨é‡Šã€‚ ç‰¹åˆ«æ˜¯ï¼Œä¸è¦ç•™ä¸‹åƒè¿™æ ·çš„ç©ºæ³¨é‡Šï¼š</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">/*</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">* Procedure Name:</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">* Original procedure name:</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">* Author:</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">* Date of creation:</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">* Dates of modification:</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">* Modification authors:</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">* Original file name:</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">* Purpose:</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">* Intent:</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">* Designation:</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">* Classes used:</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">* Constants:</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">* Local variables:</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">* Parameters:</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">* Date of creation:</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">* Purpose:</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">*/</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>è¿™ä¸ªç¤ºä¾‹æ¥æºäº <a href="http://home.tamk.fi/~jaalto/course/coding-style/doc/unmaintainable-code/%E3%80%82" target="_blank" rel="noopener noreferrer">http://home.tamk.fi/~jaalto/course/coding-style/doc/unmaintainable-code/ã€‚</a></p><p><strong>7.</strong> ä¸è¦åœ¨æ¯ä¸ªæ–‡ä»¶çš„å¼€å¤´å†™å…¥åƒåœ¾æ³¨é‡Šï¼ˆä½œè€…ï¼Œåˆ›å»ºæ—¥æœŸâ€¦ï¼‰ã€‚</p><p><strong>8.</strong> å•è¡Œæ³¨é‡Šç”¨ä¸‰ä¸ªæ–œæ†ï¼š <code>///</code> ï¼Œå¤šè¡Œæ³¨é‡Šä»¥ <code>/**</code>å¼€å§‹ã€‚ è¿™äº›æ³¨é‡Šä¼šå½“åšæ–‡æ¡£ã€‚</p><p>æ³¨æ„ï¼šæ‚¨å¯ä»¥ä½¿ç”¨ Doxygen ä»è¿™äº›æ³¨é‡Šä¸­ç”Ÿæˆæ–‡æ¡£ã€‚ ä½†æ˜¯é€šå¸¸ä¸ä½¿ç”¨ Doxygenï¼Œå› ä¸ºåœ¨ IDE ä¸­å¯¼èˆªä»£ç æ›´æ–¹ä¾¿ã€‚</p><p><strong>9.</strong> å¤šè¡Œæ³¨é‡Šçš„å¼€å¤´å’Œç»“å°¾ä¸å¾—æœ‰ç©ºè¡Œï¼ˆå…³é—­å¤šè¡Œæ³¨é‡Šçš„è¡Œé™¤å¤–ï¼‰ã€‚</p><p><strong>10.</strong> è¦æ³¨é‡Šæ‰ä»£ç ï¼Œè¯·ä½¿ç”¨åŸºæœ¬æ³¨é‡Šï¼Œè€Œä¸æ˜¯â€œæ–‡æ¡£â€æ³¨é‡Šã€‚</p><p><strong>11.</strong> åœ¨æäº¤ä¹‹å‰åˆ é™¤ä»£ç çš„æ— æ•ˆæ³¨é‡Šéƒ¨åˆ†ã€‚</p><p><strong>12.</strong> ä¸è¦åœ¨æ³¨é‡Šæˆ–ä»£ç ä¸­ä½¿ç”¨äºµæ¸è¯­è¨€ã€‚</p><p><strong>13.</strong> ä¸è¦ä½¿ç”¨å¤§å†™å­—æ¯ã€‚ ä¸è¦ä½¿ç”¨è¿‡å¤šçš„æ ‡ç‚¹ç¬¦å·ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">/// WHAT THE FAIL???</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>14.</strong> ä¸è¦ä½¿ç”¨æ³¨é‡Šæ¥åˆ¶ä½œåˆ†éš”ç¬¦ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">///******************************************************</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>15.</strong> ä¸è¦åœ¨æ³¨é‡Šä¸­å¼€å§‹è®¨è®ºã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">/// Why did you do this stuff?</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>16.</strong> æ²¡æœ‰å¿…è¦åœ¨å—çš„æœ«å°¾å†™ä¸€æ¡æ³¨é‡Šæ¥æè¿°å®ƒçš„å«ä¹‰ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">/// for</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="names">å§“å<a class="hash-link" href="#names" title="Direct link to heading">â€‹</a></h2><p><strong>1.</strong> åœ¨å˜é‡å’Œç±»æˆå‘˜çš„åç§°ä¸­ä½¿ç”¨å¸¦ä¸‹åˆ’çº¿çš„å°å†™å­—æ¯ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token plain">size_t max_block_size</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>2.</strong> å¯¹äºå‡½æ•°ï¼ˆæ–¹æ³•ï¼‰çš„åç§°ï¼Œè¯·ä½¿ç”¨ä»¥å°å†™å­—æ¯å¼€å¤´çš„é©¼å³°æ ‡è¯†ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">string </span><span class="token function" style="color:rgb(0, 0, 255)">getName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">override</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Memory&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>3.</strong> å¯¹äºç±»ï¼ˆç»“æ„ï¼‰çš„åç§°ï¼Œä½¿ç”¨ä»¥å¤§å†™å­—æ¯å¼€å¤´çš„é©¼å³°æ ‡è¯†ã€‚æ¥å£åç§°ç”¨Iå‰ç¼€ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">StorageMemory</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> IStorage</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>4.</strong> <code>using</code> çš„å‘½åæ–¹å¼ä¸ç±»ç›¸åŒï¼Œæˆ–è€…ä»¥__t<!-- -->`<!-- -->å‘½åã€‚</p><p><strong>5.</strong> æ¨¡æ¿ç±»å‹å‚æ•°çš„åç§°ï¼šåœ¨ç®€å•çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨<code>T</code>; <code>T</code>ï¼Œ<code>U</code>; <code>T1</code>ï¼Œ<code>T2</code>ã€‚</p><p>å¯¹äºæ›´å¤æ‚çš„æƒ…å†µï¼Œè¦ä¹ˆéµå¾ªç±»åè§„åˆ™ï¼Œè¦ä¹ˆæ·»åŠ å‰ç¼€<code>T</code>ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">template</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token keyword" style="color:rgb(0, 0, 255)">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">TKey</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">TValue</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">AggregatedStatElement</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>6.</strong> æ¨¡æ¿å¸¸é‡å‚æ•°çš„åç§°ï¼šéµå¾ªå˜é‡åç§°çš„è§„åˆ™ï¼Œæˆ–è€…åœ¨ç®€å•çš„æƒ…å†µä¸‹ä½¿ç”¨ <code>N</code>ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">template</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token keyword" style="color:rgb(0, 0, 255)">bool</span><span class="token plain"> without_www</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ExtractDomain</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>7.</strong> å¯¹äºæŠ½è±¡ç±»ï¼ˆæ¥å£ï¼‰ï¼Œç”¨ <code>I</code> å‰ç¼€ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">IBlockInputStream</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>8.</strong> å¦‚æœåœ¨æœ¬åœ°ä½¿ç”¨å˜é‡ï¼Œåˆ™å¯ä»¥ä½¿ç”¨çŸ­åç§°ã€‚</p><p>åœ¨æ‰€æœ‰å…¶ä»–æƒ…å†µä¸‹ï¼Œè¯·ä½¿ç”¨èƒ½æè¿°å«ä¹‰çš„åç§°ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">bool</span><span class="token plain"> info_successfully_loaded </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>9.</strong> <code>define</code> å’Œå…¨å±€å¸¸é‡çš„åç§°ä½¿ç”¨å…¨å¤§å†™å¸¦ä¸‹åˆ’çº¿çš„å½¢å¼ï¼Œå¦‚ <code>ALL_CAPS</code>ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(0, 0, 255)">define</span><span class="token macro property"> </span><span class="token macro property macro-name">MAX_SRC_TABLE_NAMES_TO_STORE</span><span class="token macro property"> </span><span class="token macro property expression number" style="color:rgb(9, 134, 88)">1000</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>10.</strong> æ–‡ä»¶ååº”ä½¿ç”¨ä¸å…¶å†…å®¹ç›¸åŒçš„æ ·å¼ã€‚</p><p>å¦‚æœæ–‡ä»¶åŒ…å«å•ä¸ªç±»ï¼Œåˆ™ä»¥ä¸è¯¥ç±»åç§°ç›¸åŒçš„æ–¹å¼å‘½åè¯¥æ–‡ä»¶ï¼ˆCamelCaseï¼‰ã€‚</p><p>å¦‚æœæ–‡ä»¶åŒ…å«å•ä¸ªå‡½æ•°ï¼Œåˆ™ä»¥ä¸å‡½æ•°åç§°ç›¸åŒçš„æ–¹å¼å‘½åæ–‡ä»¶ï¼ˆcamelCaseï¼‰ã€‚</p><p><strong>11.</strong> å¦‚æœåç§°åŒ…å«ç¼©å†™ï¼Œåˆ™ï¼š</p><ul><li>å¯¹äºå˜é‡åï¼Œç¼©å†™åº”ä½¿ç”¨å°å†™å­—æ¯ <code>mysql_connection</code>ï¼ˆä¸æ˜¯ <code>mySQL_connection</code> ï¼‰ã€‚</li><li>å¯¹äºç±»å’Œå‡½æ•°çš„åç§°ï¼Œè¯·å°†å¤§å†™å­—æ¯ä¿ç•™åœ¨ç¼©å†™ <code>MySQLConnection</code>ï¼ˆä¸æ˜¯ <code>MySqlConnection</code>ï¼‰ã€‚</li></ul><p><strong>12.</strong> ä»…ç”¨äºåˆå§‹åŒ–ç±»æˆå‘˜çš„æ„é€ æ–¹æ³•å‚æ•°çš„å‘½åæ–¹å¼åº”ä¸ç±»æˆå‘˜ç›¸åŒï¼Œä½†æœ€åä½¿ç”¨ä¸‹åˆ’çº¿ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">FileQueueProcessor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">string </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain"> path_</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">string </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain"> prefix_</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    std</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">FileHandler</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> handler_</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">path</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">path_</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token function" style="color:rgb(0, 0, 255)">prefix</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">prefix_</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token function" style="color:rgb(0, 0, 255)">handler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">handler_</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token function" style="color:rgb(0, 0, 255)">log</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token class-name" style="color:rgb(38, 127, 153)">Logger</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token function" style="color:rgb(0, 0, 255)">get</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;FileQueueProcessor&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å¦‚æœæ„é€ å‡½æ•°ä½“ä¸­æœªä½¿ç”¨è¯¥å‚æ•°ï¼Œåˆ™å¯ä»¥çœç•¥ä¸‹åˆ’çº¿åç¼€ã€‚</p><p><strong>13.</strong> å±€éƒ¨å˜é‡å’Œç±»æˆå‘˜çš„åç§°æ²¡æœ‰åŒºåˆ«ï¼ˆä¸éœ€è¦å‰ç¼€ï¼‰ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">timer</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token operator" style="color:rgb(0, 0, 0)">not</span><span class="token plain"> m_timer</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>14.</strong> å¯¹äº <code>enum</code> ä¸­çš„å¸¸é‡ï¼Œè¯·ä½¿ç”¨å¸¦å¤§å†™å­—æ¯çš„é©¼å³°æ ‡è¯†ã€‚ALL_CAPS ä¹Ÿå¯ä»¥æ¥å—ã€‚å¦‚æœ <code>enum</code> æ˜¯éæœ¬åœ°çš„ï¼Œè¯·ä½¿ç”¨ <code>enum class</code>ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">enum</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">CompressionMethod</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    QuickLZ </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    LZ4     </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>15.</strong> æ‰€æœ‰åå­—å¿…é¡»æ˜¯è‹±æ–‡ã€‚ä¸å…è®¸éŸ³è¯‘ä¿„è¯­å•è¯ã€‚</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token plain">not Stroka</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>16.</strong> ç¼©å†™é¡»æ˜¯ä¼—æ‰€å‘¨çŸ¥çš„ï¼ˆå½“æ‚¨å¯ä»¥åœ¨ç»´åŸºç™¾ç§‘æˆ–æœç´¢å¼•æ“ä¸­è½»æ¾æ‰¾åˆ°ç¼©å†™çš„å«ä¹‰æ—¶ï¼‰ã€‚</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token plain">`AST`, `SQL`.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Not `NVDH` (some random letters)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å¦‚æœç¼©çŸ­ç‰ˆæœ¬æ˜¯å¸¸ç”¨çš„ï¼Œåˆ™å¯ä»¥æ¥å—ä¸å®Œæ•´çš„å•è¯ã€‚</p><p>å¦‚æœæ—è¾¹æœ‰æ³¨é‡ŠåŒ…å«å…¨åï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ç¼©å†™ã€‚</p><p><strong>17.</strong> C++ æºç æ–‡ä»¶åç§°å¿…é¡»ä¸º <code>.cpp</code> æ‹“å±•åã€‚ å¤´æ–‡ä»¶å¿…é¡»ä¸º <code>.h</code> æ‹“å±•åã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="ru-he-bian-xie-dai-ma">å¦‚ä½•ç¼–å†™ä»£ç <a class="hash-link" href="#ru-he-bian-xie-dai-ma" title="Direct link to heading">â€‹</a></h2><p><strong>1.</strong> å†…å­˜ç®¡ç†ã€‚</p><p>æ‰‹åŠ¨å†…å­˜é‡Šæ”¾ (<code>delete</code>) åªèƒ½åœ¨åº“ä»£ç ä¸­ä½¿ç”¨ã€‚</p><p>åœ¨åº“ä»£ç ä¸­ï¼Œ <code>delete</code> è¿ç®—ç¬¦åªèƒ½åœ¨ææ„å‡½æ•°ä¸­ä½¿ç”¨ã€‚</p><p>åœ¨åº”ç”¨ç¨‹åºä»£ç ä¸­ï¼Œå†…å­˜å¿…é¡»ç”±æ‹¥æœ‰å®ƒçš„å¯¹è±¡é‡Šæ”¾ã€‚</p><p>ç¤ºä¾‹ï¼š</p><ul><li>æœ€ç®€å•çš„æ–¹æ³•æ˜¯å°†å¯¹è±¡æ”¾åœ¨å †æ ˆä¸Šï¼Œæˆ–ä½¿å…¶æˆä¸ºå¦ä¸€ä¸ªç±»çš„æˆå‘˜ã€‚</li><li>å¯¹äºå¤§é‡å°å¯¹è±¡ï¼Œè¯·ä½¿ç”¨å®¹å™¨ã€‚</li><li>å¯¹äºè‡ªåŠ¨é‡Šæ”¾å°‘é‡åœ¨å †ä¸­çš„å¯¹è±¡ï¼Œå¯ä»¥ç”¨ <code>shared_ptr/unique_ptr</code>ã€‚</li></ul><p><strong>2.</strong> èµ„æºç®¡ç†ã€‚</p><p>ä½¿ç”¨ <code>RAII</code> ä»¥åŠæŸ¥çœ‹ä»¥ä¸Šè¯´æ˜ã€‚</p><p><strong>3.</strong> é”™è¯¯å¤„ç†ã€‚</p><p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨åªéœ€è¦æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œè€Œä¸éœ€è¦æ•è·å®ƒï¼ˆå› ä¸º<code>RAII</code>ï¼‰ã€‚</p><p>åœ¨ç¦»çº¿æ•°æ®å¤„ç†åº”ç”¨ç¨‹åºä¸­ï¼Œé€šå¸¸å¯ä»¥æ¥å—ä¸æ•è·å¼‚å¸¸ã€‚</p><p>åœ¨å¤„ç†ç”¨æˆ·è¯·æ±‚çš„æœåŠ¡å™¨ä¸­ï¼Œæ•è·è¿æ¥å¤„ç†ç¨‹åºé¡¶å±‚çš„å¼‚å¸¸é€šå¸¸å°±è¶³å¤Ÿäº†ã€‚</p><p>åœ¨çº¿ç¨‹å‡½æ•°ä¸­ï¼Œä½ åº”è¯¥åœ¨ <code>join</code> ä¹‹åæ•è·å¹¶ä¿ç•™æ‰€æœ‰å¼‚å¸¸ä»¥åœ¨ä¸»çº¿ç¨‹ä¸­é‡æ–°æŠ›å‡ºå®ƒä»¬ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">/// If there weren&#x27;t any calculations yet, calculate the first block synchronously</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token operator" style="color:rgb(0, 0, 0)">!</span><span class="token plain">started</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token function" style="color:rgb(0, 0, 255)">calculate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    started </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">else</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">/// If calculations are already in progress, wait for the result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    pool</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">wait</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">exception</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    exception</span><span class="token operator" style="color:rgb(0, 0, 0)">-&gt;</span><span class="token function" style="color:rgb(0, 0, 255)">rethrow</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ä¸å¤„ç†å°±ä¸è¦éšè—å¼‚å¸¸ã€‚ æ°¸è¿œä¸è¦ç›²ç›®åœ°æŠŠæ‰€æœ‰å¼‚å¸¸éƒ½è®°å½•åˆ°æ—¥å¿—ä¸­ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">//Not correct</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å¦‚æœæ‚¨éœ€è¦å¿½ç•¥æŸäº›å¼‚å¸¸ï¼Œè¯·ä»…é’ˆå¯¹ç‰¹å®šå¼‚å¸¸æ‰§è¡Œæ­¤æ“ä½œå¹¶é‡æ–°æŠ›å‡ºå…¶ä½™å¼‚å¸¸ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> DB</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">Exception </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">code</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token plain"> ErrorCodes</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">UNKNOWN_AGGREGATE_FUNCTION</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">nullptr</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">throw</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å½“ä½¿ç”¨å…·æœ‰è¿”å›ç æˆ– <code>errno</code> çš„å‡½æ•°æ—¶ï¼Œè¯·å§‹ç»ˆæ£€æŸ¥ç»“æœå¹¶åœ¨å‡ºç°é”™è¯¯æ—¶æŠ›å‡ºå¼‚å¸¸ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">!=</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">close</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">fd</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token function" style="color:rgb(0, 0, 255)">throwFromErrno</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Cannot close file &quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> file_name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> ErrorCodes</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">CANNOT_CLOSE_FILE</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><code>ä¸è¦ä½¿ç”¨æ–­è¨€</code>ã€‚</p><p><strong>4.</strong> å¼‚å¸¸ç±»å‹ã€‚</p><p>ä¸éœ€è¦åœ¨åº”ç”¨ç¨‹åºä»£ç ä¸­ä½¿ç”¨å¤æ‚çš„å¼‚å¸¸å±‚æ¬¡ç»“æ„ã€‚ ç³»ç»Ÿç®¡ç†å‘˜åº”è¯¥å¯ä»¥ç†è§£å¼‚å¸¸æ–‡æœ¬ã€‚</p><p><strong>5.</strong> ä»ææ„å‡½æ•°ä¸­æŠ›å‡ºå¼‚å¸¸ã€‚</p><p>ä¸å»ºè®®è¿™æ ·åšï¼Œä½†å…è®¸è¿™æ ·åšã€‚</p><p>æŒ‰ç…§ä»¥ä¸‹é€‰é¡¹ï¼š</p><ul><li>åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼ˆ <code>doneï¼ˆï¼‰</code> æˆ– <code>finalizeï¼ˆï¼‰</code> ï¼‰ï¼Œå®ƒå°†æå‰å®Œæˆæ‰€æœ‰å¯èƒ½å¯¼è‡´å¼‚å¸¸çš„å·¥ä½œã€‚ å¦‚æœè°ƒç”¨äº†è¯¥å‡½æ•°ï¼Œåˆ™ç¨ååœ¨ææ„å‡½æ•°ä¸­åº”è¯¥æ²¡æœ‰å¼‚å¸¸ã€‚</li><li>è¿‡äºå¤æ‚çš„ä»»åŠ¡ï¼ˆä¾‹å¦‚é€šè¿‡ç½‘ç»œå‘é€æ¶ˆæ¯ï¼‰å¯ä»¥æ”¾åœ¨å•ç‹¬çš„æ–¹æ³•ä¸­ï¼Œç±»ç”¨æˆ·å¿…é¡»åœ¨é”€æ¯ä¹‹å‰è°ƒç”¨å®ƒä»¬ã€‚</li><li>å¦‚æœææ„å‡½æ•°ä¸­å­˜åœ¨å¼‚å¸¸ï¼Œåˆ™æœ€å¥½è®°å½•å®ƒè€Œä¸æ˜¯éšè—å®ƒï¼ˆå¦‚æœ logger å¯ç”¨ï¼‰ã€‚</li><li>åœ¨ç®€å•çš„åº”ç”¨ç¨‹åºä¸­ï¼Œä¾èµ–äº<code>std::terminate</code>ï¼ˆå¯¹äºC++ 11ä¸­é»˜è®¤æƒ…å†µä¸‹ä¸º <code>noexcept</code> çš„æƒ…å†µï¼‰æ¥å¤„ç†å¼‚å¸¸æ˜¯å¯ä»¥æ¥å—çš„ã€‚</li></ul><p><strong>6.</strong> åŒ¿åä»£ç å—ã€‚</p><p>æ‚¨å¯ä»¥åœ¨å•ä¸ªå‡½æ•°å†…åˆ›å»ºå•ç‹¬çš„ä»£ç å—ï¼Œä»¥ä½¿æŸäº›å˜é‡æˆä¸ºå±€éƒ¨å˜é‡ï¼Œä»¥ä¾¿åœ¨é€€å‡ºå—æ—¶è°ƒç”¨ææ„å‡½æ•°ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token plain">Block block </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">in</span><span class="token operator" style="color:rgb(0, 0, 0)">-&gt;</span><span class="token function" style="color:rgb(0, 0, 255)">read</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    std</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">lock_guard</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">mutex</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">lock</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">mutex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    data</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">ready </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    data</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">block </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> block</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">ready_any</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">set</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>7.</strong> å¤šçº¿ç¨‹ã€‚</p><p>åœ¨ç¦»çº¿æ•°æ®å¤„ç†ç¨‹åºä¸­ï¼š</p><ul><li>å°è¯•åœ¨å•ä¸ªCPUæ ¸å¿ƒä¸Šè·å¾—æœ€ä½³æ€§èƒ½ã€‚ ç„¶åï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€è¦å¹¶è¡ŒåŒ–ä»£ç ã€‚</li></ul><p>åœ¨æœåŠ¡ç«¯åº”ç”¨ä¸­ï¼š</p><ul><li>ä½¿ç”¨çº¿ç¨‹æ± æ¥å¤„ç†è¯·æ±‚ã€‚ æ­¤æ—¶ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰ä»»ä½•éœ€è¦ç”¨æˆ·ç©ºé—´ä¸Šä¸‹æ–‡åˆ‡æ¢çš„ä»»åŠ¡ã€‚</li></ul><p>Forkä¸ç”¨äºå¹¶è¡ŒåŒ–ã€‚</p><p><strong>8.</strong> åŒæ­¥çº¿ç¨‹ã€‚</p><p>é€šå¸¸å¯ä»¥ä½¿ä¸åŒçš„çº¿ç¨‹ä½¿ç”¨ä¸åŒçš„å­˜å‚¨å•å…ƒï¼ˆç”šè‡³æ›´å¥½ï¼šä¸åŒçš„ç¼“å­˜çº¿ï¼‰ï¼Œå¹¶ä¸”ä¸ä½¿ç”¨ä»»ä½•çº¿ç¨‹åŒæ­¥ï¼ˆé™¤äº†<code>joinAll</code>ï¼‰ã€‚</p><p>å¦‚æœéœ€è¦åŒæ­¥ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåœ¨ <code>lock_guard</code> ä¸‹ä½¿ç”¨äº’æ–¥é‡å°±è¶³å¤Ÿäº†ã€‚</p><p>åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œä½¿ç”¨ç³»ç»ŸåŒæ­¥åŸè¯­ã€‚ä¸è¦ä½¿ç”¨å¿™ç­‰å¾…ã€‚</p><p>ä»…åœ¨æœ€ç®€å•çš„æƒ…å†µä¸‹æ‰åº”ä½¿ç”¨åŸå­æ“ä½œã€‚</p><p>é™¤éæ˜¯æ‚¨çš„ä¸»è¦ä¸“ä¸šé¢†åŸŸï¼Œå¦åˆ™ä¸è¦å°è¯•å®æ–½æ— é”æ•°æ®ç»“æ„ã€‚</p><p><strong>9.</strong> æŒ‡é’ˆå’Œå¼•ç”¨ã€‚</p><p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œè¯·ç”¨å¼•ç”¨ã€‚</p><p><strong>10.</strong> å¸¸é‡ã€‚</p><p>ä½¿ç”¨ const å¼•ç”¨ã€æŒ‡é’ˆï¼ŒæŒ‡å‘å¸¸é‡ã€<code>const_iterator</code>å’Œ const æ–¹æ³•ã€‚</p><p>å°† <code>const</code> è§†ä¸ºé»˜è®¤å€¼ï¼Œä»…åœ¨å¿…è¦æ—¶ä½¿ç”¨é <code>const</code>ã€‚</p><p>å½“æŒ‰å€¼ä¼ é€’å˜é‡æ—¶ï¼Œä½¿ç”¨ <code>const</code> é€šå¸¸æ²¡æœ‰æ„ä¹‰ã€‚</p><p><strong>11.</strong> æ— ç¬¦å·ã€‚</p><p>å¿…è¦æ—¶ä½¿ç”¨<code>unsigned</code>ã€‚</p><p><strong>12.</strong> æ•°å€¼ç±»å‹ã€‚</p><p>ä½¿ç”¨ <code>UInt8</code>ï¼Œ <code>UInt16</code>ï¼Œ <code>UInt32</code>ï¼Œ <code>UInt64</code>ï¼Œ <code>Int8</code>ï¼Œ <code>Int16</code>ï¼Œ <code>Int32</code> å’Œ <code>Int64</code>ï¼ŒåŒæ ·è¿˜æœ‰ <code>size_t</code>ï¼Œ <code>ssize_t</code> å’Œ <code>ptrdiff_t</code>ã€‚</p><p>ä¸è¦ä½¿ç”¨è¿™äº›ç±»å‹ï¼š<code>signed / unsigned long</code>ï¼Œ<code>long long</code>ï¼Œ<code>short</code>ï¼Œ<code>signed / unsigned char</code>ï¼Œ<code>char</code>ã€‚</p><p><strong>13.</strong> å‚æ•°ä¼ é€’ã€‚</p><p>é€šè¿‡å¼•ç”¨ä¼ é€’å¤æ‚ç±»å‹ ï¼ˆåŒ…æ‹¬ <code>std::string</code>ï¼‰ã€‚</p><p>å¦‚æœå‡½æ•°ä¸­ä¼ é€’å †ä¸­åˆ›å»ºçš„å¯¹è±¡ï¼Œåˆ™ä½¿å‚æ•°ç±»å‹ä¸º <code>shared_ptr</code> æˆ–è€… <code>unique_ptr</code>.</p><p><strong>14.</strong> è¿”å›å€¼</p><p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä½¿ç”¨ <code>return</code>ã€‚ä¸è¦ä½¿ç”¨ <code>return std::move(res)</code>ã€‚</p><p>å¦‚æœå‡½æ•°åœ¨å †ä¸Šåˆ†é…å¯¹è±¡å¹¶è¿”å›å®ƒï¼Œè¯·ä½¿ç”¨ <code>shared_ptr</code> æˆ– <code>unique_ptr</code>ã€‚</p><p>åœ¨æå°‘æ•°æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½éœ€è¦é€šè¿‡å‚æ•°è¿”å›å€¼ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå‚æ•°åº”è¯¥æ˜¯å¼•ç”¨ä¼ é€’çš„ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">using</span><span class="token plain"> AggregateFunctionPtr </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">IAggregateFunction</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">/** Allows creating an aggregate function by its name.</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">  */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">AggregateFunctionFactory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token function" style="color:rgb(0, 0, 255)">AggregateFunctionFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    AggregateFunctionPtr </span><span class="token function" style="color:rgb(0, 0, 255)">get</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> String </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain"> name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> DataTypes </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain"> argument_types</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>15.</strong> å‘½åç©ºé—´ã€‚</p><p>æ²¡æœ‰å¿…è¦ä¸ºåº”ç”¨ç¨‹åºä»£ç ä½¿ç”¨å•ç‹¬çš„ <code>namespace</code> ã€‚</p><p>å°å‹åº“ä¹Ÿä¸éœ€è¦è¿™ä¸ªã€‚</p><p>å¯¹äºä¸­å¤§å‹åº“ï¼Œé¡»å°†æ‰€æœ‰ä»£ç æ”¾åœ¨ <code>namespace</code> ä¸­ã€‚</p><p>åœ¨åº“çš„ <code>.h</code> æ–‡ä»¶ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>namespace detail</code> æ¥éšè—åº”ç”¨ç¨‹åºä»£ç ä¸éœ€è¦çš„å®ç°ç»†èŠ‚ã€‚</p><p>åœ¨ <code>.cpp</code> æ–‡ä»¶ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>static</code> æˆ–åŒ¿åå‘½åç©ºé—´æ¥éšè—ç¬¦å·ã€‚</p><p>åŒæ · <code>namespace</code> å¯ç”¨äº <code>enum</code> ä»¥é˜²æ­¢ç›¸åº”çš„åç§°è½å…¥å¤–éƒ¨ <code>namespace</code>ï¼ˆä½†æœ€å¥½ä½¿ç”¨<code>enum class</code>ï¼‰ã€‚</p><p><strong>16.</strong> å»¶è¿Ÿåˆå§‹åŒ–ã€‚</p><p>å¦‚æœåˆå§‹åŒ–éœ€è¦å‚æ•°ï¼Œé‚£ä¹ˆé€šå¸¸ä¸åº”è¯¥ç¼–å†™é»˜è®¤æ„é€ å‡½æ•°ã€‚</p><p>å¦‚æœç¨åæ‚¨éœ€è¦å»¶è¿Ÿåˆå§‹åŒ–ï¼Œåˆ™å¯ä»¥æ·»åŠ å°†åˆ›å»ºæ— æ•ˆå¯¹è±¡çš„é»˜è®¤æ„é€ å‡½æ•°ã€‚ æˆ–è€…ï¼Œå¯¹äºå°‘é‡å¯¹è±¡ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>shared_ptr / unique_ptr</code>ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">Loader</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">DB</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">Connection </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain"> connection_</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">string </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain"> query</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> size_t max_block_size_</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">/// For deferred initialization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token function" style="color:rgb(0, 0, 255)">Loader</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>17.</strong> è™šå‡½æ•°ã€‚</p><p>å¦‚æœè¯¥ç±»ä¸æ˜¯ç”¨äºå¤šæ€ä½¿ç”¨ï¼Œåˆ™ä¸éœ€è¦å°†å‡½æ•°è®¾ç½®ä¸ºè™šæ‹Ÿã€‚è¿™ä¹Ÿé€‚ç”¨äºææ„å‡½æ•°ã€‚</p><p><strong>18.</strong> ç¼–ç ã€‚</p><p>åœ¨æ‰€æœ‰æƒ…å†µä¸‹ä½¿ç”¨ UTF-8 ç¼–ç ã€‚ä½¿ç”¨ <code>std::string</code> å’Œ <code>char *</code>ã€‚ä¸è¦ä½¿ç”¨ <code>std::wstring</code> å’Œ <code>wchar_t</code>ã€‚</p><p><strong>19.</strong> æ—¥å¿—ã€‚</p><p>è¯·å‚é˜…ä»£ç ä¸­çš„ç¤ºä¾‹ã€‚</p><p>åœ¨æäº¤ä¹‹å‰ï¼Œåˆ é™¤æ‰€æœ‰æ— æ„ä¹‰å’Œè°ƒè¯•æ—¥å¿—è®°å½•ï¼Œä»¥åŠä»»ä½•å…¶ä»–ç±»å‹çš„è°ƒè¯•è¾“å‡ºã€‚</p><p>åº”è¯¥é¿å…å¾ªç¯è®°å½•æ—¥å¿—ï¼Œå³ä½¿åœ¨ Trace çº§åˆ«ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><p>æ—¥å¿—å¿…é¡»åœ¨ä»»ä½•æ—¥å¿—è®°å½•çº§åˆ«éƒ½å¯è¯»ã€‚</p><p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåªåº”åœ¨åº”ç”¨ç¨‹åºä»£ç ä¸­ä½¿ç”¨æ—¥å¿—è®°å½•ã€‚</p><p>æ—¥å¿—æ¶ˆæ¯å¿…é¡»ç”¨è‹±æ–‡å†™æˆã€‚</p><p>å¯¹äºç³»ç»Ÿç®¡ç†å‘˜æ¥è¯´ï¼Œæ—¥å¿—æœ€å¥½æ˜¯å¯ä»¥ç†è§£çš„ã€‚</p><p>ä¸è¦åœ¨æ—¥å¿—ä¸­ä½¿ç”¨äºµæ¸è¯­è¨€ã€‚</p><p>åœ¨æ—¥å¿—ä¸­ä½¿ç”¨UTF-8ç¼–ç ã€‚ åœ¨æå°‘æ•°æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥åœ¨æ—¥å¿—ä¸­ä½¿ç”¨éASCIIå­—ç¬¦ã€‚</p><p><strong>20.</strong> è¾“å…¥-è¾“å‡ºã€‚</p><p>ä¸è¦ä½¿ç”¨ <code>iostreams</code> åœ¨å¯¹åº”ç”¨ç¨‹åºæ€§èƒ½è‡³å…³é‡è¦çš„å†…éƒ¨å¾ªç¯ä¸­ï¼ˆå¹¶ä¸”æ°¸è¿œä¸è¦ä½¿ç”¨ <code>stringstream</code> ï¼‰ã€‚</p><p>ä½¿ç”¨ <code>DB/IO</code> åº“æ›¿ä»£ã€‚</p><p><strong>21.</strong> æ—¥æœŸå’Œæ—¶é—´ã€‚</p><p>å‚è€ƒ <code>DateLUT</code> åº“ã€‚</p><p><strong>22.</strong> å¼•å…¥å¤´æ–‡ä»¶ã€‚</p><p>ä¸€ç›´ç”¨ <code>#pragma once</code> è€Œä¸æ˜¯å…¶ä»–å®ã€‚</p><p><strong>23.</strong> using è¯­æ³•</p><p><code>using namespace</code> ä¸ä¼šè¢«ä½¿ç”¨ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨ç‰¹å®šçš„ <code>using</code>ã€‚ ä½†æ˜¯åœ¨ç±»æˆ–å‡½æ•°ä¸­ä½¿å®ƒæˆä¸ºå±€éƒ¨çš„ã€‚</p><p><strong>24.</strong> ä¸è¦ä½¿ç”¨ <code>trailing return type</code> ä¸ºå¿…è¦çš„åŠŸèƒ½ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">auto</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">f</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>25.</strong> å£°æ˜å’Œåˆå§‹åŒ–å˜é‡ã€‚</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">//right way</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">string s </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Hello&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">string s</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Hello&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//wrong way</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">auto</span><span class="token plain"> s </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:rgb(4, 81, 165)">::</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Hello&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>26.</strong> å¯¹äºè™šå‡½æ•°ï¼Œåœ¨åŸºç±»ä¸­ç¼–å†™ <code>virtual</code>ï¼Œä½†åœ¨åä»£ç±»ä¸­å†™ <code>override</code> è€Œä¸æ˜¯<code>virtual</code>ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="mei-you-yong-dao-de-c-te-xing">æ²¡æœ‰ç”¨åˆ°çš„ C++ ç‰¹æ€§ã€‚<a class="hash-link" href="#mei-you-yong-dao-de-c-te-xing" title="Direct link to heading">â€‹</a></h2><p><strong>1.</strong> ä¸ä½¿ç”¨è™šæ‹Ÿç»§æ‰¿ã€‚</p><p><strong>2.</strong> ä¸ä½¿ç”¨ C++03 ä¸­çš„å¼‚å¸¸æ ‡å‡†ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="ping-tai">å¹³å°<a class="hash-link" href="#ping-tai" title="Direct link to heading">â€‹</a></h2><p><strong>1.</strong> æˆ‘ä»¬ä¸ºç‰¹å®šå¹³å°ç¼–å†™ä»£ç ã€‚</p><p>ä½†åœ¨å…¶ä»–æ¡ä»¶ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œé¦–é€‰è·¨å¹³å°æˆ–å¯ç§»æ¤ä»£ç ã€‚</p><p><strong>2.</strong> è¯­è¨€ï¼š C++20.</p><p><strong>3.</strong> ç¼–è¯‘å™¨ï¼š <code>clang</code>ã€‚ æ­¤æ—¶ï¼ˆ2021å¹´03æœˆï¼‰ï¼Œä»£ç ä½¿ç”¨11ç‰ˆç¼–è¯‘ã€‚ï¼ˆå®ƒä¹Ÿå¯ä»¥ä½¿ç”¨<code>gcc</code> ç¼–è¯‘ but it is not suitable for productionï¼‰</p><p>ä½¿ç”¨æ ‡å‡†åº“ (<code>libc++</code>)ã€‚</p><p><strong>4.</strong> æ“ä½œç³»ç»Ÿï¼šLinux Ubuntuï¼Œä¸æ¯” Precise æ—©ã€‚</p><p><strong>5.</strong> ä»£ç æ˜¯ä¸ºx86_64 CPUæ¶æ„ç¼–å†™çš„ã€‚</p><p>CPUæŒ‡ä»¤é›†æ˜¯æˆ‘ä»¬æœåŠ¡å™¨ä¸­æ”¯æŒçš„æœ€å°é›†åˆã€‚ ç›®å‰ï¼Œå®ƒæ˜¯SSE 4.2ã€‚</p><p><strong>6.</strong> ä½¿ç”¨ <code>-Wall -Wextra -Werror</code> ç¼–è¯‘å‚æ•°ã€‚</p><p><strong>7.</strong> å¯¹æ‰€æœ‰åº“ä½¿ç”¨é™æ€é“¾æ¥ï¼Œé™¤äº†é‚£äº›éš¾ä»¥é™æ€è¿æ¥çš„åº“ï¼ˆå‚è§ <code>ldd</code> å‘½ä»¤çš„è¾“å‡ºï¼‰.</p><p><strong>8.</strong> ä½¿ç”¨å‘å¸ƒçš„è®¾ç½®æ¥å¼€å‘å’Œè°ƒè¯•ä»£ç ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="gong-ju">å·¥å…·<a class="hash-link" href="#gong-ju" title="Direct link to heading">â€‹</a></h2><p><strong>1.</strong> KDevelop æ˜¯ä¸€ä¸ªå¥½çš„ IDE.</p><p><strong>2.</strong> è°ƒè¯•å¯ä»¥ä½¿ç”¨ <code>gdb</code>ï¼Œ <code>valgrind</code> (<code>memcheck</code>)ï¼Œ <code>strace</code>ï¼Œ <code>-fsanitize=...</code>ï¼Œ æˆ– <code>tcmalloc_minimal_debug</code>.</p><p><strong>3.</strong> å¯¹äºæ€§èƒ½åˆ†æï¼Œä½¿ç”¨ <code>Linux Perf</code>ï¼Œ <code>valgrind</code> (<code>callgrind</code>)ï¼Œæˆ–è€… <code>strace -cf</code>ã€‚</p><p><strong>4.</strong> æºä»£ç ç”¨ Git ä½œç‰ˆæœ¬æ§åˆ¶ã€‚</p><p><strong>5.</strong> ä½¿ç”¨ <code>CMake</code> æ„å»ºã€‚</p><p><strong>6.</strong> ç¨‹åºçš„å‘å¸ƒä½¿ç”¨ <code>deb</code> å®‰è£…åŒ…ã€‚</p><p><strong>7.</strong> æäº¤åˆ° master åˆ†æ”¯çš„ä»£ç ä¸èƒ½ç ´åç¼–è¯‘ã€‚</p><p>è™½ç„¶åªæœ‰é€‰å®šçš„ä¿®è®¢è¢«è®¤ä¸ºæ˜¯å¯è¡Œçš„ã€‚</p><p><strong>8.</strong> å°½å¯èƒ½ç»å¸¸åœ°è¿›è¡Œæäº¤ï¼Œå³ä½¿ä»£ç åªæ˜¯éƒ¨åˆ†å‡†å¤‡å¥½äº†ã€‚</p><p>ä¸ºäº†è¿™ç§ç›®çš„å¯ä»¥åˆ›å»ºåˆ†æ”¯ã€‚</p><p>å¦‚æœæ‚¨çš„ä»£ç åœ¨ <code>master</code> åˆ†æ”¯ä¸­å°šä¸å¯æ„å»ºï¼Œåœ¨ <code>push</code> ä¹‹å‰éœ€è¦å°†å…¶ä»æ„å»ºä¸­æ’é™¤ã€‚æ‚¨éœ€è¦åœ¨å‡ å¤©å†…å®Œæˆæˆ–åˆ é™¤å®ƒã€‚</p><p><strong>9.</strong> å¯¹äºéä¸€èˆ¬çš„æ›´æ”¹ï¼Œè¯·ä½¿ç”¨åˆ†æ”¯å¹¶åœ¨æœåŠ¡å™¨ä¸Šå‘å¸ƒå®ƒä»¬ã€‚</p><p><strong>10.</strong> æœªä½¿ç”¨çš„ä»£ç å°†ä» repo ä¸­åˆ é™¤ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="ku">åº“<a class="hash-link" href="#ku" title="Direct link to heading">â€‹</a></h2><p><strong>1.</strong> The C++20 standard library is used (experimental extensions are allowed), as well as <code>boost</code> and <code>Poco</code> frameworks.</p><p><strong>2.</strong> It is not allowed to use libraries from OS packages. It is also not allowed to use pre-installed libraries. All libraries should be placed in form of source code in <code>contrib</code> directory and built with ClickHouse.</p><p><strong>3.</strong> Preference is always given to libraries that are already in use.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="yi-ban-jian-yi-1">ä¸€èˆ¬å»ºè®®<a class="hash-link" href="#yi-ban-jian-yi-1" title="Direct link to heading">â€‹</a></h2><p><strong>1.</strong> å°½å¯èƒ½ç²¾ç®€ä»£ç ã€‚</p><p><strong>2.</strong> å°è¯•ç”¨æœ€ç®€å•çš„æ–¹å¼å®ç°ã€‚</p><p><strong>3.</strong> åœ¨ä½ çŸ¥é“ä»£ç æ˜¯å¦‚ä½•å·¥ä½œä»¥åŠå†…éƒ¨å¾ªç¯å¦‚ä½•è¿ä½œä¹‹å‰ï¼Œä¸è¦ç¼–å†™ä»£ç ã€‚</p><p><strong>4.</strong> åœ¨æœ€ç®€å•çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ <code>using</code> è€Œä¸æ˜¯ç±»æˆ–ç»“æ„ã€‚</p><p><strong>5.</strong> å¦‚æœå¯èƒ½ï¼Œä¸è¦ç¼–å†™å¤åˆ¶æ„é€ å‡½æ•°ï¼Œèµ‹å€¼è¿ç®—ç¬¦ï¼Œææ„å‡½æ•°ï¼ˆè™šæ‹Ÿå‡½æ•°é™¤å¤–ï¼Œå¦‚æœç±»åŒ…å«è‡³å°‘ä¸€ä¸ªè™šå‡½æ•°ï¼‰ï¼Œç§»åŠ¨æ„é€ å‡½æ•°æˆ–ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ã€‚ æ¢å¥è¯è¯´ï¼Œç¼–è¯‘å™¨ç”Ÿæˆçš„å‡½æ•°å¿…é¡»æ­£å¸¸å·¥ä½œã€‚ æ‚¨å¯ä»¥ä½¿ç”¨ <code>default</code>ã€‚</p><p><strong>6.</strong> é¼“åŠ±ç®€åŒ–ä»£ç ã€‚ å°½å¯èƒ½å‡å°ä»£ç çš„å¤§å°ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="qi-ta-jian-yi">å…¶ä»–å»ºè®®<a class="hash-link" href="#qi-ta-jian-yi" title="Direct link to heading">â€‹</a></h2><p><strong>1.</strong> ä» <code>stddef.h</code> æ˜ç¡®æŒ‡å®š <code>std ::</code> çš„ç±»å‹ã€‚</p><p>ä¸æ¨èã€‚ æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬å»ºè®®å†™ <code>size_t</code> è€Œä¸æ˜¯ <code>std::size_t</code>ï¼Œå› ä¸ºå®ƒæ›´çŸ­ã€‚</p><p>ä¹Ÿæ¥å—æ·»åŠ  <code>std::</code>ã€‚</p><p><strong>2.</strong> ä¸ºæ ‡å‡†Cåº“ä¸­çš„å‡½æ•°æ˜ç¡®æŒ‡å®š <code>std::</code></p><p>ä¸æ¨èã€‚æ¢å¥è¯è¯´ï¼Œå†™ <code>memcpy</code> è€Œä¸æ˜¯<code>std::memcpy</code>ã€‚</p><p>åŸå› æ˜¯æœ‰ç±»ä¼¼çš„éæ ‡å‡†åŠŸèƒ½ï¼Œä¾‹å¦‚ <code>memmem</code>ã€‚æˆ‘ä»¬å¶å°”ä¼šä½¿ç”¨è¿™äº›åŠŸèƒ½ã€‚<code>namespace std</code>ä¸­ä¸å­˜åœ¨è¿™äº›å‡½æ•°ã€‚</p><p>å¦‚æœä½ åˆ°å¤„éƒ½å†™ <code>std::memcpy</code> è€Œä¸æ˜¯ <code>memcpy</code>ï¼Œé‚£ä¹ˆæ²¡æœ‰ <code>std::</code> çš„ <code>memmem</code> ä¼šæ˜¾å¾—å¾ˆå¥‡æ€ªã€‚</p><p>ä¸è¿‡ï¼Œå¦‚æœæ‚¨æ„¿æ„ï¼Œä»ç„¶å¯ä»¥ä½¿ç”¨ <code>std::</code>ã€‚</p><p><strong>3.</strong> å½“æ ‡å‡†C++åº“ä¸­æä¾›ç›¸åŒçš„å‡½æ•°æ—¶ï¼Œä½¿ç”¨Cä¸­çš„å‡½æ•°ã€‚</p><p>å¦‚æœå®ƒæ›´é«˜æ•ˆï¼Œè¿™æ˜¯å¯ä»¥æ¥å—çš„ã€‚</p><p>ä¾‹å¦‚ï¼Œä½¿ç”¨<code>memcpy</code>è€Œä¸æ˜¯<code>std::copy</code>æ¥å¤åˆ¶å¤§å—å†…å­˜ã€‚</p><p><strong>4.</strong> å‡½æ•°çš„å¤šè¡Œå‚æ•°ã€‚</p><p>å…è®¸ä»¥ä¸‹ä»»ä½•åŒ…è£…æ ·å¼ï¼š</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">function</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  T1 x1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  T2 x2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">function</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  size_t left</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> size_t right</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain"> RangesInDataParts ranges</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  size_t limit</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">function</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">size_t left</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> size_t right</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain"> RangesInDataParts ranges</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  size_t limit</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">function</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">size_t left</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> size_t right</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain"> RangesInDataParts ranges</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      size_t limit</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">function</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      size_t left</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      size_t right</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain"> RangesInDataParts ranges</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      size_t limit</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><a href="https://clickhouse.com/docs/en/development/style/" target="_blank" rel="noopener noreferrer">æ¥æºæ–‡ç« </a> </p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ClickHouse/ClickHouse/tree/docs-staging/docs/zh/development/style.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/zh/development/developer-instruction"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">developer-instruction</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/zh/development/tests"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ClickHouse æµ‹è¯•</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#yi-ban-jian-yi" class="table-of-contents__link toc-highlight">ä¸€èˆ¬å»ºè®®</a></li><li><a href="#ge-shi-hua" class="table-of-contents__link toc-highlight">æ ¼å¼åŒ–</a></li><li><a href="#comments" class="table-of-contents__link toc-highlight">è¯„è®º</a></li><li><a href="#names" class="table-of-contents__link toc-highlight">å§“å</a></li><li><a href="#ru-he-bian-xie-dai-ma" class="table-of-contents__link toc-highlight">å¦‚ä½•ç¼–å†™ä»£ç </a></li><li><a href="#mei-you-yong-dao-de-c-te-xing" class="table-of-contents__link toc-highlight">æ²¡æœ‰ç”¨åˆ°çš„ C++ ç‰¹æ€§ã€‚</a></li><li><a href="#ping-tai" class="table-of-contents__link toc-highlight">å¹³å°</a></li><li><a href="#gong-ju" class="table-of-contents__link toc-highlight">å·¥å…·</a></li><li><a href="#ku" class="table-of-contents__link toc-highlight">åº“</a></li><li><a href="#yi-ban-jian-yi-1" class="table-of-contents__link toc-highlight">ä¸€èˆ¬å»ºè®®</a></li><li><a href="#qi-ta-jian-yi" class="table-of-contents__link toc-highlight">å…¶ä»–å»ºè®®</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">ClickHouse</div><ul class="footer__items"><li class="footer__item"><a href="https://clickhouse.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Company</a></li><li class="footer__item"><a href="https://clickhouse.com/cloud/" target="_blank" rel="noopener noreferrer" class="footer__link-item">ClickHouse as a Service</a></li><li class="footer__item"><a href="https://clickhouse.com/careers/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Careers</a></li><li class="footer__item"><a href="https://clickhouse.com/learn/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Learn ClickHouse</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/ClickHouse/ClickHouse" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://clickhouse.com/blog/en/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/c/ClickHouseDB" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/ClickHouseDB" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://join.slack.com/t/clickhousedb/shared_invite/zt-rxm3rdrk-lIUmhLC3V8WTaL0TGxsOmg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Policies</div><ul class="footer__items"><li class="footer__item"><a href="https://clickhouse.com/legal/trademark-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trademark Policy</a></li><li class="footer__item"><a href="https://clickhouse.com/legal/privacy-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy</a></li><li class="footer__item"><a href="https://clickhouse.com/legal/cookie-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cookie Policy</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/logo.png" alt="ClickHouse Documentation" class="themedImage_W2Cr themedImage--light_TfLj footer__logo"><img src="/img/logo.png" alt="ClickHouse Documentation" class="themedImage_W2Cr themedImage--dark_oUvU footer__logo"></div><div class="footer__copyright">Copyright &copy; 2016&ndash;2022 ClickHouse, Inc. ClickHouse Docs provided under the Creative Commons CC BY-NC-SA license. ClickHouse&reg; is a registered trademark of ClickHouse, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.db9e59e5.js"></script>
<script src="/assets/js/main.028d105f.js"></script>
</body>
</html>