<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-zh/changelog/index">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KF1LLRTQ5Q"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KF1LLRTQ5Q",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="ClickHouse Docs" href="/opensearch.xml">
<script src="./src/js/analytics.js"></script><title data-rh="true">index | ClickHouse Docs</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://sturdy-adventure-06fed4eb.pages.github.io//zh/changelog/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="index | ClickHouse Docs"><meta data-rh="true" name="description" content="碌莽禄release拢.0755-88888888"><meta data-rh="true" property="og:description" content="碌莽禄release拢.0755-88888888"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://sturdy-adventure-06fed4eb.pages.github.io//zh/changelog/"><link data-rh="true" rel="alternate" href="https://sturdy-adventure-06fed4eb.pages.github.io//zh/changelog/" hreflang="en"><link data-rh="true" rel="alternate" href="https://sturdy-adventure-06fed4eb.pages.github.io//zh/changelog/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.d094a63e.css">
<link rel="preload" href="/assets/js/runtime~main.db9e59e5.js" as="script">
<link rel="preload" href="/assets/js/main.028d105f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_ObN2"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://clickhouse.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/clickhouse.svg" alt="ClickHouse" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/clickhouse.svg" alt="ClickHouse" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">ClickHouse</b></a><a class="navbar__item navbar__link" href="/en/intro">Docs</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Language</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/en/intro">English</a></li><li><a class="dropdown__link" href="/ru">Russian</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/zh">Chinese</a></li></ul></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD sidebarWithHideableNavbar_d0QC"><a href="https://clickhouse.com/" target="_blank" rel="noopener noreferrer" tabindex="-1" class="sidebarLogo_YUvz"><img src="/img/clickhouse.svg" alt="ClickHouse" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/clickhouse.svg" alt="ClickHouse" class="themedImage_W2Cr themedImage--dark_oUvU"><b>ClickHouse</b></a><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/">什么是ClickHouse？</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/category/简介">简介</a><button aria-label="Toggle the collapsible sidebar category &#x27;简介&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/getting-started/">快速上手</a><button aria-label="Toggle the collapsible sidebar category &#x27;快速上手&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/interfaces/">接口</a><button aria-label="Toggle the collapsible sidebar category &#x27;接口&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/category/引擎">引擎</a><button aria-label="Toggle the collapsible sidebar category &#x27;引擎&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/sql-reference/">SQL参考</a><button aria-label="Toggle the collapsible sidebar category &#x27;SQL参考&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/guides/">ClickHouse指南</a><button aria-label="Toggle the collapsible sidebar category &#x27;ClickHouse指南&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/operations/">操作</a><button aria-label="Toggle the collapsible sidebar category &#x27;操作&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/commercial/">商业支持</a><button aria-label="Toggle the collapsible sidebar category &#x27;商业支持&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/faq/">F.A.Q.</a><button aria-label="Toggle the collapsible sidebar category &#x27;F.A.Q.&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/whats-new/">ClickHouse事迹</a><button aria-label="Toggle the collapsible sidebar category &#x27;ClickHouse事迹&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/zh/changelog/">变更日志</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/development/">ClickHouse 开发</a><button aria-label="Toggle the collapsible sidebar category &#x27;ClickHouse 开发&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/">🏠</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">变更日志</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>index</h1></header><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-v20-3">碌莽禄release拢.0755-88888888<a class="hash-link" href="#clickhouse-release-v20-3" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-v20-3-4-10-2020-03-20">ClickHouse版本v20.3.4.10,2020-03-20<a class="hash-link" href="#clickhouse-release-v20-3-4-10-2020-03-20" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix">错误修复<a class="hash-link" href="#bug-fix" title="Direct link to heading">​</a></h4><ul><li>此版本还包含20.1.8.41的所有错误修复</li><li>修复丢失 <code>rows_before_limit_at_least</code> 用于通过http进行查询（使用处理器管道）。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9730" target="_blank" rel="noopener noreferrer">#9730</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9757" target="_blank" rel="noopener noreferrer">#9757</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-v20-3-3-6-2020-03-17">ClickHouse释放v20.3.3.6,2020-03-17<a class="hash-link" href="#clickhouse-release-v20-3-3-6-2020-03-17" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-1">错误修复<a class="hash-link" href="#bug-fix-1" title="Direct link to heading">​</a></h4><ul><li>此版本还包含20.1.7.38的所有错误修复</li><li>修复复制中的错误，如果用户在以前的版本上执行了突变，则不允许复制工作。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9645" target="_blank" rel="noopener noreferrer">#9645</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9652" target="_blank" rel="noopener noreferrer">#9652</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>). 它使版本20.3再次向后兼容。</li><li>添加设置 <code>use_compact_format_in_distributed_parts_names</code> 它允许写文件 <code>INSERT</code> 查询到 <code>Distributed</code> 表格格式更紧凑。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9647" target="_blank" rel="noopener noreferrer">#9647</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9653" target="_blank" rel="noopener noreferrer">#9653</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>). 它使版本20.3再次向后兼容。</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-v20-3-2-1-2020-03-12">ClickHouse版本v20.3.2.1,2020-03-12<a class="hash-link" href="#clickhouse-release-v20-3-2-1-2020-03-12" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="backward-incompatible-change">向后不兼容的更改<a class="hash-link" href="#backward-incompatible-change" title="Direct link to heading">​</a></h4><ul><li>修正了这个问题 <code>file name too long</code> 当发送数据 <code>Distributed</code> 大量副本的表。 修复了服务器日志中显示副本凭据的问题。 磁盘上的目录名格式已更改为 <code>[shard{shard_index}[_replica{replica_index}]]</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8911" target="_blank" rel="noopener noreferrer">#8911</a> (<a href="https://github.com/millb" target="_blank" rel="noopener noreferrer">米哈伊尔<!-- -->*<!-- -->科罗托夫</a>）升级到新版本后，您将无法在没有人工干预的情况下降级，因为旧的服务器版本无法识别新的目录格式。 如果要降级，则必须手动将相应的目录重命名为旧格式。 仅当您使用了异步时，此更改才相关 <code>INSERT</code>s到 <code>Distributed</code> 桌子 在版本20.3.3中，我们将介绍一个设置，让您逐渐启用新格式。</li><li>更改了mutation命令的复制日志条目的格式。 在安装新版本之前，您必须等待旧的突变处理。</li><li>实现简单的内存分析器，将堆栈跟踪转储到 <code>system.trace_log</code> 超过软分配限制的每N个字节 <a href="https://github.com/ClickHouse/ClickHouse/pull/8765" target="_blank" rel="noopener noreferrer">#8765</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">伊万</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/9472" target="_blank" rel="noopener noreferrer">#9472</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>）列 <code>system.trace_log</code> 从改名 <code>timer_type</code> 到 <code>trace_type</code>. 这将需要改变第三方性能分析和flamegraph处理工具。</li><li>在任何地方使用操作系统线程id，而不是内部线程编号。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/7477" target="_blank" rel="noopener noreferrer">#7477</a> 老 <code>clickhouse-client</code> 无法接收从服务器发送的日志，当设置 <code>send_logs_level</code> 已启用，因为结构化日志消息的名称和类型已更改。 另一方面，不同的服务器版本可以相互发送不同类型的日志。 当你不使用 <code>send_logs_level</code> 设置，你不应该关心。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8954" target="_blank" rel="noopener noreferrer">#8954</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>删除 <code>indexHint</code> 功能 <a href="https://github.com/ClickHouse/ClickHouse/pull/9542" target="_blank" rel="noopener noreferrer">#9542</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>删除 <code>findClusterIndex</code>, <code>findClusterValue</code> 功能。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8641" target="_blank" rel="noopener noreferrer">#8641</a>. 如果您正在使用这些功能，请发送电子邮件至 <code>clickhouse-feedback@yandex-team.com</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/9543" target="_blank" rel="noopener noreferrer">#9543</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>现在不允许创建列或添加列 <code>SELECT</code> 子查询作为默认表达式。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9481" target="_blank" rel="noopener noreferrer">#9481</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>需要联接中的子查询的别名。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9274" target="_blank" rel="noopener noreferrer">#9274</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>改进 <code>ALTER MODIFY/ADD</code> 查询逻辑。 现在你不能 <code>ADD</code> 不带类型的列, <code>MODIFY</code> 默认表达式不改变列的类型和 <code>MODIFY</code> type不会丢失默认表达式值。 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8669" target="_blank" rel="noopener noreferrer">#8669</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9227" target="_blank" rel="noopener noreferrer">#9227</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>要求重新启动服务器以应用日志记录配置中的更改。 这是一种临时解决方法，可以避免服务器将日志记录到已删除的日志文件中的错误（请参阅 <a href="https://github.com/ClickHouse/ClickHouse/issues/8696" target="_blank" rel="noopener noreferrer">#8696</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/8707" target="_blank" rel="noopener noreferrer">#8707</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">Alexander Kuzmenkov</a>)</li><li>设置 <code>experimental_use_processors</code> 默认情况下启用。 此设置允许使用新的查询管道。 这是内部重构，我们期望没有明显的变化。 如果您将看到任何问题，请将其设置为返回零。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8768" target="_blank" rel="noopener noreferrer">#8768</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="new-feature">新功能<a class="hash-link" href="#new-feature" title="Direct link to heading">​</a></h4><ul><li>添加 <code>Avro</code> 和 <code>AvroConfluent</code> 输入/输出格式 <a href="https://github.com/ClickHouse/ClickHouse/pull/8571" target="_blank" rel="noopener noreferrer">#8571</a> (<a href="https://github.com/oandrew" target="_blank" rel="noopener noreferrer">安德鲁Onyshchuk</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/8957" target="_blank" rel="noopener noreferrer">#8957</a> (<a href="https://github.com/oandrew" target="_blank" rel="noopener noreferrer">安德鲁Onyshchuk</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/8717" target="_blank" rel="noopener noreferrer">#8717</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>过期密钥的多线程和非阻塞更新 <code>cache</code> 字典（可选的权限读取旧的）。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8303" target="_blank" rel="noopener noreferrer">#8303</a> (<a href="https://github.com/nikitamikhaylov" target="_blank" rel="noopener noreferrer">尼基塔<!-- -->*<!-- -->米哈伊洛夫</a>)</li><li>添加查询 <code>ALTER ... MATERIALIZE TTL</code>. 它运行突变，强制通过TTL删除过期的数据，并重新计算所有部分有关ttl的元信息。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8775" target="_blank" rel="noopener noreferrer">#8775</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">安东<!-- -->*<!-- -->波波夫</a>)</li><li>如果需要，从HashJoin切换到MergeJoin（在磁盘上 <a href="https://github.com/ClickHouse/ClickHouse/pull/9082" target="_blank" rel="noopener noreferrer">#9082</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>已添加 <code>MOVE PARTITION</code> 命令 <code>ALTER TABLE</code> <a href="https://github.com/ClickHouse/ClickHouse/issues/4729" target="_blank" rel="noopener noreferrer">#4729</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/6168" target="_blank" rel="noopener noreferrer">#6168</a> (<a href="https://github.com/YiuRULE" target="_blank" rel="noopener noreferrer">纪尧姆<!-- -->*<!-- -->塔瑟里</a>)</li><li>动态地从配置文件重新加载存储配置。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8594" target="_blank" rel="noopener noreferrer">#8594</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>允许更改 <code>storage_policy</code> 为了不那么富有的人。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8107" target="_blank" rel="noopener noreferrer">#8107</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>增加了对s3存储和表功能的globs/通配符的支持。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8851" target="_blank" rel="noopener noreferrer">#8851</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>执行 <code>bitAnd</code>, <code>bitOr</code>, <code>bitXor</code>, <code>bitNot</code> 为 <code>FixedString(N)</code> 数据类型。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9091" target="_blank" rel="noopener noreferrer">#9091</a> (<a href="https://github.com/YiuRULE" target="_blank" rel="noopener noreferrer">纪尧姆<!-- -->*<!-- -->塔瑟里</a>)</li><li>添加功能 <code>bitCount</code>. 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8702" target="_blank" rel="noopener noreferrer">#8702</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8708" target="_blank" rel="noopener noreferrer">#8708</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/8749" target="_blank" rel="noopener noreferrer">#8749</a> (<a href="https://github.com/ikopylov" target="_blank" rel="noopener noreferrer">ikopylov</a>)</li><li>添加 <code>generateRandom</code> 表函数生成具有给定模式的随机行。 允许用数据填充任意测试表。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8994" target="_blank" rel="noopener noreferrer">#8994</a> (<a href="https://github.com/qoega" target="_blank" rel="noopener noreferrer">Ilya Yatsishin</a>)</li><li><code>JSONEachRowFormat</code>：当对象包含在顶层数组中时，支持特殊情况。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8860" target="_blank" rel="noopener noreferrer">#8860</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">克鲁格洛夫<!-- -->*<!-- -->帕维尔</a>)</li><li>现在可以创建一个列 <code>DEFAULT</code> 取决于默认列的表达式 <code>ALIAS</code> 表达。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9489" target="_blank" rel="noopener noreferrer">#9489</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>允许指定 <code>--limit</code> 超过源数据大小 <code>clickhouse-obfuscator</code>. 数据将以不同的随机种子重复。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9155" target="_blank" rel="noopener noreferrer">#9155</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>已添加 <code>groupArraySample</code> 功能（类似于 <code>groupArray</code>）与reservior采样算法。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8286" target="_blank" rel="noopener noreferrer">#8286</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">阿莫斯鸟</a>)</li><li>现在，您可以监视更新队列的大小 <code>cache</code>/<code>complex_key_cache</code> 通过系统指标字典。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9413" target="_blank" rel="noopener noreferrer">#9413</a> (<a href="https://github.com/nikitamikhaylov" target="_blank" rel="noopener noreferrer">尼基塔<!-- -->*<!-- -->米哈伊洛夫</a>)</li><li>允许使用CRLF作为CSV输出格式的行分隔符与设置 <code>output_format_csv_crlf_end_of_line</code> 设置为1 <a href="https://github.com/ClickHouse/ClickHouse/pull/8934" target="_blank" rel="noopener noreferrer">#8934</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/8935" target="_blank" rel="noopener noreferrer">#8935</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/8963" target="_blank" rel="noopener noreferrer">#8963</a> (<a href="https://github.com/millb" target="_blank" rel="noopener noreferrer">米哈伊尔<!-- -->*<!-- -->科罗托夫</a>)</li><li>实现的更多功能 <a href="https://github.com/uber/h3" target="_blank" rel="noopener noreferrer">H3</a> API: <code>h3GetBaseCell</code>, <code>h3HexAreaM2</code>, <code>h3IndexesAreNeighbors</code>, <code>h3ToChildren</code>, <code>h3ToString</code> 和 <code>stringToH3</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/8938" target="_blank" rel="noopener noreferrer">#8938</a> (<a href="https://github.com/nmandery" target="_blank" rel="noopener noreferrer">Nico Mandery</a>)</li><li>引入新设置: <code>max_parser_depth</code> 控制最大堆栈大小并允许大型复杂查询。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/6681" target="_blank" rel="noopener noreferrer">#6681</a> 和 <a href="https://github.com/ClickHouse/ClickHouse/issues/7668" target="_blank" rel="noopener noreferrer">#7668</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8647" target="_blank" rel="noopener noreferrer">#8647</a> (<a href="https://github.com/qMBQx8GH" target="_blank" rel="noopener noreferrer">马克西姆<!-- -->*<!-- -->斯米尔诺夫</a>)</li><li>添加设置 <code>force_optimize_skip_unused_shards</code> 如果无法跳过未使用的分片，则设置为抛出 <a href="https://github.com/ClickHouse/ClickHouse/pull/8805" target="_blank" rel="noopener noreferrer">#8805</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>允许配置多个磁盘/卷用于存储数据发送 <code>Distributed</code> 发动机 <a href="https://github.com/ClickHouse/ClickHouse/pull/8756" target="_blank" rel="noopener noreferrer">#8756</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>支持存储策略 (<code>&lt;tmp_policy&gt;</code>）用于存储临时数据。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8750" target="_blank" rel="noopener noreferrer">#8750</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>已添加 <code>X-ClickHouse-Exception-Code</code> 如果在发送数据之前引发异常，则设置的HTTP头。 这实现了 <a href="https://github.com/ClickHouse/ClickHouse/issues/4971" target="_blank" rel="noopener noreferrer">#4971</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8786" target="_blank" rel="noopener noreferrer">#8786</a> (<a href="https://github.com/millb" target="_blank" rel="noopener noreferrer">米哈伊尔<!-- -->*<!-- -->科罗托夫</a>)</li><li>添加功能 <code>ifNotFinite</code>. 这只是一个句法糖: <code>ifNotFinite(x, y) = isFinite(x) ? x : y</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8710" target="_blank" rel="noopener noreferrer">#8710</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>已添加 <code>last_successful_update_time</code> 列中 <code>system.dictionaries</code> 表 <a href="https://github.com/ClickHouse/ClickHouse/pull/9394" target="_blank" rel="noopener noreferrer">#9394</a> (<a href="https://github.com/nikitamikhaylov" target="_blank" rel="noopener noreferrer">尼基塔<!-- -->*<!-- -->米哈伊洛夫</a>)</li><li>添加 <code>blockSerializedSize</code> 功能（磁盘大小不压缩) <a href="https://github.com/ClickHouse/ClickHouse/pull/8952" target="_blank" rel="noopener noreferrer">#8952</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>添加功能 <code>moduloOrZero</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/9358" target="_blank" rel="noopener noreferrer">#9358</a> (<a href="https://github.com/hczhcz" target="_blank" rel="noopener noreferrer">hcz</a>)</li><li>添加系统表 <code>system.zeros</code> 和 <code>system.zeros_mt</code> 以及故事功能 <code>zeros()</code> 和 <code>zeros_mt()</code>. 表（和表函数）包含具有名称的单列 <code>zero</code> 和类型 <code>UInt8</code>. 此列包含零。 为了测试目的，需要它作为生成许多行的最快方法。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/6604" target="_blank" rel="noopener noreferrer">#6604</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/9593" target="_blank" rel="noopener noreferrer">#9593</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="experimental-feature">实验特点<a class="hash-link" href="#experimental-feature" title="Direct link to heading">​</a></h4><ul><li>添加新的紧凑格式的部件 <code>MergeTree</code>-家庭表中的所有列都存储在一个文件中。 它有助于提高小型和频繁插入的性能。 旧的格式（每列一个文件）现在被称为wide。 数据存储格式由设置控制 <code>min_bytes_for_wide_part</code> 和 <code>min_rows_for_wide_part</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8290" target="_blank" rel="noopener noreferrer">#8290</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">安东<!-- -->*<!-- -->波波夫</a>)</li><li>支持S3存储 <code>Log</code>, <code>TinyLog</code> 和 <code>StripeLog</code> 桌子 <a href="https://github.com/ClickHouse/ClickHouse/pull/8862" target="_blank" rel="noopener noreferrer">#8862</a> (<a href="https://github.com/Jokser" target="_blank" rel="noopener noreferrer">帕维尔<!-- -->*<!-- -->科瓦连科</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-2">错误修复<a class="hash-link" href="#bug-fix-2" title="Direct link to heading">​</a></h4><ul><li>修正了日志消息中不一致的空格。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9322" target="_blank" rel="noopener noreferrer">#9322</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>修复在创建表时将未命名元组数组展平为嵌套结构的错误。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8866" target="_blank" rel="noopener noreferrer">#8866</a> (<a href="https://github.com/achulkov2" target="_blank" rel="noopener noreferrer">achulkov2</a>)</li><li>修复了以下问题 “Too many open files” 如果有太多的文件匹配glob模式可能会发生错误 <code>File</code> 表或 <code>file</code> 表功能。 现在文件懒洋洋地打开。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8857" target="_blank" rel="noopener noreferrer">#8857</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/8861" target="_blank" rel="noopener noreferrer">#8861</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>删除临时表现在只删除临时表。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8907" target="_blank" rel="noopener noreferrer">#8907</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">维塔利<!-- -->*<!-- -->巴拉诺夫</a>)</li><li>当我们关闭服务器或分离/附加表时删除过时的分区。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8602" target="_blank" rel="noopener noreferrer">#8602</a> (<a href="https://github.com/YiuRULE" target="_blank" rel="noopener noreferrer">纪尧姆<!-- -->*<!-- -->塔瑟里</a>)</li><li>默认磁盘如何计算可用空间 <code>data</code> 子目录。 修复了可用空间量计算不正确的问题，如果 <code>data</code> 目录被安装到一个单独的设备（罕见的情况）。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/7441" target="_blank" rel="noopener noreferrer">#7441</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/9257" target="_blank" rel="noopener noreferrer">#9257</a> (<a href="https://github.com/millb" target="_blank" rel="noopener noreferrer">米哈伊尔<!-- -->*<!-- -->科罗托夫</a>)</li><li>允许逗号（交叉）与IN（）内部连接。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9251" target="_blank" rel="noopener noreferrer">#9251</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>如果在WHERE部分中有<!-- -->[<!-- -->NOT<!-- -->]<!-- -->LIKE运算符，则允许将CROSS重写为INNER JOIN。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9229" target="_blank" rel="noopener noreferrer">#9229</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>修复后可能不正确的结果 <code>GROUP BY</code> 启用设置 <code>distributed_aggregation_memory_efficient</code>. 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9134" target="_blank" rel="noopener noreferrer">#9134</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9289" target="_blank" rel="noopener noreferrer">#9289</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li><li>找到的键在缓存字典的指标中被计为错过。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9411" target="_blank" rel="noopener noreferrer">#9411</a> (<a href="https://github.com/nikitamikhaylov" target="_blank" rel="noopener noreferrer">尼基塔<!-- -->*<!-- -->米哈伊洛夫</a>)</li><li>修复引入的复制协议不兼容 <a href="https://github.com/ClickHouse/ClickHouse/issues/8598" target="_blank" rel="noopener noreferrer">#8598</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9412" target="_blank" rel="noopener noreferrer">#9412</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>在固定的竞争条件 <code>queue_task_handle</code> 在启动 <code>ReplicatedMergeTree</code> 桌子 <a href="https://github.com/ClickHouse/ClickHouse/pull/9552" target="_blank" rel="noopener noreferrer">#9552</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>令牌 <code>NOT</code> 没有工作 <code>SHOW TABLES NOT LIKE</code> 查询 <a href="https://github.com/ClickHouse/ClickHouse/issues/8727" target="_blank" rel="noopener noreferrer">#8727</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/8940" target="_blank" rel="noopener noreferrer">#8940</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>添加范围检查功能 <code>h3EdgeLengthM</code>. 如果没有这个检查，缓冲区溢出是可能的。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8945" target="_blank" rel="noopener noreferrer">#8945</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>修复了多个参数（超过10）的三元逻辑运算批量计算中的错误。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8718" target="_blank" rel="noopener noreferrer">#8718</a> (<a href="https://github.com/Akazz" target="_blank" rel="noopener noreferrer">亚历山大<!-- -->*<!-- -->卡扎科夫</a>)</li><li>修复PREWHERE优化的错误，这可能导致段错误或 <code>Inconsistent number of columns got from MergeTreeRangeReader</code> 例外。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9024" target="_blank" rel="noopener noreferrer">#9024</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">安东<!-- -->*<!-- -->波波夫</a>)</li><li>修复意外 <code>Timeout exceeded while reading from socket</code> 异常，在实际超时之前以及启用查询探查器时，在安全连接上随机发生。 还添加 <code>connect_timeout_with_failover_secure_ms</code> 设置（默认100ms），这是类似于 <code>connect_timeout_with_failover_ms</code>，但用于安全连接（因为SSL握手比普通TCP连接慢) <a href="https://github.com/ClickHouse/ClickHouse/pull/9026" target="_blank" rel="noopener noreferrer">#9026</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>修复突变最终确定的错误，当突变可能处于以下状态时 <code>parts_to_do=0</code> 和 <code>is_done=0</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9022" target="_blank" rel="noopener noreferrer">#9022</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>使用新的任何连接逻辑 <code>partial_merge_join</code> 设置。 有可能使 <code>ANY|ALL|SEMI LEFT</code> 和 <code>ALL INNER</code> 加入与 <code>partial_merge_join=1</code> 现在 <a href="https://github.com/ClickHouse/ClickHouse/pull/8932" target="_blank" rel="noopener noreferrer">#8932</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>Shard现在将从发起者获得的设置夹到shard的constaints，而不是抛出异常。 此修补程序允许将查询发送到具有另一个约束的分片。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9447" target="_blank" rel="noopener noreferrer">#9447</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">维塔利<!-- -->*<!-- -->巴拉诺夫</a>)</li><li>修正了内存管理问题 <code>MergeTreeReadPool</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8791" target="_blank" rel="noopener noreferrer">#8791</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>修复 <code>toDecimal*OrNull()</code> 使用字符串调用时的函数系列 <code>e</code>. 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8312" target="_blank" rel="noopener noreferrer">#8312</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/8764" target="_blank" rel="noopener noreferrer">#8764</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>请确保 <code>FORMAT Null</code> 不向客户端发送数据。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8767" target="_blank" rel="noopener noreferrer">#8767</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">Alexander Kuzmenkov</a>)</li><li>修复时间戳中的错误 <code>LiveViewBlockInputStream</code> 不会更新。 <code>LIVE VIEW</code> 是一个实验特征。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8644" target="_blank" rel="noopener noreferrer">#8644</a> (<a href="https://github.com/Vxider" target="_blank" rel="noopener noreferrer">vxider</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/8625" target="_blank" rel="noopener noreferrer">#8625</a> (<a href="https://github.com/Vxider" target="_blank" rel="noopener noreferrer">vxider</a>)</li><li>固定 <code>ALTER MODIFY TTL</code> 不允许删除旧ttl表达式的错误行为。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8422" target="_blank" rel="noopener noreferrer">#8422</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>修复了MergeTreeIndexSet中的UBSan报告。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9250" target="_blank" rel="noopener noreferrer">#9250</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/9365" target="_blank" rel="noopener noreferrer">#9365</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>固定的行为 <code>match</code> 和 <code>extract</code> 当干草堆有零字节的函数。 当干草堆不变时，这种行为是错误的。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9160" target="_blank" rel="noopener noreferrer">#9160</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/9163" target="_blank" rel="noopener noreferrer">#9163</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/9345" target="_blank" rel="noopener noreferrer">#9345</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>避免从apache Avro第三方库中的析构函数抛出。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9066" target="_blank" rel="noopener noreferrer">#9066</a> (<a href="https://github.com/oandrew" target="_blank" rel="noopener noreferrer">安德鲁Onyshchuk</a>)</li><li>不要提交从轮询的批次 <code>Kafka</code> 部分，因为它可能会导致数据漏洞。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8876" target="_blank" rel="noopener noreferrer">#8876</a> (<a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">filimonov</a>)</li><li>修复 <code>joinGet</code> 使用可为空的返回类型。 <a href="https://github.com/ClickHouse/ClickHouse/issues/8919" target="_blank" rel="noopener noreferrer">https://github.com/ClickHouse/ClickHouse/issues/8919</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/9014" target="_blank" rel="noopener noreferrer">#9014</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">阿莫斯鸟</a>)</li><li>修复压缩时的数据不兼容 <code>T64</code> 编解ec <a href="https://github.com/ClickHouse/ClickHouse/pull/9016" target="_blank" rel="noopener noreferrer">#9016</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>）修复数据类型id <code>T64</code> 在受影响的版本中导致错误(de)压缩的压缩编解ec。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9033" target="_blank" rel="noopener noreferrer">#9033</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>添加设置 <code>enable_early_constant_folding</code> 并禁用它在某些情况下，导致错误。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9010" target="_blank" rel="noopener noreferrer">#9010</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>使用VIEW修复下推谓词优化器并启用测试 <a href="https://github.com/ClickHouse/ClickHouse/pull/9011" target="_blank" rel="noopener noreferrer">#9011</a> (<a href="https://github.com/zhang2014" target="_blank" rel="noopener noreferrer">张冬</a>)</li><li>修复段错误 <code>Merge</code> 表，从读取时可能发生 <code>File</code> 储存 <a href="https://github.com/ClickHouse/ClickHouse/pull/9387" target="_blank" rel="noopener noreferrer">#9387</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>添加了对存储策略的检查 <code>ATTACH PARTITION FROM</code>, <code>REPLACE PARTITION</code>, <code>MOVE TO TABLE</code>. 否则，它可以使部分数据重新启动后无法访问，并阻止ClickHouse启动。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9383" target="_blank" rel="noopener noreferrer">#9383</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>修复改变，如果有TTL设置表。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8800" target="_blank" rel="noopener noreferrer">#8800</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">安东<!-- -->*<!-- -->波波夫</a>)</li><li>修复在以下情况下可能发生的竞争条件 <code>SYSTEM RELOAD ALL DICTIONARIES</code> 在某些字典被修改/添加/删除时执行。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8801" target="_blank" rel="noopener noreferrer">#8801</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">维塔利<!-- -->*<!-- -->巴拉诺夫</a>)</li><li>在以前的版本 <code>Memory</code> 数据库引擎使用空数据路径，因此在以下位置创建表 <code>path</code> directory (e.g. <code>/var/lib/clickhouse/</code>), not in data directory of database (e.g. <code>/var/lib/clickhouse/db_name</code>). <a href="https://github.com/ClickHouse/ClickHouse/pull/8753" target="_blank" rel="noopener noreferrer">#8753</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>修复了关于缺少默认磁盘或策略的错误日志消息。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9530" target="_blank" rel="noopener noreferrer">#9530</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>修复数组类型的bloom_filter索引的not(has())。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9407" target="_blank" rel="noopener noreferrer">#9407</a> (<a href="https://github.com/achimbab" target="_blank" rel="noopener noreferrer">achimbab</a>)</li><li>允许表中的第一列 <code>Log</code> 引擎是别名 <a href="https://github.com/ClickHouse/ClickHouse/pull/9231" target="_blank" rel="noopener noreferrer">#9231</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">伊万</a>)</li><li>从读取时修复范围的顺序 <code>MergeTree</code> 表中的一个线程。 它可能会导致例外 <code>MergeTreeRangeReader</code> 或错误的查询结果。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9050" target="_blank" rel="noopener noreferrer">#9050</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">安东<!-- -->*<!-- -->波波夫</a>)</li><li>赂眉露<!-- -->&gt;<!-- -->&gt;<!-- --> <code>reinterpretAsFixedString</code> 返回 <code>FixedString</code> 而不是 <code>String</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9052" target="_blank" rel="noopener noreferrer">#9052</a> (<a href="https://github.com/oandrew" target="_blank" rel="noopener noreferrer">安德鲁Onyshchuk</a>)</li><li>避免极少数情况下，当用户可以得到错误的错误消息 (<code>Success</code> 而不是详细的错误描述）。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9457" target="_blank" rel="noopener noreferrer">#9457</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>使用时不要崩溃 <code>Template</code> 使用空行模板格式化。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8785" target="_blank" rel="noopener noreferrer">#8785</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">Alexander Kuzmenkov</a>)</li><li>系统表的元数据文件可能在错误的位置创建 <a href="https://github.com/ClickHouse/ClickHouse/pull/8653" target="_blank" rel="noopener noreferrer">#8653</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>）修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8581" target="_blank" rel="noopener noreferrer">#8581</a>.</li><li>修复缓存字典中exception_ptr上的数据竞赛 <a href="https://github.com/ClickHouse/ClickHouse/issues/8303" target="_blank" rel="noopener noreferrer">#8303</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9379" target="_blank" rel="noopener noreferrer">#9379</a> (<a href="https://github.com/nikitamikhaylov" target="_blank" rel="noopener noreferrer">尼基塔<!-- -->*<!-- -->米哈伊洛夫</a>)</li><li>不要为查询引发异常 <code>ATTACH TABLE IF NOT EXISTS</code>. 以前它是抛出，如果表已经存在，尽管 <code>IF NOT EXISTS</code> 条款 <a href="https://github.com/ClickHouse/ClickHouse/pull/8967" target="_blank" rel="noopener noreferrer">#8967</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">安东<!-- -->*<!-- -->波波夫</a>)</li><li>修复了异常消息中丢失的关闭paren。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8811" target="_blank" rel="noopener noreferrer">#8811</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>避免消息 <code>Possible deadlock avoided</code> 在clickhouse客户端在交互模式下启动。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9455" target="_blank" rel="noopener noreferrer">#9455</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>修复了base64编码值末尾填充格式错误的问题。 更新base64库。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9491" target="_blank" rel="noopener noreferrer">#9491</a>，关闭 <a href="https://github.com/ClickHouse/ClickHouse/issues/9492" target="_blank" rel="noopener noreferrer">#9492</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/9500" target="_blank" rel="noopener noreferrer">#9500</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>防止丢失数据 <code>Kafka</code> 在极少数情况下，在读取后缀之后但在提交之前发生异常。 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9378" target="_blank" rel="noopener noreferrer">#9378</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/9507" target="_blank" rel="noopener noreferrer">#9507</a> (<a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">filimonov</a>)</li><li>在固定的异常 <code>DROP TABLE IF EXISTS</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/8663" target="_blank" rel="noopener noreferrer">#8663</a> (<a href="https://github.com/nikvas0" target="_blank" rel="noopener noreferrer">尼基塔<!-- -->*<!-- -->瓦西列夫</a>)</li><li>修复当用户尝试崩溃 <code>ALTER MODIFY SETTING</code> 对于老格式化 <code>MergeTree</code> 表引擎家族. <a href="https://github.com/ClickHouse/ClickHouse/pull/9435" target="_blank" rel="noopener noreferrer">#9435</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>支持在JSON相关函数中不适合Int64的UInt64号码。 更新SIMDJSON掌握。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9209" target="_blank" rel="noopener noreferrer">#9209</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/9344" target="_blank" rel="noopener noreferrer">#9344</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>当使用非严格单调函数索引时，固定执行反转谓词。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9223" target="_blank" rel="noopener noreferrer">#9223</a> (<a href="https://github.com/Akazz" target="_blank" rel="noopener noreferrer">亚历山大<!-- -->*<!-- -->卡扎科夫</a>)</li><li>不要试图折叠 <code>IN</code> 常量在 <code>GROUP BY</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/8868" target="_blank" rel="noopener noreferrer">#8868</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">阿莫斯鸟</a>)</li><li>修复bug <code>ALTER DELETE</code> 突变导致索引损坏。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9019" target="_blank" rel="noopener noreferrer">#9019</a> 和 <a href="https://github.com/ClickHouse/ClickHouse/issues/8982" target="_blank" rel="noopener noreferrer">#8982</a>. 另外修复极其罕见的竞争条件 <code>ReplicatedMergeTree</code> <code>ALTER</code> 查询。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9048" target="_blank" rel="noopener noreferrer">#9048</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>当设置 <code>compile_expressions</code> 被启用，你可以得到 <code>unexpected column</code> 在 <code>LLVMExecutableFunction</code> 当我们使用 <code>Nullable</code> 类型 <a href="https://github.com/ClickHouse/ClickHouse/pull/8910" target="_blank" rel="noopener noreferrer">#8910</a> (<a href="https://github.com/YiuRULE" target="_blank" rel="noopener noreferrer">纪尧姆<!-- -->*<!-- -->塔瑟里</a>)</li><li>多个修复 <code>Kafka</code> 引擎：1）修复在消费者组重新平衡期间出现的重复项。 2)修复罕见 ‘holes’ 当数据从一个轮询的几个分区轮询并部分提交时出现（现在我们总是处理/提交整个轮询的消息块）。 3）通过块大小修复刷新（在此之前，只有超时刷新才能正常工作）。 4）更好的订阅程序（与分配反馈）。 5）使测试工作得更快（默认时间间隔和超时）。 由于数据之前没有被块大小刷新（根据文档），pr可能会导致默认设置的性能下降（由于更频繁和更小的刷新不太理想）。 如果您在更改后遇到性能问题-请增加 <code>kafka_max_block_size</code> 在表中的更大的值（例如 <code>CREATE TABLE ...Engine=Kafka ... SETTINGS ... kafka_max_block_size=524288</code>). 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/7259" target="_blank" rel="noopener noreferrer">#7259</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/8917" target="_blank" rel="noopener noreferrer">#8917</a> (<a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">filimonov</a>)</li><li>修复 <code>Parameter out of bound</code> 在PREWHERE优化之后的某些查询中出现异常。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8914" target="_blank" rel="noopener noreferrer">#8914</a> (<a href="https://github.com/bgiard" target="_blank" rel="noopener noreferrer">Baudouin Giard</a>)</li><li>修正了函数参数混合常量的情况 <code>arrayZip</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8705" target="_blank" rel="noopener noreferrer">#8705</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>执行时 <code>CREATE</code> 查询，在存储引擎参数中折叠常量表达式。 将空数据库名称替换为当前数据库。 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/6508" target="_blank" rel="noopener noreferrer">#6508</a>, <a href="https://github.com/ClickHouse/ClickHouse/issues/3492" target="_blank" rel="noopener noreferrer">#3492</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/9262" target="_blank" rel="noopener noreferrer">#9262</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>现在不可能创建或添加具有简单循环别名的列，如 <code>a DEFAULT b, b DEFAULT a</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9603" target="_blank" rel="noopener noreferrer">#9603</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>修正了双重移动可能会损坏原始部分的错误。 这是相关的，如果你使用 <code>ALTER TABLE MOVE</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/8680" target="_blank" rel="noopener noreferrer">#8680</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>允许 <code>interval</code> 用于正确解析的标识符，而无需反引号。 当一个查询不能被执行，即使固定的问题 <code>interval</code> 标识符用反引号或双引号括起来。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9124" target="_blank" rel="noopener noreferrer">#9124</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9142" target="_blank" rel="noopener noreferrer">#9142</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>修正了模糊测试和不正确的行为 <code>bitTestAll</code>/<code>bitTestAny</code> 功能。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9143" target="_blank" rel="noopener noreferrer">#9143</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>修复可能的崩溃/错误的行数 <code>LIMIT n WITH TIES</code> 当有很多行等于第n行时。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9464" target="_blank" rel="noopener noreferrer">#9464</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>使用enabled编写的部件修复突变 <code>insert_quorum</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9463" target="_blank" rel="noopener noreferrer">#9463</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>修复数据竞赛破坏 <code>Poco::HTTPServer</code>. 当服务器启动并立即关闭时，可能会发生这种情况。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9468" target="_blank" rel="noopener noreferrer">#9468</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">安东<!-- -->*<!-- -->波波夫</a>)</li><li>修复运行时显示误导性错误消息的错误 <code>SHOW CREATE TABLE a_table_that_does_not_exist</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8899" target="_blank" rel="noopener noreferrer">#8899</a> (<a href="https://github.com/achulkov2" target="_blank" rel="noopener noreferrer">achulkov2</a>)</li><li>固定 <code>Parameters are out of bound</code> 例外在一些罕见的情况下，当我们在一个常数 <code>SELECT</code> 条款时，我们有一个 <code>ORDER BY</code> 和一个 <code>LIMIT</code> 条款 <a href="https://github.com/ClickHouse/ClickHouse/pull/8892" target="_blank" rel="noopener noreferrer">#8892</a> (<a href="https://github.com/YiuRULE" target="_blank" rel="noopener noreferrer">纪尧姆<!-- -->*<!-- -->塔瑟里</a>)</li><li>修复突变定稿，当已经完成突变可以有状态 <code>is_done=0</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9217" target="_blank" rel="noopener noreferrer">#9217</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>防止执行 <code>ALTER ADD INDEX</code> 对于旧语法的MergeTree表，因为它不起作用。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8822" target="_blank" rel="noopener noreferrer">#8822</a> (<a href="https://github.com/millb" target="_blank" rel="noopener noreferrer">米哈伊尔<!-- -->*<!-- -->科罗托夫</a>)</li><li>在服务器启动时不要访问表，这 <code>LIVE VIEW</code> 取决于，所以服务器将能够启动。 也删除 <code>LIVE VIEW</code> 分离时的依赖关系 <code>LIVE VIEW</code>. <code>LIVE VIEW</code> 是一个实验特征。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8824" target="_blank" rel="noopener noreferrer">#8824</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>修复可能的段错误 <code>MergeTreeRangeReader</code>，同时执行 <code>PREWHERE</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9106" target="_blank" rel="noopener noreferrer">#9106</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">安东<!-- -->*<!-- -->波波夫</a>)</li><li>修复与列Ttl可能不匹配的校验和。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9451" target="_blank" rel="noopener noreferrer">#9451</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">安东<!-- -->*<!-- -->波波夫</a>)</li><li>修正了一个错误，当部分没有被移动的情况下，只有一个卷的TTL规则在后台。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8672" target="_blank" rel="noopener noreferrer">#8672</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>修正了这个问题 <code>Method createColumn() is not implemented for data type Set</code>. 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/7799" target="_blank" rel="noopener noreferrer">#7799</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8674" target="_blank" rel="noopener noreferrer">#8674</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>现在我们将尝试更频繁地完成突变。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9427" target="_blank" rel="noopener noreferrer">#9427</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>修复 <code>intDiv</code> 减一个常数 <a href="https://github.com/ClickHouse/ClickHouse/pull/9351" target="_blank" rel="noopener noreferrer">#9351</a> (<a href="https://github.com/hczhcz" target="_blank" rel="noopener noreferrer">hcz</a>)</li><li>修复可能的竞争条件 <code>BlockIO</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9356" target="_blank" rel="noopener noreferrer">#9356</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li><li>修复尝试使用/删除时导致服务器终止的错误 <code>Kafka</code> 使用错误的参数创建的表。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9513" target="_blank" rel="noopener noreferrer">#9513</a> (<a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">filimonov</a>)</li><li>增加了解决方法，如果操作系统返回错误的结果 <code>timer_create</code> 功能。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8837" target="_blank" rel="noopener noreferrer">#8837</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>在使用固定错误 <code>min_marks_for_seek</code> 参数。 修复了分布式表中没有分片键时的错误消息，并且我们尝试跳过未使用的分片。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8908" target="_blank" rel="noopener noreferrer">#8908</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="improvement">改进<a class="hash-link" href="#improvement" title="Direct link to heading">​</a></h4><ul><li>执行 <code>ALTER MODIFY/DROP</code> 对突变的顶部查询 <code>ReplicatedMergeTree*</code> 引擎家族. 现在 <code>ALTERS</code> 仅在元数据更新阶段阻止，之后不阻止。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8701" target="_blank" rel="noopener noreferrer">#8701</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>添加重写交叉到内部连接的能力 <code>WHERE</code> 包含未编译名称的部分。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9512" target="_blank" rel="noopener noreferrer">#9512</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>赂眉露<!-- -->&gt;<!-- -->&gt;<!-- --> <code>SHOW TABLES</code> 和 <code>SHOW DATABASES</code> 查询支持 <code>WHERE</code> 表达式和 <code>FROM</code>/<code>IN</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/9076" target="_blank" rel="noopener noreferrer">#9076</a> (<a href="https://github.com/sundy-li" target="_blank" rel="noopener noreferrer">sundyli</a>)</li><li>添加了一个设置 <code>deduplicate_blocks_in_dependent_materialized_views</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9070" target="_blank" rel="noopener noreferrer">#9070</a> (<a href="https://github.com/urykhy" target="_blank" rel="noopener noreferrer">urykhy</a>)</li><li>在最近的变化之后，MySQL客户端开始以十六进制打印二进制字符串，从而使它们不可读 (<a href="https://github.com/ClickHouse/ClickHouse/issues/9032" target="_blank" rel="noopener noreferrer">#9032</a>). ClickHouse中的解决方法是将字符串列标记为UTF-8，这并不总是如此，但通常是这种情况。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9079" target="_blank" rel="noopener noreferrer">#9079</a> (<a href="https://github.com/yurriy" target="_blank" rel="noopener noreferrer">尤里<!-- -->*<!-- -->巴拉诺夫</a>)</li><li>添加对字符串和FixedString键的支持 <code>sumMap</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/8903" target="_blank" rel="noopener noreferrer">#8903</a> (<a href="https://github.com/bgiard" target="_blank" rel="noopener noreferrer">Baudouin Giard</a>)</li><li>支持SummingMergeTree地图中的字符串键 <a href="https://github.com/ClickHouse/ClickHouse/pull/8933" target="_blank" rel="noopener noreferrer">#8933</a> (<a href="https://github.com/bgiard" target="_blank" rel="noopener noreferrer">Baudouin Giard</a>)</li><li>即使线程已抛出异常，也向线程池发送线程终止信号 <a href="https://github.com/ClickHouse/ClickHouse/pull/8736" target="_blank" rel="noopener noreferrer">#8736</a> (<a href="https://github.com/dingxiangfei2009" target="_blank" rel="noopener noreferrer">丁香飞</a>)</li><li>允许设置 <code>query_id</code> 在 <code>clickhouse-benchmark</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/9416" target="_blank" rel="noopener noreferrer">#9416</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">安东<!-- -->*<!-- -->波波夫</a>)</li><li>不要让奇怪的表达 <code>ALTER TABLE ... PARTITION partition</code> 查询。 这个地址 <a href="https://github.com/ClickHouse/ClickHouse/issues/7192" target="_blank" rel="noopener noreferrer">#7192</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/8835" target="_blank" rel="noopener noreferrer">#8835</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>表 <code>system.table_engines</code> 现在提供有关功能支持的信息（如 <code>supports_ttl</code> 或 <code>supports_sort_order</code>). <a href="https://github.com/ClickHouse/ClickHouse/pull/8830" target="_blank" rel="noopener noreferrer">#8830</a> (<a href="https://github.com/zlobober" target="_blank" rel="noopener noreferrer">Max Akhmedov</a>)</li><li>启用 <code>system.metric_log</code> 默认情况下。 它将包含具有ProfileEvents值的行，CurrentMetrics收集与 “collect_interval_milliseconds” 间隔（默认情况下为一秒）。 该表非常小（通常以兆字节为单位），默认情况下收集此数据是合理的。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9225" target="_blank" rel="noopener noreferrer">#9225</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>Initialize query profiler for all threads in a group, e.g. it allows to fully profile insert-queries. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/6964" target="_blank" rel="noopener noreferrer">#6964</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/8874" target="_blank" rel="noopener noreferrer">#8874</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">伊万</a>)</li><li>现在是暂时的 <code>LIVE VIEW</code> 创建者 <code>CREATE LIVE VIEW name WITH TIMEOUT [42] ...</code> 而不是 <code>CREATE TEMPORARY LIVE VIEW ...</code>，因为以前的语法不符合 <code>CREATE TEMPORARY TABLE ...</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/9131" target="_blank" rel="noopener noreferrer">#9131</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>添加text_log。级别配置参数，以限制进入 <code>system.text_log</code> 表 <a href="https://github.com/ClickHouse/ClickHouse/pull/8809" target="_blank" rel="noopener noreferrer">#8809</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>允许根据TTL规则将下载的部分放入磁盘/卷 <a href="https://github.com/ClickHouse/ClickHouse/pull/8598" target="_blank" rel="noopener noreferrer">#8598</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>对于外部MySQL字典，允许将MySQL连接池共同化为 “share” 他们在字典中。 此选项显着减少到MySQL服务器的连接数。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9409" target="_blank" rel="noopener noreferrer">#9409</a> (<a href="https://github.com/clemrodriguez" target="_blank" rel="noopener noreferrer">Clément Rodriguez</a>)</li><li>显示分位数的最近查询执行时间 <code>clickhouse-benchmark</code> 输出而不是插值值。 最好显示与某些查询的执行时间相对应的值。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8712" target="_blank" rel="noopener noreferrer">#8712</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>可以在将数据插入到Kafka时为消息添加密钥和时间戳。 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/7198" target="_blank" rel="noopener noreferrer">#7198</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/8969" target="_blank" rel="noopener noreferrer">#8969</a> (<a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">filimonov</a>)</li><li>如果服务器从终端运行，请按颜色突出显示线程号，查询id和日志优先级。 这是为了提高开发人员相关日志消息的可读性。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8961" target="_blank" rel="noopener noreferrer">#8961</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>更好的异常消息，同时加载表 <code>Ordinary</code> 数据库。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9527" target="_blank" rel="noopener noreferrer">#9527</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>执行 <code>arraySlice</code> 对于具有聚合函数状态的数组。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9388" target="_blank" rel="noopener noreferrer">#9388</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/9391" target="_blank" rel="noopener noreferrer">#9391</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>允许在in运算符的右侧使用常量函数和常量数组。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8813" target="_blank" rel="noopener noreferrer">#8813</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">安东<!-- -->*<!-- -->波波夫</a>)</li><li>如果在获取系统数据时发生了zookeeper异常。副本，将其显示在单独的列中。 这实现了 <a href="https://github.com/ClickHouse/ClickHouse/issues/9137" target="_blank" rel="noopener noreferrer">#9137</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/9138" target="_blank" rel="noopener noreferrer">#9138</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>原子删除destroy上的MergeTree数据部分。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8402" target="_blank" rel="noopener noreferrer">#8402</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>支持分布式表的行级安全性。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8926" target="_blank" rel="noopener noreferrer">#8926</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">伊万</a>)</li><li>Now we recognize suffix (like KB, KiB…) in settings values. <a href="https://github.com/ClickHouse/ClickHouse/pull/8072" target="_blank" rel="noopener noreferrer">#8072</a> (<a href="https://github.com/millb" target="_blank" rel="noopener noreferrer">米哈伊尔<!-- -->*<!-- -->科罗托夫</a>)</li><li>在构建大型连接的结果时防止内存不足。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8637" target="_blank" rel="noopener noreferrer">#8637</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>在交互模式下为建议添加群集名称 <code>clickhouse-client</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8709" target="_blank" rel="noopener noreferrer">#8709</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>Initialize query profiler for all threads in a group, e.g. it allows to fully profile insert-queries <a href="https://github.com/ClickHouse/ClickHouse/pull/8820" target="_blank" rel="noopener noreferrer">#8820</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">伊万</a>)</li><li>添加列 <code>exception_code</code> 在 <code>system.query_log</code> 桌子 <a href="https://github.com/ClickHouse/ClickHouse/pull/8770" target="_blank" rel="noopener noreferrer">#8770</a> (<a href="https://github.com/millb" target="_blank" rel="noopener noreferrer">米哈伊尔<!-- -->*<!-- -->科罗托夫</a>)</li><li>在端口上启用MySQL兼容服务器 <code>9004</code> 在默认服务器配置文件中。 在配置的例子固定密码生成命令。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8771" target="_blank" rel="noopener noreferrer">#8771</a> (<a href="https://github.com/yurriy" target="_blank" rel="noopener noreferrer">尤里<!-- -->*<!-- -->巴拉诺夫</a>)</li><li>如果文件系统是只读的，请防止在关闭时中止。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9094" target="_blank" rel="noopener noreferrer">#9094</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/9100" target="_blank" rel="noopener noreferrer">#9100</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>当HTTP POST查询中需要长度时，更好的异常消息。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9453" target="_blank" rel="noopener noreferrer">#9453</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>添加 <code>_path</code> 和 <code>_file</code> 虚拟列 <code>HDFS</code> 和 <code>File</code> 发动机和 <code>hdfs</code> 和 <code>file</code> 表函数 <a href="https://github.com/ClickHouse/ClickHouse/pull/8489" target="_blank" rel="noopener noreferrer">#8489</a> (<a href="https://github.com/stavrolia" target="_blank" rel="noopener noreferrer">Olga Khvostikova</a>)</li><li>修复错误 <code>Cannot find column</code> 同时插入到 <code>MATERIALIZED VIEW</code> 在情况下，如果新列被添加到视图的内部表。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8766" target="_blank" rel="noopener noreferrer">#8766</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/8788" target="_blank" rel="noopener noreferrer">#8788</a> (<a href="https://github.com/vzakaznikov" target="_blank" rel="noopener noreferrer">vzakaznikov</a>) <a href="https://github.com/ClickHouse/ClickHouse/issues/8788" target="_blank" rel="noopener noreferrer">#8788</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/8806" target="_blank" rel="noopener noreferrer">#8806</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/8803" target="_blank" rel="noopener noreferrer">#8803</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li><li>通过最终更新后发送进度（如日志）修复本机客户端-服务器协议的进度。 这可能仅与使用本机协议的某些第三方工具相关。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9495" target="_blank" rel="noopener noreferrer">#9495</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>添加系统指标跟踪使用MySQL协议的客户端连接数 (<a href="https://github.com/ClickHouse/ClickHouse/issues/9013" target="_blank" rel="noopener noreferrer">#9013</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/9015" target="_blank" rel="noopener noreferrer">#9015</a> (<a href="https://github.com/Slach" target="_blank" rel="noopener noreferrer">尤金<!-- -->*<!-- -->克里莫夫</a>)</li><li>从现在开始，HTTP响应将有 <code>X-ClickHouse-Timezone</code> 标题设置为相同的时区值 <code>SELECT timezone()</code> 会报告。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9493" target="_blank" rel="noopener noreferrer">#9493</a> (<a href="https://github.com/traceon" target="_blank" rel="noopener noreferrer">Denis Glazachev</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="performance-improvement">性能改进<a class="hash-link" href="#performance-improvement" title="Direct link to heading">​</a></h4><ul><li>使用IN提高分析指标的性能 <a href="https://github.com/ClickHouse/ClickHouse/pull/9261" target="_blank" rel="noopener noreferrer">#9261</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">安东<!-- -->*<!-- -->波波夫</a>)</li><li>逻辑函数+代码清理更简单，更有效的代码。 跟进到 <a href="https://github.com/ClickHouse/ClickHouse/issues/8718" target="_blank" rel="noopener noreferrer">#8718</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/8728" target="_blank" rel="noopener noreferrer">#8728</a> (<a href="https://github.com/Akazz" target="_blank" rel="noopener noreferrer">亚历山大<!-- -->*<!-- -->卡扎科夫</a>)</li><li>整体性能改善（范围为5％。.通过确保使用C++20功能进行更严格的别名处理，对于受影响的查询来说，这是200％）。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9304" target="_blank" rel="noopener noreferrer">#9304</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">阿莫斯鸟</a>)</li><li>比较函数的内部循环更严格的别名。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9327" target="_blank" rel="noopener noreferrer">#9327</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>对于算术函数的内部循环更严格的别名。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9325" target="_blank" rel="noopener noreferrer">#9325</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>ColumnVector::replicate()的实现速度快约3倍，通过该实现ColumnConst::convertToFullColumn()。 在实现常数时，也将在测试中有用。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9293" target="_blank" rel="noopener noreferrer">#9293</a> (<a href="https://github.com/Akazz" target="_blank" rel="noopener noreferrer">亚历山大<!-- -->*<!-- -->卡扎科夫</a>)</li><li>另一个小的性能改进 <code>ColumnVector::replicate()</code> （这加快了 <code>materialize</code> 函数和高阶函数），甚至进一步改进 <a href="https://github.com/ClickHouse/ClickHouse/issues/9293" target="_blank" rel="noopener noreferrer">#9293</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/9442" target="_blank" rel="noopener noreferrer">#9442</a> (<a href="https://github.com/Akazz" target="_blank" rel="noopener noreferrer">亚历山大<!-- -->*<!-- -->卡扎科夫</a>)</li><li>改进的性能 <code>stochasticLinearRegression</code> 聚合函数。 此补丁由英特尔贡献。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8652" target="_blank" rel="noopener noreferrer">#8652</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>提高性能 <code>reinterpretAsFixedString</code> 功能。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9342" target="_blank" rel="noopener noreferrer">#9342</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>不要向客户端发送块 <code>Null</code> 处理器管道中的格式。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8797" target="_blank" rel="noopener noreferrer">#8797</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/8767" target="_blank" rel="noopener noreferrer">#8767</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">Alexander Kuzmenkov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="buildtestingpackaging-improvement">构建/测试/包装改进<a class="hash-link" href="#buildtestingpackaging-improvement" title="Direct link to heading">​</a></h4><ul><li>异常处理现在可以在适用于Linux的Windows子系统上正常工作。 看<a href="https://github.com/ClickHouse-Extras/libunwind/pull/3" target="_blank" rel="noopener noreferrer">https://github.com/ClickHouse-Extras/libunwind/pull/3</a> 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/6480" target="_blank" rel="noopener noreferrer">#6480</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/9564" target="_blank" rel="noopener noreferrer">#9564</a> (<a href="https://github.com/sobolevsv" target="_blank" rel="noopener noreferrer">sobolevsv</a>)</li><li>替换 <code>readline</code> 与 <code>replxx</code> 对于在交互式线编辑 <code>clickhouse-client</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/8416" target="_blank" rel="noopener noreferrer">#8416</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">伊万</a>)</li><li>在FunctionsComparison中更好的构建时间和更少的模板实例化。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9324" target="_blank" rel="noopener noreferrer">#9324</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>增加了与集成 <code>clang-tidy</code> 在线人 另请参阅 <a href="https://github.com/ClickHouse/ClickHouse/issues/6044" target="_blank" rel="noopener noreferrer">#6044</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/9566" target="_blank" rel="noopener noreferrer">#9566</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>现在我们使用CI链接ClickHouse <code>lld</code> 即使是 <code>gcc</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9049" target="_blank" rel="noopener noreferrer">#9049</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>允许随机线程调度和插入毛刺时 <code>THREAD_FUZZER_*</code> 设置环境变量。 这有助于测试。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9459" target="_blank" rel="noopener noreferrer">#9459</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>在无状态测试中启用安全套接字 <a href="https://github.com/ClickHouse/ClickHouse/pull/9288" target="_blank" rel="noopener noreferrer">#9288</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>使SPLIT_SHARED_LIBRARIES=OFF更强大 <a href="https://github.com/ClickHouse/ClickHouse/pull/9156" target="_blank" rel="noopener noreferrer">#9156</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>赂眉露<!-- -->&gt;<!-- -->&gt;<!-- --> “performance_introspection_and_logging” 测试可靠的随机服务器卡住。 这可能发生在CI环境中。 另请参阅 <a href="https://github.com/ClickHouse/ClickHouse/issues/9515" target="_blank" rel="noopener noreferrer">#9515</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/9528" target="_blank" rel="noopener noreferrer">#9528</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>在样式检查中验证XML。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9550" target="_blank" rel="noopener noreferrer">#9550</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>修正了测试中的竞争条件 <code>00738_lock_for_inner_table</code>. 这个测试依赖于睡眠。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9555" target="_blank" rel="noopener noreferrer">#9555</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>删除类型的性能测试 <code>once</code>. 这是在统计比较模式下运行所有性能测试（更可靠）所需的。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9557" target="_blank" rel="noopener noreferrer">#9557</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>增加了算术函数的性能测试。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9326" target="_blank" rel="noopener noreferrer">#9326</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>增加了性能测试 <code>sumMap</code> 和 <code>sumMapWithOverflow</code> 聚合函数。 后续行动 <a href="https://github.com/ClickHouse/ClickHouse/issues/8933" target="_blank" rel="noopener noreferrer">#8933</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/8947" target="_blank" rel="noopener noreferrer">#8947</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>通过样式检查确保错误代码的样式。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9370" target="_blank" rel="noopener noreferrer">#9370</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>为测试历史添加脚本。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8796" target="_blank" rel="noopener noreferrer">#8796</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>添加GCC警告 <code>-Wsuggest-override</code> 找到并修复所有地方 <code>override</code> 必须使用关键字。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8760" target="_blank" rel="noopener noreferrer">#8760</a> (<a href="https://github.com/kreuzerkrieg" target="_blank" rel="noopener noreferrer">kreuzerkrieg</a>)</li><li>在Mac OS X下忽略弱符号，因为它必须被定义 <a href="https://github.com/ClickHouse/ClickHouse/pull/9538" target="_blank" rel="noopener noreferrer">#9538</a> (<a href="https://github.com/ghost" target="_blank" rel="noopener noreferrer">已删除用户</a>)</li><li>规范性能测试中某些查询的运行时间。 这是在准备在比较模式下运行所有性能测试时完成的。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9565" target="_blank" rel="noopener noreferrer">#9565</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>修复一些测试，以支持pytest与查询测试 <a href="https://github.com/ClickHouse/ClickHouse/pull/9062" target="_blank" rel="noopener noreferrer">#9062</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">伊万</a>)</li><li>使用MSan在生成中启用SSL，因此在运行无状态测试时，服务器不会在启动时失败 <a href="https://github.com/ClickHouse/ClickHouse/pull/9531" target="_blank" rel="noopener noreferrer">#9531</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>修复测试结果中的数据库替换 <a href="https://github.com/ClickHouse/ClickHouse/pull/9384" target="_blank" rel="noopener noreferrer">#9384</a> (<a href="https://github.com/qoega" target="_blank" rel="noopener noreferrer">Ilya Yatsishin</a>)</li><li>针对其他平台构建修复程序 <a href="https://github.com/ClickHouse/ClickHouse/pull/9381" target="_blank" rel="noopener noreferrer">#9381</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/8755" target="_blank" rel="noopener noreferrer">#8755</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/8631" target="_blank" rel="noopener noreferrer">#8631</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>将磁盘部分添加到无状态复盖率测试docker映像 <a href="https://github.com/ClickHouse/ClickHouse/pull/9213" target="_blank" rel="noopener noreferrer">#9213</a> (<a href="https://github.com/Jokser" target="_blank" rel="noopener noreferrer">帕维尔<!-- -->*<!-- -->科瓦连科</a>)</li><li>使用GRPC构建时，摆脱源代码树中的文件 <a href="https://github.com/ClickHouse/ClickHouse/pull/9588" target="_blank" rel="noopener noreferrer">#9588</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">阿莫斯鸟</a>)</li><li>通过从上下文中删除SessionCleaner来缩短构建时间。 让SessionCleaner的代码更简单。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9232" target="_blank" rel="noopener noreferrer">#9232</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>更新了clickhouse-test脚本中挂起查询的检查 <a href="https://github.com/ClickHouse/ClickHouse/pull/8858" target="_blank" rel="noopener noreferrer">#8858</a> (<a href="https://github.com/Akazz" target="_blank" rel="noopener noreferrer">亚历山大<!-- -->*<!-- -->卡扎科夫</a>)</li><li>从存储库中删除了一些无用的文件。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8843" target="_blank" rel="noopener noreferrer">#8843</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>更改类型的数学perftests从 <code>once</code> 到 <code>loop</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8783" target="_blank" rel="noopener noreferrer">#8783</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li><li>添加码头镜像，它允许为我们的代码库构建交互式代码浏览器HTML报告。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8781" target="_blank" rel="noopener noreferrer">#8781</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>）见 <a href="https://clickhouse.com/codebrowser/ClickHouse/dbms/index.html" target="_blank" rel="noopener noreferrer">Woboq代码浏览器</a></li><li>抑制MSan下的一些测试失败。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8780" target="_blank" rel="noopener noreferrer">#8780</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">Alexander Kuzmenkov</a>)</li><li>加速 “exception while insert” 测试 此测试通常在具有复盖率的调试版本中超时。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8711" target="_blank" rel="noopener noreferrer">#8711</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>更新 <code>libcxx</code> 和 <code>libcxxabi</code> 为了主人 在准备 <a href="https://github.com/ClickHouse/ClickHouse/issues/9304" target="_blank" rel="noopener noreferrer">#9304</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/9308" target="_blank" rel="noopener noreferrer">#9308</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>修复flacky测试 <code>00910_zookeeper_test_alter_compression_codecs</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9525" target="_blank" rel="noopener noreferrer">#9525</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>清理重复的链接器标志。 确保链接器不会查找意想不到的符号。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9433" target="_blank" rel="noopener noreferrer">#9433</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">阿莫斯鸟</a>)</li><li>添加 <code>clickhouse-odbc</code> 驱动程序进入测试图像。 这允许通过自己的ODBC驱动程序测试ClickHouse与ClickHouse的交互。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9348" target="_blank" rel="noopener noreferrer">#9348</a> (<a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">filimonov</a>)</li><li>修复单元测试中的几个错误。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9047" target="_blank" rel="noopener noreferrer">#9047</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>启用 <code>-Wmissing-include-dirs</code> GCC警告消除所有不存在的包括-主要是由于CMake脚本错误 <a href="https://github.com/ClickHouse/ClickHouse/pull/8704" target="_blank" rel="noopener noreferrer">#8704</a> (<a href="https://github.com/kreuzerkrieg" target="_blank" rel="noopener noreferrer">kreuzerkrieg</a>)</li><li>描述查询探查器无法工作的原因。 这是用于 <a href="https://github.com/ClickHouse/ClickHouse/issues/9049" target="_blank" rel="noopener noreferrer">#9049</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/9144" target="_blank" rel="noopener noreferrer">#9144</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>将OpenSSL更新到上游主机。 修复了TLS连接可能会失败并显示消息的问题 <code>OpenSSL SSL_read: error:14094438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error</code> 和 <code>SSL Exception: error:2400006E:random number generator::error retrieving entropy</code>. 该问题出现在版本20.1中。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8956" target="_blank" rel="noopener noreferrer">#8956</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>更新服务器的Dockerfile <a href="https://github.com/ClickHouse/ClickHouse/pull/8893" target="_blank" rel="noopener noreferrer">#8893</a> (<a href="https://github.com/ne-ray" target="_blank" rel="noopener noreferrer">Ilya Mazaev</a>)</li><li>Build-gcc-from-sources脚本中的小修复 <a href="https://github.com/ClickHouse/ClickHouse/pull/8774" target="_blank" rel="noopener noreferrer">#8774</a> (<a href="https://github.com/mnach" target="_blank" rel="noopener noreferrer">Michael Nacharov</a>)</li><li>替换 <code>numbers</code> 到 <code>zeros</code> 在perftests其中 <code>number</code> 不使用列。 这将导致更干净的测试结果。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9600" target="_blank" rel="noopener noreferrer">#9600</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li><li>修复列构造函数中使用initializer_list时堆栈溢出问题。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9367" target="_blank" rel="noopener noreferrer">#9367</a> (<a href="https://github.com/ghost" target="_blank" rel="noopener noreferrer">已删除用户</a>)</li><li>将librdkafka升级到v1.3.0。 启用bund绑 <code>rdkafka</code> 和 <code>gsasl</code> mac OS X上的库 <a href="https://github.com/ClickHouse/ClickHouse/pull/9000" target="_blank" rel="noopener noreferrer">#9000</a> (<a href="https://github.com/oandrew" target="_blank" rel="noopener noreferrer">安德鲁Onyshchuk</a>)</li><li>在GCC9.2.0上构建修复程序 <a href="https://github.com/ClickHouse/ClickHouse/pull/9306" target="_blank" rel="noopener noreferrer">#9306</a> (<a href="https://github.com/Vxider" target="_blank" rel="noopener noreferrer">vxider</a>)</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-v20-1">碌莽禄.拢.0755-88888888<a class="hash-link" href="#clickhouse-release-v20-1" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-v20-1-8-41-2020-03-20">ClickHouse版本v20.1.8.41,2020-03-20<a class="hash-link" href="#clickhouse-release-v20-1-8-41-2020-03-20" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-3">错误修复<a class="hash-link" href="#bug-fix-3" title="Direct link to heading">​</a></h4><ul><li>修复可能的永久性 <code>Cannot schedule a task</code> 错误（由于未处理的异常 <code>ParallelAggregatingBlockInputStream::Handler::onFinish/onFinishThread</code>). 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/6833" target="_blank" rel="noopener noreferrer">#6833</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9154" target="_blank" rel="noopener noreferrer">#9154</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>修复过多的内存消耗 <code>ALTER</code> 查询（突变）。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9533" target="_blank" rel="noopener noreferrer">#9533</a> 和 <a href="https://github.com/ClickHouse/ClickHouse/issues/9670" target="_blank" rel="noopener noreferrer">#9670</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9754" target="_blank" rel="noopener noreferrer">#9754</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>修复外部字典DDL中反引用的错误。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9619" target="_blank" rel="noopener noreferrer">#9619</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9734" target="_blank" rel="noopener noreferrer">#9734</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-v20-1-7-38-2020-03-18">ClickHouse释放v20.1.7.38,2020-03-18<a class="hash-link" href="#clickhouse-release-v20-1-7-38-2020-03-18" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-4">错误修复<a class="hash-link" href="#bug-fix-4" title="Direct link to heading">​</a></h4><ul><li>修正了不正确的内部函数名称 <code>sumKahan</code> 和 <code>sumWithOverflow</code>. 在远程查询中使用此函数时，我会导致异常。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9636" target="_blank" rel="noopener noreferrer">#9636</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>). 这个问题是在所有ClickHouse版本。</li><li>允许 <code>ALTER ON CLUSTER</code> 的 <code>Distributed</code> 具有内部复制的表。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/3268" target="_blank" rel="noopener noreferrer">#3268</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9617" target="_blank" rel="noopener noreferrer">#9617</a> (<a href="https://github.com/shinoi2" target="_blank" rel="noopener noreferrer">shinoi2</a>). 这个问题是在所有ClickHouse版本。</li><li>修复可能的异常 <code>Size of filter doesn&#x27;t match size of column</code> 和 <code>Invalid number of rows in Chunk</code> 在 <code>MergeTreeRangeReader</code>. 它们可能在执行时出现 <code>PREWHERE</code> 在某些情况下。 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9132" target="_blank" rel="noopener noreferrer">#9132</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9612" target="_blank" rel="noopener noreferrer">#9612</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">安东<!-- -->*<!-- -->波波夫</a>)</li><li>修复了这个问题：如果你编写一个简单的算术表达式，则不会保留时区 <code>time + 1</code> （与像这样的表达形成对比 <code>time + INTERVAL 1 SECOND</code>). 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/5743" target="_blank" rel="noopener noreferrer">#5743</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9323" target="_blank" rel="noopener noreferrer">#9323</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>). 这个问题是在所有ClickHouse版本。</li><li>现在不可能创建或添加具有简单循环别名的列，如 <code>a DEFAULT b, b DEFAULT a</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9603" target="_blank" rel="noopener noreferrer">#9603</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>修复了base64编码值末尾填充格式错误的问题。 更新base64库。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9491" target="_blank" rel="noopener noreferrer">#9491</a>，关闭 <a href="https://github.com/ClickHouse/ClickHouse/issues/9492" target="_blank" rel="noopener noreferrer">#9492</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/9500" target="_blank" rel="noopener noreferrer">#9500</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>修复数据竞赛破坏 <code>Poco::HTTPServer</code>. 当服务器启动并立即关闭时，可能会发生这种情况。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9468" target="_blank" rel="noopener noreferrer">#9468</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">安东<!-- -->*<!-- -->波波夫</a>)</li><li>修复可能的崩溃/错误的行数 <code>LIMIT n WITH TIES</code> 当有很多行等于第n行时。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9464" target="_blank" rel="noopener noreferrer">#9464</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>修复与列Ttl可能不匹配的校验和。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9451" target="_blank" rel="noopener noreferrer">#9451</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">安东<!-- -->*<!-- -->波波夫</a>)</li><li>修复当用户尝试崩溃 <code>ALTER MODIFY SETTING</code> 对于老格式化 <code>MergeTree</code> 表引擎家族. <a href="https://github.com/ClickHouse/ClickHouse/pull/9435" target="_blank" rel="noopener noreferrer">#9435</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>现在我们将尝试更频繁地完成突变。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9427" target="_blank" rel="noopener noreferrer">#9427</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>修复引入的复制协议不兼容 <a href="https://github.com/ClickHouse/ClickHouse/issues/8598" target="_blank" rel="noopener noreferrer">#8598</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/9412" target="_blank" rel="noopener noreferrer">#9412</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>修复数组类型的bloom_filter索引的not(has())。 <a href="https://github.com/ClickHouse/ClickHouse/pull/9407" target="_blank" rel="noopener noreferrer">#9407</a> (<a href="https://github.com/achimbab" target="_blank" rel="noopener noreferrer">achimbab</a>)</li><li>固定的行为 <code>match</code> 和 <code>extract</code> 当干草堆有零字节的函数。 当干草堆不变时，这种行为是错误的。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9160" target="_blank" rel="noopener noreferrer">#9160</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/9163" target="_blank" rel="noopener noreferrer">#9163</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/9345" target="_blank" rel="noopener noreferrer">#9345</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="buildtestingpackaging-improvement-1">构建/测试/包装改进<a class="hash-link" href="#buildtestingpackaging-improvement-1" title="Direct link to heading">​</a></h4><ul><li>异常处理现在可以在适用于Linux的Windows子系统上正常工作。 看<a href="https://github.com/ClickHouse-Extras/libunwind/pull/3" target="_blank" rel="noopener noreferrer">https://github.com/ClickHouse-Extras/libunwind/pull/3</a> 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/6480" target="_blank" rel="noopener noreferrer">#6480</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/9564" target="_blank" rel="noopener noreferrer">#9564</a> (<a href="https://github.com/sobolevsv" target="_blank" rel="noopener noreferrer">sobolevsv</a>)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-v20-1-6-30-2020-03-05">ClickHouse释放v20.1.6.30,2020-03-05<a class="hash-link" href="#clickhouse-release-v20-1-6-30-2020-03-05" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-5">错误修复<a class="hash-link" href="#bug-fix-5" title="Direct link to heading">​</a></h4><ul><li>修复压缩时的数据不兼容 <code>T64</code> 编解ec
<a href="https://github.com/ClickHouse/ClickHouse/pull/9039" target="_blank" rel="noopener noreferrer">#9039</a> <a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">（abyss7)</a></li><li>在一个线程中从MergeTree表中读取时修复范围顺序。 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8964" target="_blank" rel="noopener noreferrer">#8964</a>.
<a href="https://github.com/ClickHouse/ClickHouse/pull/9050" target="_blank" rel="noopener noreferrer">#9050</a> <a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">(CurtizJ))</a></li><li>修复可能的段错误 <code>MergeTreeRangeReader</code>，同时执行 <code>PREWHERE</code>. 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9064" target="_blank" rel="noopener noreferrer">#9064</a>.
<a href="https://github.com/ClickHouse/ClickHouse/pull/9106" target="_blank" rel="noopener noreferrer">#9106</a> <a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">(CurtizJ))</a></li><li>修复 <code>reinterpretAsFixedString</code> 返回 <code>FixedString</code> 而不是 <code>String</code>.
<a href="https://github.com/ClickHouse/ClickHouse/pull/9052" target="_blank" rel="noopener noreferrer">#9052</a> <a href="https://github.com/oandrew" target="_blank" rel="noopener noreferrer">(oandrew)</a></li><li>修复 <code>joinGet</code> 使用可为空的返回类型。 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8919" target="_blank" rel="noopener noreferrer">#8919</a><a href="https://github.com/ClickHouse/ClickHouse/pull/9014" target="_blank" rel="noopener noreferrer">#9014</a> <a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">（amosbird)</a></li><li>修复bittestall/bitTestAny函数的模糊测试和不正确的行为。
<a href="https://github.com/ClickHouse/ClickHouse/pull/9143" target="_blank" rel="noopener noreferrer">#9143</a> <a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">（阿列克谢-米洛维多夫)</a></li><li>修复当干草堆有零字节时匹配和提取函数的行为。 当干草堆不变时，这种行为是错误的。 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9160" target="_blank" rel="noopener noreferrer">#9160</a><a href="https://github.com/ClickHouse/ClickHouse/pull/9163" target="_blank" rel="noopener noreferrer">#9163</a> <a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">（阿列克谢-米洛维多夫)</a></li><li>当使用非严格单调函数索引时，固定执行反转谓词。 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9034" target="_blank" rel="noopener noreferrer">#9034</a><a href="https://github.com/ClickHouse/ClickHouse/pull/9223" target="_blank" rel="noopener noreferrer">#9223</a> <a href="https://github.com/Akazz" target="_blank" rel="noopener noreferrer">（Akazz)</a></li><li>允许重写 <code>CROSS</code> 到 <code>INNER JOIN</code> 如果有 <code>[NOT] LIKE</code> 操作员在 <code>WHERE</code> 科。 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9191" target="_blank" rel="noopener noreferrer">#9191</a><a href="https://github.com/ClickHouse/ClickHouse/pull/9229" target="_blank" rel="noopener noreferrer">#9229</a> <a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">(4ertus2)</a></li><li>允许使用日志引擎的表中的第一列成为别名。
<a href="https://github.com/ClickHouse/ClickHouse/pull/9231" target="_blank" rel="noopener noreferrer">#9231</a> <a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">（abyss7)</a></li><li>允许逗号加入 <code>IN()</code> 进去 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/7314" target="_blank" rel="noopener noreferrer">#7314</a>.
<a href="https://github.com/ClickHouse/ClickHouse/pull/9251" target="_blank" rel="noopener noreferrer">#9251</a> <a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">(4ertus2)</a></li><li>改进 <code>ALTER MODIFY/ADD</code> 查询逻辑。 现在你不能 <code>ADD</code> 不带类型的列, <code>MODIFY</code> 默认表达式不改变列的类型和 <code>MODIFY</code> type不会丢失默认表达式值。 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8669" target="_blank" rel="noopener noreferrer">#8669</a>.
<a href="https://github.com/ClickHouse/ClickHouse/pull/9227" target="_blank" rel="noopener noreferrer">#9227</a> <a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">(alesapin)</a></li><li>修复突变最终确定，当已经完成突变时可以具有状态is_done=0。
<a href="https://github.com/ClickHouse/ClickHouse/pull/9217" target="_blank" rel="noopener noreferrer">#9217</a> <a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">(alesapin)</a></li><li>碌莽禄Support: “Processors” 管道系统.数字和系统.numbers_mt 这也修复了错误时 <code>max_execution_time</code> 不被尊重。
<a href="https://github.com/ClickHouse/ClickHouse/pull/7796" target="_blank" rel="noopener noreferrer">#7796</a> <a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">(KochetovNicolai)</a></li><li>修复错误的计数 <code>DictCacheKeysRequestedFound</code> 公制。
<a href="https://github.com/ClickHouse/ClickHouse/pull/9411" target="_blank" rel="noopener noreferrer">#9411</a> <a href="https://github.com/nikitamikhaylov" target="_blank" rel="noopener noreferrer">(nikitamikhaylov)</a></li><li>添加了对存储策略的检查 <code>ATTACH PARTITION FROM</code>, <code>REPLACE PARTITION</code>, <code>MOVE TO TABLE</code> 否则可能使部分数据在重新启动后无法访问，并阻止ClickHouse启动。
<a href="https://github.com/ClickHouse/ClickHouse/pull/9383" target="_blank" rel="noopener noreferrer">#9383</a> <a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">（excitoon)</a></li><li>在固定的瑞银报告 <code>MergeTreeIndexSet</code>. 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9250" target="_blank" rel="noopener noreferrer">#9250</a><a href="https://github.com/ClickHouse/ClickHouse/pull/9365" target="_blank" rel="noopener noreferrer">#9365</a> <a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">（阿列克谢-米洛维多夫)</a></li><li>在BlockIO中修复可能的数据集。
<a href="https://github.com/ClickHouse/ClickHouse/pull/9356" target="_blank" rel="noopener noreferrer">#9356</a> <a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">(KochetovNicolai)</a></li><li>支持 <code>UInt64</code> 在JSON相关函数中不适合Int64的数字。 更新 <code>SIMDJSON</code> 为了主人 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9209" target="_blank" rel="noopener noreferrer">#9209</a><a href="https://github.com/ClickHouse/ClickHouse/pull/9344" target="_blank" rel="noopener noreferrer">#9344</a> <a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">（阿列克谢-米洛维多夫)</a></li><li>如果将数据目录挂载到单独的设备，则修复可用空间量计算不正确时的问题。 对于默认磁盘，计算数据子目录的可用空间。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/7441" target="_blank" rel="noopener noreferrer">#7441</a><a href="https://github.com/ClickHouse/ClickHouse/pull/9257" target="_blank" rel="noopener noreferrer">#9257</a> <a href="https://github.com/millb" target="_blank" rel="noopener noreferrer">（米尔布)</a></li><li>修复TLS连接可能会失败并显示消息时的问题 <code>OpenSSL SSL_read: error:14094438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error and SSL Exception: error:2400006E:random number generator::error retrieving entropy.</code> 将OpenSSL更新到上游主机。
<a href="https://github.com/ClickHouse/ClickHouse/pull/8956" target="_blank" rel="noopener noreferrer">#8956</a> <a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">（阿列克谢-米洛维多夫)</a></li><li>执行时 <code>CREATE</code> 查询，在存储引擎参数中折叠常量表达式。 将空数据库名称替换为当前数据库。 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/6508" target="_blank" rel="noopener noreferrer">#6508</a>, <a href="https://github.com/ClickHouse/ClickHouse/issues/3492" target="_blank" rel="noopener noreferrer">#3492</a>. 还修复了ClickHouseDictionarySource中检查本地地址。
<a href="https://github.com/ClickHouse/ClickHouse/pull/9262" target="_blank" rel="noopener noreferrer">#9262</a> <a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">（tabplubix)</a></li><li>修复段错误 <code>StorageMerge</code>，从StorageFile读取时可能发生。
<a href="https://github.com/ClickHouse/ClickHouse/pull/9387" target="_blank" rel="noopener noreferrer">#9387</a> <a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">（tabplubix)</a></li><li>防止丢失数据 <code>Kafka</code> 在极少数情况下，在读取后缀之后但在提交之前发生异常。 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9378" target="_blank" rel="noopener noreferrer">#9378</a>. 相关: <a href="https://github.com/ClickHouse/ClickHouse/issues/7175" target="_blank" rel="noopener noreferrer">#7175</a><a href="https://github.com/ClickHouse/ClickHouse/pull/9507" target="_blank" rel="noopener noreferrer">#9507</a> <a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">(菲利蒙诺夫)</a></li><li>修复尝试使用/删除时导致服务器终止的错误 <code>Kafka</code> 使用错误的参数创建的表。 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/9494" target="_blank" rel="noopener noreferrer">#9494</a>. 结合 <a href="https://github.com/ClickHouse/ClickHouse/issues/9507" target="_blank" rel="noopener noreferrer">#9507</a>.
<a href="https://github.com/ClickHouse/ClickHouse/pull/9513" target="_blank" rel="noopener noreferrer">#9513</a> <a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">(菲利蒙诺夫)</a></li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="new-feature-1">新功能<a class="hash-link" href="#new-feature-1" title="Direct link to heading">​</a></h4><ul><li>添加 <code>deduplicate_blocks_in_dependent_materialized_views</code> 用于控制具有实例化视图的表中幂等插入的行为的选项。 这个新功能是由Altinity的特殊要求添加到错误修正版本中的。
<a href="https://github.com/ClickHouse/ClickHouse/pull/9070" target="_blank" rel="noopener noreferrer">#9070</a> <a href="https://github.com/urykhy" target="_blank" rel="noopener noreferrer">(urykhy)</a></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="clickhouse-release-v20-1-2-4-2020-01-22">ClickHouse版本v20.1.2.4,2020-01-22<a class="hash-link" href="#clickhouse-release-v20-1-2-4-2020-01-22" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="backward-incompatible-change-1">向后不兼容的更改<a class="hash-link" href="#backward-incompatible-change-1" title="Direct link to heading">​</a></h4><ul><li>使设置 <code>merge_tree_uniform_read_distribution</code> 过时了 服务器仍可识别此设置，但无效。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8308" target="_blank" rel="noopener noreferrer">#8308</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>更改函数的返回类型 <code>greatCircleDistance</code> 到 <code>Float32</code> 因为现在计算的结果是 <code>Float32</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7993" target="_blank" rel="noopener noreferrer">#7993</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>现在预计查询参数表示为 “escaped” 格式。 例如，要传递字符串 <code>a&lt;tab&gt;b</code> 你必须写 <code>a\tb</code> 或 <code>a\&lt;tab&gt;b</code> 并分别, <code>a%5Ctb</code> 或 <code>a%5C%09b</code> 在URL中。 这是需要添加传递NULL作为的可能性 <code>\N</code>. 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/7488" target="_blank" rel="noopener noreferrer">#7488</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8517" target="_blank" rel="noopener noreferrer">#8517</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>启用 <code>use_minimalistic_part_header_in_zookeeper</code> 设置 <code>ReplicatedMergeTree</code> 默认情况下。 这将显着减少存储在ZooKeeper中的数据量。 自19.1版本以来支持此设置，我们已经在多个服务的生产中使用它，半年以上没有任何问题。 如果您有机会降级到19.1以前的版本，请禁用此设置。 <a href="https://github.com/ClickHouse/ClickHouse/pull/6850" target="_blank" rel="noopener noreferrer">#6850</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>数据跳过索引已准备就绪并默认启用。 设置 <code>allow_experimental_data_skipping_indices</code>, <code>allow_experimental_cross_to_join_conversion</code> 和 <code>allow_experimental_multiple_joins_emulation</code> 现在已经过时，什么也不做。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7974" target="_blank" rel="noopener noreferrer">#7974</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>添加新建 <code>ANY JOIN</code> 逻辑 <code>StorageJoin</code> 符合 <code>JOIN</code> 操作。 要在不改变行为的情况下进行升级，您需要添加 <code>SETTINGS any_join_distinct_right_table_keys = 1</code> 引擎联接表元数据或在升级后重新创建这些表。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8400" target="_blank" rel="noopener noreferrer">#8400</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>要求重新启动服务器以应用日志记录配置中的更改。 这是一种临时解决方法，可以避免服务器将日志记录到已删除的日志文件中的错误（请参阅 <a href="https://github.com/ClickHouse/ClickHouse/issues/8696" target="_blank" rel="noopener noreferrer">#8696</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/8707" target="_blank" rel="noopener noreferrer">#8707</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">Alexander Kuzmenkov</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="new-feature-2">新功能<a class="hash-link" href="#new-feature-2" title="Direct link to heading">​</a></h4><ul><li>添加了有关部件路径的信息 <code>system.merges</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8043" target="_blank" rel="noopener noreferrer">#8043</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>添加执行能力 <code>SYSTEM RELOAD DICTIONARY</code> 查询中 <code>ON CLUSTER</code> 模式 <a href="https://github.com/ClickHouse/ClickHouse/pull/8288" target="_blank" rel="noopener noreferrer">#8288</a> (<a href="https://github.com/YiuRULE" target="_blank" rel="noopener noreferrer">纪尧姆<!-- -->*<!-- -->塔瑟里</a>)</li><li>添加执行能力 <code>CREATE DICTIONARY</code> 查询中 <code>ON CLUSTER</code> 模式 <a href="https://github.com/ClickHouse/ClickHouse/pull/8163" target="_blank" rel="noopener noreferrer">#8163</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>现在用户的个人资料 <code>users.xml</code> 可以继承多个配置文件。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8343" target="_blank" rel="noopener noreferrer">#8343</a> (<a href="https://github.com/Felixoid" target="_blank" rel="noopener noreferrer">Mikhail f. Shiryaev</a>)</li><li>已添加 <code>system.stack_trace</code> 允许查看所有服务器线程的堆栈跟踪的表。 这对于开发人员反省服务器状态非常有用。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/7576" target="_blank" rel="noopener noreferrer">#7576</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8344" target="_blank" rel="noopener noreferrer">#8344</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>添加 <code>DateTime64</code> 具有可配置子秒精度的数据类型。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7170" target="_blank" rel="noopener noreferrer">#7170</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">瓦西里<!-- -->*<!-- -->内姆科夫</a>)</li><li>添加表函数 <code>clusterAllReplicas</code> 这允许查询集群中的所有节点。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8493" target="_blank" rel="noopener noreferrer">#8493</a> (<a href="https://github.com/kiransunkari" target="_blank" rel="noopener noreferrer">kiran sunkari</a>)</li><li>添加聚合函数 <code>categoricalInformationValue</code> 其计算出离散特征的信息值。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8117" target="_blank" rel="noopener noreferrer">#8117</a> (<a href="https://github.com/hczhcz" target="_blank" rel="noopener noreferrer">hcz</a>)</li><li>加快数据文件的解析 <code>CSV</code>, <code>TSV</code> 和 <code>JSONEachRow</code> 通过并行进行格式化。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7780" target="_blank" rel="noopener noreferrer">#7780</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">Alexander Kuzmenkov</a>)</li><li>添加功能 <code>bankerRound</code> 它执行银行家的四舍五入。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8112" target="_blank" rel="noopener noreferrer">#8112</a> (<a href="https://github.com/hczhcz" target="_blank" rel="noopener noreferrer">hcz</a>)</li><li>支持区域名称的嵌入式字典中的更多语言: ‘ru’, ‘en’, ‘ua’, ‘uk’, ‘by’, ‘kz’, ‘tr’, ‘de’, ‘uz’, ‘lv’, ‘lt’, ‘et’, ‘pt’, ‘he’, ‘vi’. <a href="https://github.com/ClickHouse/ClickHouse/pull/8189" target="_blank" rel="noopener noreferrer">#8189</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>改进的一致性 <code>ANY JOIN</code> 逻辑 现在 <code>t1 ANY LEFT JOIN t2</code> 等于 <code>t2 ANY RIGHT JOIN t1</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7665" target="_blank" rel="noopener noreferrer">#7665</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>添加设置 <code>any_join_distinct_right_table_keys</code> 这使旧的行为 <code>ANY INNER JOIN</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7665" target="_blank" rel="noopener noreferrer">#7665</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>添加新建 <code>SEMI</code> 和 <code>ANTI JOIN</code>. 老 <code>ANY INNER JOIN</code> 行为现在可作为 <code>SEMI LEFT JOIN</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7665" target="_blank" rel="noopener noreferrer">#7665</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>已添加 <code>Distributed</code> 格式 <code>File</code> 发动机和 <code>file</code> 表函数，它允许从读 <code>.bin</code> 通过异步插入生成的文件 <code>Distributed</code> 桌子 <a href="https://github.com/ClickHouse/ClickHouse/pull/8535" target="_blank" rel="noopener noreferrer">#8535</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li><li>添加可选的重置列参数 <code>runningAccumulate</code> 这允许为每个新的键值重置聚合结果。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8326" target="_blank" rel="noopener noreferrer">#8326</a> (<a href="https://github.com/kononencheg" target="_blank" rel="noopener noreferrer">谢尔盖<!-- -->*<!-- -->科诺年科</a>)</li><li>添加使用ClickHouse作为普罗米修斯端点的能力。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7900" target="_blank" rel="noopener noreferrer">#7900</a> (<a href="https://github.com/Vdimir" target="_blank" rel="noopener noreferrer">vdimir</a>)</li><li>添加部分 <code>&lt;remote_url_allow_hosts&gt;</code> 在 <code>config.xml</code> 这将限制允许的主机用于远程表引擎和表函数 <code>URL</code>, <code>S3</code>, <code>HDFS</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7154" target="_blank" rel="noopener noreferrer">#7154</a> (<a href="https://github.com/millb" target="_blank" rel="noopener noreferrer">米哈伊尔<!-- -->*<!-- -->科罗托夫</a>)</li><li>添加功能 <code>greatCircleAngle</code> 它计算球体上的距离（以度为单位）。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8105" target="_blank" rel="noopener noreferrer">#8105</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>改变地球半径与h3库一致。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8105" target="_blank" rel="noopener noreferrer">#8105</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>已添加 <code>JSONCompactEachRow</code> 和 <code>JSONCompactEachRowWithNamesAndTypes</code> 输入和输出格式。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7841" target="_blank" rel="noopener noreferrer">#7841</a> (<a href="https://github.com/millb" target="_blank" rel="noopener noreferrer">米哈伊尔<!-- -->*<!-- -->科罗托夫</a>)</li><li>增加了与文件相关的表引擎和表函数的功能 (<code>File</code>, <code>S3</code>, <code>URL</code>, <code>HDFS</code>）它允许读取和写入 <code>gzip</code> 基于附加引擎参数或文件扩展名的文件。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7840" target="_blank" rel="noopener noreferrer">#7840</a> (<a href="https://github.com/apbodrov" target="_blank" rel="noopener noreferrer">安德烈<!-- -->*<!-- -->博德罗夫</a>)</li><li>添加了 <code>randomASCII(length)</code> 函数，生成一个字符串与一个随机集 <a href="https://en.wikipedia.org/wiki/ASCII#Printable_characters" target="_blank" rel="noopener noreferrer">ASCII</a> 可打印字符。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8401" target="_blank" rel="noopener noreferrer">#8401</a> (<a href="https://github.com/BayoNet" target="_blank" rel="noopener noreferrer">刺刀</a>)</li><li>添加功能 <code>JSONExtractArrayRaw</code> 它返回从未解析的json数组元素上的数组 <code>JSON</code> 字符串。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8081" target="_blank" rel="noopener noreferrer">#8081</a> (<a href="https://github.com/errx" target="_blank" rel="noopener noreferrer">Oleg Matrokhin</a>)</li><li>添加 <code>arrayZip</code> 函数允许将多个长度相等的数组合成一个元组数组。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8149" target="_blank" rel="noopener noreferrer">#8149</a> (<a href="https://github.com/zhang2014" target="_blank" rel="noopener noreferrer">张冬</a>)</li><li>添加根据配置的磁盘之间移动数据的能力 <code>TTL</code>-表达式为 <code>*MergeTree</code> 表引擎家族. <a href="https://github.com/ClickHouse/ClickHouse/pull/8140" target="_blank" rel="noopener noreferrer">#8140</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>增加了新的聚合功能 <code>avgWeighted</code> 其允许计算加权平均值。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7898" target="_blank" rel="noopener noreferrer">#7898</a> (<a href="https://github.com/apbodrov" target="_blank" rel="noopener noreferrer">安德烈<!-- -->*<!-- -->博德罗夫</a>)</li><li>现在并行解析默认启用 <code>TSV</code>, <code>TSKV</code>, <code>CSV</code> 和 <code>JSONEachRow</code> 格式。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7894" target="_blank" rel="noopener noreferrer">#7894</a> (<a href="https://github.com/nikitamikhaylov" target="_blank" rel="noopener noreferrer">尼基塔<!-- -->*<!-- -->米哈伊洛夫</a>)</li><li>从添加几个地理功能 <code>H3</code> 图书馆: <code>h3GetResolution</code>, <code>h3EdgeAngle</code>, <code>h3EdgeLength</code>, <code>h3IsValid</code> 和 <code>h3kRing</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8034" target="_blank" rel="noopener noreferrer">#8034</a> (<a href="https://github.com/hombit" target="_blank" rel="noopener noreferrer">Konstantin Malanchev</a>)</li><li>增加了对brotli的支持 (<code>br</code>）压缩文件相关的存储和表函数。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8156" target="_blank" rel="noopener noreferrer">#8156</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8526" target="_blank" rel="noopener noreferrer">#8526</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>添加 <code>groupBit*</code> 功能的 <code>SimpleAggregationFunction</code> 类型。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8485" target="_blank" rel="noopener noreferrer">#8485</a> (<a href="https://github.com/YiuRULE" target="_blank" rel="noopener noreferrer">纪尧姆<!-- -->*<!-- -->塔瑟里</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bug-fix-6">错误修复<a class="hash-link" href="#bug-fix-6" title="Direct link to heading">​</a></h4><ul><li>修复重命名表 <code>Distributed</code> 引擎 修复问题 <a href="https://github.com/ClickHouse/ClickHouse/issues/7868" target="_blank" rel="noopener noreferrer">#7868</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8306" target="_blank" rel="noopener noreferrer">#8306</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>现在字典支持 <code>EXPRESSION</code> 对于非ClickHouse SQL方言中任意字符串中的属性。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8098" target="_blank" rel="noopener noreferrer">#8098</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>修复损坏 <code>INSERT SELECT FROM mysql(...)</code> 查询。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8070" target="_blank" rel="noopener noreferrer">#8070</a> 和 <a href="https://github.com/ClickHouse/ClickHouse/issues/7960" target="_blank" rel="noopener noreferrer">#7960</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8234" target="_blank" rel="noopener noreferrer">#8234</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>修复错误 “Mismatch column sizes” 插入默认值时 <code>Tuple</code> 从 <code>JSONEachRow</code>. 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/5653" target="_blank" rel="noopener noreferrer">#5653</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8606" target="_blank" rel="noopener noreferrer">#8606</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>现在将在使用的情况下抛出一个异常 <code>WITH TIES</code> 旁边的 <code>LIMIT BY</code>. 还增加了使用能力 <code>TOP</code> 与 <code>LIMIT BY</code>. 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/7472" target="_blank" rel="noopener noreferrer">#7472</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7637" target="_blank" rel="noopener noreferrer">#7637</a> (<a href="https://github.com/nikitamikhaylov" target="_blank" rel="noopener noreferrer">尼基塔<!-- -->*<!-- -->米哈伊洛夫</a>)</li><li>从新鲜的glibc版本中修复unintendent依赖关系 <code>clickhouse-odbc-bridge</code> 二进制 <a href="https://github.com/ClickHouse/ClickHouse/pull/8046" target="_blank" rel="noopener noreferrer">#8046</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">阿莫斯鸟</a>)</li><li>修正错误的检查功能 <code>*MergeTree</code> 引擎家族. 现在，当我们在最后一个颗粒和最后一个标记（非最终）中有相同数量的行时，它不会失败。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8047" target="_blank" rel="noopener noreferrer">#8047</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>修复插入 <code>Enum*</code> 列后 <code>ALTER</code> 查询，当基础数值类型等于表指定类型时。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/7836" target="_blank" rel="noopener noreferrer">#7836</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7908" target="_blank" rel="noopener noreferrer">#7908</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">安东<!-- -->*<!-- -->波波夫</a>)</li><li>允许非常数负 “size” 函数的参数 <code>substring</code>. 这是不允许的错误。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/4832" target="_blank" rel="noopener noreferrer">#4832</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7703" target="_blank" rel="noopener noreferrer">#7703</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>修复当错误数量的参数传递到解析错误 <code>(O|J)DBC</code> 表引擎。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7709" target="_blank" rel="noopener noreferrer">#7709</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>将日志发送到syslog时使用正在运行的clickhouse进程的命令名。 在以前的版本中，使用空字符串而不是命令名称。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8460" target="_blank" rel="noopener noreferrer">#8460</a> (<a href="https://github.com/mnach" target="_blank" rel="noopener noreferrer">Michael Nacharov</a>)</li><li>修复检查允许的主机 <code>localhost</code>. 这个公关修复了在提供的解决方案 <a href="https://github.com/ClickHouse/ClickHouse/pull/8241" target="_blank" rel="noopener noreferrer">#8241</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8342" target="_blank" rel="noopener noreferrer">#8342</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">维塔利<!-- -->*<!-- -->巴拉诺夫</a>)</li><li>修复罕见的崩溃 <code>argMin</code> 和 <code>argMax</code> 长字符串参数的函数，当结果被用于 <code>runningAccumulate</code> 功能。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8325" target="_blank" rel="noopener noreferrer">#8325</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/8341" target="_blank" rel="noopener noreferrer">#8341</a> (<a href="https://github.com/769344359" target="_blank" rel="noopener noreferrer">恐龙</a>)</li><li>修复表的内存过度使用 <code>Buffer</code> 引擎 <a href="https://github.com/ClickHouse/ClickHouse/pull/8345" target="_blank" rel="noopener noreferrer">#8345</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>修正了可以采取的功能中的潜在错误 <code>NULL</code> 作为参数之一，并返回非NULL。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8196" target="_blank" rel="noopener noreferrer">#8196</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>在线程池中更好地计算后台进程的指标 <code>MergeTree</code> 表引擎. <a href="https://github.com/ClickHouse/ClickHouse/pull/8194" target="_blank" rel="noopener noreferrer">#8194</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>修复功能 <code>IN</code> 里面 <code>WHERE</code> 存在行级表筛选器时的语句。 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/6687" target="_blank" rel="noopener noreferrer">#6687</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/8357" target="_blank" rel="noopener noreferrer">#8357</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">伊万</a>)</li><li>现在，如果整数值没有完全解析设置值，则会引发异常。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7678" target="_blank" rel="noopener noreferrer">#7678</a> (<a href="https://github.com/millb" target="_blank" rel="noopener noreferrer">米哈伊尔<!-- -->*<!-- -->科罗托夫</a>)</li><li>修复当聚合函数用于查询具有两个以上本地分片的分布式表时出现的异常。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8164" target="_blank" rel="noopener noreferrer">#8164</a> (<a href="https://github.com/nicelulu" target="_blank" rel="noopener noreferrer">小路</a>)</li><li>现在，bloom filter可以处理零长度数组，并且不执行冗余计算。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8242" target="_blank" rel="noopener noreferrer">#8242</a> (<a href="https://github.com/achimbab" target="_blank" rel="noopener noreferrer">achimbab</a>)</li><li>修正了通过匹配客户端主机来检查客户端主机是否允许 <code>host_regexp</code> 在指定 <code>users.xml</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8241" target="_blank" rel="noopener noreferrer">#8241</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">维塔利<!-- -->*<!-- -->巴拉诺夫</a>)</li><li>放松不明确的列检查，导致多个误报 <code>JOIN ON</code> 科。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8385" target="_blank" rel="noopener noreferrer">#8385</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>修正了可能的服务器崩溃 (<code>std::terminate</code>)当服务器不能发送或写入数据 <code>JSON</code> 或 <code>XML</code> 格式与值 <code>String</code> 数据类型（需要 <code>UTF-8</code> 验证）或使用Brotli算法或其他一些罕见情况下压缩结果数据时。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/7603" target="_blank" rel="noopener noreferrer">#7603</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/8384" target="_blank" rel="noopener noreferrer">#8384</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>修复竞争条件 <code>StorageDistributedDirectoryMonitor</code> 被线人发现 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8364" target="_blank" rel="noopener noreferrer">#8364</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8383" target="_blank" rel="noopener noreferrer">#8383</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li><li>现在背景合并 <code>*MergeTree</code> 表引擎家族更准确地保留存储策略卷顺序。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8549" target="_blank" rel="noopener noreferrer">#8549</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>现在表引擎 <code>Kafka</code> 与正常工作 <code>Native</code> 格式。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/6731" target="_blank" rel="noopener noreferrer">#6731</a> <a href="https://github.com/ClickHouse/ClickHouse/issues/7337" target="_blank" rel="noopener noreferrer">#7337</a> <a href="https://github.com/ClickHouse/ClickHouse/issues/8003" target="_blank" rel="noopener noreferrer">#8003</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8016" target="_blank" rel="noopener noreferrer">#8016</a> (<a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">filimonov</a>)</li><li>固定格式与标题（如 <code>CSVWithNames</code>）这是抛出关于EOF表引擎的异常 <code>Kafka</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8016" target="_blank" rel="noopener noreferrer">#8016</a> (<a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">filimonov</a>)</li><li>修复了从子查询右侧部分制作set的错误 <code>IN</code> 科。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/5767" target="_blank" rel="noopener noreferrer">#5767</a> 和 <a href="https://github.com/ClickHouse/ClickHouse/issues/2542" target="_blank" rel="noopener noreferrer">#2542</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7755" target="_blank" rel="noopener noreferrer">#7755</a> (<a href="https://github.com/nikitamikhaylov" target="_blank" rel="noopener noreferrer">尼基塔<!-- -->*<!-- -->米哈伊洛夫</a>)</li><li>从存储读取时修复可能的崩溃 <code>File</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7756" target="_blank" rel="noopener noreferrer">#7756</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li><li>在固定的文件读取 <code>Parquet</code> 包含类型列的格式 <code>list</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8334" target="_blank" rel="noopener noreferrer">#8334</a> (<a href="https://github.com/maxulan" target="_blank" rel="noopener noreferrer">马苏兰</a>)</li><li>修复错误 <code>Not found column</code> 对于分布式查询 <code>PREWHERE</code> 条件取决于采样键if <code>max_parallel_replicas &gt; 1</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7913" target="_blank" rel="noopener noreferrer">#7913</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li><li>修复错误 <code>Not found column</code> 如果使用查询 <code>PREWHERE</code> 依赖于表的别名，结果集由于主键条件而为空。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7911" target="_blank" rel="noopener noreferrer">#7911</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li><li>函数的固定返回类型 <code>rand</code> 和 <code>randConstant</code> 在情况下 <code>Nullable</code> 争论。 现在函数总是返回 <code>UInt32</code> 而且从来没有 <code>Nullable(UInt32)</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8204" target="_blank" rel="noopener noreferrer">#8204</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li><li>禁用谓词下推 <code>WITH FILL</code> 表达。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/7784" target="_blank" rel="noopener noreferrer">#7784</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7789" target="_blank" rel="noopener noreferrer">#7789</a> (<a href="https://github.com/zhang2014" target="_blank" rel="noopener noreferrer">张冬</a>)</li><li>修正错误 <code>count()</code> 结果 <code>SummingMergeTree</code> 当 <code>FINAL</code> 部分被使用。 <a href="https://github.com/ClickHouse/ClickHouse/issues/3280" target="_blank" rel="noopener noreferrer">#3280</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/7786" target="_blank" rel="noopener noreferrer">#7786</a> (<a href="https://github.com/nikitamikhaylov" target="_blank" rel="noopener noreferrer">尼基塔<!-- -->*<!-- -->米哈伊洛夫</a>)</li><li>修复来自远程服务器的常量函数可能不正确的结果。 它发生在具有以下功能的查询中 <code>version()</code>, <code>uptime()</code> 等。 它为不同的服务器返回不同的常量值。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/7666" target="_blank" rel="noopener noreferrer">#7666</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7689" target="_blank" rel="noopener noreferrer">#7689</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li><li>修复下推谓词优化中导致错误结果的复杂错误。 这解决了下推谓词优化的很多问题。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8503" target="_blank" rel="noopener noreferrer">#8503</a> (<a href="https://github.com/zhang2014" target="_blank" rel="noopener noreferrer">张冬</a>)</li><li>修复崩溃 <code>CREATE TABLE .. AS dictionary</code> 查询。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8508" target="_blank" rel="noopener noreferrer">#8508</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>一些改进ClickHouse语法 <code>.g4</code> 文件 <a href="https://github.com/ClickHouse/ClickHouse/pull/8294" target="_blank" rel="noopener noreferrer">#8294</a> (<a href="https://github.com/taiyang-li" target="_blank" rel="noopener noreferrer">太阳里</a>)</li><li>修复导致崩溃的错误 <code>JOIN</code>s与表与发动机 <code>Join</code>. 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/7556" target="_blank" rel="noopener noreferrer">#7556</a> <a href="https://github.com/ClickHouse/ClickHouse/issues/8254" target="_blank" rel="noopener noreferrer">#8254</a> <a href="https://github.com/ClickHouse/ClickHouse/issues/7915" target="_blank" rel="noopener noreferrer">#7915</a> <a href="https://github.com/ClickHouse/ClickHouse/issues/8100" target="_blank" rel="noopener noreferrer">#8100</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8298" target="_blank" rel="noopener noreferrer">#8298</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>修复冗余字典重新加载 <code>CREATE DATABASE</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7916" target="_blank" rel="noopener noreferrer">#7916</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>限制从读取流的最大数量 <code>StorageFile</code> 和 <code>StorageHDFS</code>. 修复<a href="https://github.com/ClickHouse/ClickHouse/issues/7650" target="_blank" rel="noopener noreferrer">https://github.com/ClickHouse/ClickHouse/issues/7650</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7981" target="_blank" rel="noopener noreferrer">#7981</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>修复bug <code>ALTER ... MODIFY ... CODEC</code> 查询，当用户同时指定默认表达式和编解ec。 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8593" target="_blank" rel="noopener noreferrer">8593</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8614" target="_blank" rel="noopener noreferrer">#8614</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>修复列的后台合并错误 <code>SimpleAggregateFunction(LowCardinality)</code> 类型。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8613" target="_blank" rel="noopener noreferrer">#8613</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li><li>固定类型签入功能 <code>toDateTime64</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8375" target="_blank" rel="noopener noreferrer">#8375</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">瓦西里<!-- -->*<!-- -->内姆科夫</a>)</li><li>现在服务器不崩溃 <code>LEFT</code> 或 <code>FULL JOIN</code> 与和加入引擎和不支持 <code>join_use_nulls</code> 设置。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8479" target="_blank" rel="noopener noreferrer">#8479</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>现在 <code>DROP DICTIONARY IF EXISTS db.dict</code> 查询不会抛出异常，如果 <code>db</code> 根本不存在 <a href="https://github.com/ClickHouse/ClickHouse/pull/8185" target="_blank" rel="noopener noreferrer">#8185</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">维塔利<!-- -->*<!-- -->巴拉诺夫</a>)</li><li>修复表函数中可能出现的崩溃 (<code>file</code>, <code>mysql</code>, <code>remote</code>）引用删除引起的 <code>IStorage</code> 对象。 修复插入表函数时指定的列的不正确解析。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7762" target="_blank" rel="noopener noreferrer">#7762</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>确保网络启动前 <code>clickhouse-server</code>. 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/7507" target="_blank" rel="noopener noreferrer">#7507</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8570" target="_blank" rel="noopener noreferrer">#8570</a> (<a href="https://github.com/yuzhichang" target="_blank" rel="noopener noreferrer">余志昌</a>)</li><li>修复安全连接的超时处理，因此查询不会无限挂起。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8126" target="_blank" rel="noopener noreferrer">#8126</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8128" target="_blank" rel="noopener noreferrer">#8128</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>修复 <code>clickhouse-copier</code>并发工人之间的冗余争用。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7816" target="_blank" rel="noopener noreferrer">#7816</a> (<a href="https://github.com/dingxiangfei2009" target="_blank" rel="noopener noreferrer">丁香飞</a>)</li><li>现在突变不会跳过附加的部分，即使它们的突变版本比当前的突变版本大。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7812" target="_blank" rel="noopener noreferrer">#7812</a> (<a href="https://github.com/yuzhichang" target="_blank" rel="noopener noreferrer">余志昌</a>) <a href="https://github.com/ClickHouse/ClickHouse/pull/8250" target="_blank" rel="noopener noreferrer">#8250</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>忽略冗余副本 <code>*MergeTree</code> 数据部分移动到另一个磁盘和服务器重新启动后。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7810" target="_blank" rel="noopener noreferrer">#7810</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>修复崩溃 <code>FULL JOIN</code> 与 <code>LowCardinality</code> 在 <code>JOIN</code> 钥匙 <a href="https://github.com/ClickHouse/ClickHouse/pull/8252" target="_blank" rel="noopener noreferrer">#8252</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>禁止在插入查询中多次使用列名，如 <code>INSERT INTO tbl (x, y, x)</code>. 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/5465" target="_blank" rel="noopener noreferrer">#5465</a>, <a href="https://github.com/ClickHouse/ClickHouse/issues/7681" target="_blank" rel="noopener noreferrer">#7681</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7685" target="_blank" rel="noopener noreferrer">#7685</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>增加了回退，用于检测未知Cpu的物理CPU内核数量（使用逻辑CPU内核数量）。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/5239" target="_blank" rel="noopener noreferrer">#5239</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7726" target="_blank" rel="noopener noreferrer">#7726</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>修复 <code>There&#x27;s no column</code> 实例化列和别名列出错。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8210" target="_blank" rel="noopener noreferrer">#8210</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>固定切断崩溃时 <code>EXISTS</code> 查询没有使用 <code>TABLE</code> 或 <code>DICTIONARY</code> 预选赛 就像 <code>EXISTS t</code>. 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8172" target="_blank" rel="noopener noreferrer">#8172</a>. 此错误在版本19.17中引入。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8213" target="_blank" rel="noopener noreferrer">#8213</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>修复罕见错误 <code>&quot;Sizes of columns doesn&#x27;t match&quot;</code> 使用时可能会出现 <code>SimpleAggregateFunction</code> 列。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7790" target="_blank" rel="noopener noreferrer">#7790</a> (<a href="https://github.com/bgranvea" target="_blank" rel="noopener noreferrer">Boris Granveaud</a>)</li><li>修正错误，其中用户空 <code>allow_databases</code> 可以访问所有数据库（和相同的 <code>allow_dictionaries</code>). <a href="https://github.com/ClickHouse/ClickHouse/pull/7793" target="_blank" rel="noopener noreferrer">#7793</a> (<a href="https://github.com/DeifyTheGod" target="_blank" rel="noopener noreferrer">DeifyTheGod</a>)</li><li>修复客户端崩溃时，服务器已经从客户端断开连接。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8071" target="_blank" rel="noopener noreferrer">#8071</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>修复 <code>ORDER BY</code> 在按主键前缀和非主键后缀排序的情况下的行为。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7759" target="_blank" rel="noopener noreferrer">#7759</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">安东<!-- -->*<!-- -->波波夫</a>)</li><li>检查表中是否存在合格列。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/6836" target="_blank" rel="noopener noreferrer">#6836</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7758" target="_blank" rel="noopener noreferrer">#7758</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>固定行为 <code>ALTER MOVE</code> 合并完成后立即运行移动指定的超部分。 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8103" target="_blank" rel="noopener noreferrer">#8103</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8104" target="_blank" rel="noopener noreferrer">#8104</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>使用时修复可能的服务器崩溃 <code>UNION</code> 具有不同数量的列。 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/7279" target="_blank" rel="noopener noreferrer">#7279</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7929" target="_blank" rel="noopener noreferrer">#7929</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li><li>修复函数结果子字符串的大小 <code>substr</code> 负大小。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8589" target="_blank" rel="noopener noreferrer">#8589</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li><li>现在服务器不执行部分突变 <code>MergeTree</code> 如果后台池中没有足够的可用线程。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8588" target="_blank" rel="noopener noreferrer">#8588</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>修复格式化时的小错字 <code>UNION ALL</code> AST. <a href="https://github.com/ClickHouse/ClickHouse/pull/7999" target="_blank" rel="noopener noreferrer">#7999</a> (<a href="https://github.com/litao91" target="_blank" rel="noopener noreferrer">litao91</a>)</li><li>修正了负数不正确的布隆过滤结果。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8317" target="_blank" rel="noopener noreferrer">#8317</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8566" target="_blank" rel="noopener noreferrer">#8566</a> (<a href="https://github.com/zhang2014" target="_blank" rel="noopener noreferrer">张冬</a>)</li><li>在解压缩固定潜在的缓冲区溢出。 恶意用户可以传递捏造的压缩数据，这将导致缓冲区后读取。 这个问题是由Yandex信息安全团队的Eldar Zaitov发现的。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8404" target="_blank" rel="noopener noreferrer">#8404</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>修复因整数溢出而导致的错误结果 <code>arrayIntersect</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7777" target="_blank" rel="noopener noreferrer">#7777</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li><li>现在 <code>OPTIMIZE TABLE</code> query不会等待脱机副本执行该操作。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8314" target="_blank" rel="noopener noreferrer">#8314</a> (<a href="https://github.com/javisantana" target="_blank" rel="noopener noreferrer">javi santana</a>)</li><li>固定 <code>ALTER TTL</code> 解析器 <code>Replicated*MergeTree</code> 桌子 <a href="https://github.com/ClickHouse/ClickHouse/pull/8318" target="_blank" rel="noopener noreferrer">#8318</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>修复服务器和客户端之间的通信，以便服务器在查询失败后读取临时表信息。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8084" target="_blank" rel="noopener noreferrer">#8084</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>修复 <code>bitmapAnd</code> 在聚合位图和标量位图相交时出现函数错误。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8082" target="_blank" rel="noopener noreferrer">#8082</a> (<a href="https://github.com/moon03432" target="_blank" rel="noopener noreferrer">黄月</a>)</li><li>完善的定义 <code>ZXid</code> 根据动物园管理员的程序员指南，它修复了错误 <code>clickhouse-cluster-copier</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8088" target="_blank" rel="noopener noreferrer">#8088</a> (<a href="https://github.com/dingxiangfei2009" target="_blank" rel="noopener noreferrer">丁香飞</a>)</li><li><code>odbc</code> 表函数现在尊重 <code>external_table_functions_use_nulls</code> 设置。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7506" target="_blank" rel="noopener noreferrer">#7506</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">瓦西里<!-- -->*<!-- -->内姆科夫</a>)</li><li>修正了导致罕见的数据竞赛的错误。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8143" target="_blank" rel="noopener noreferrer">#8143</a> (<a href="https://github.com/Akazz" target="_blank" rel="noopener noreferrer">亚历山大<!-- -->*<!-- -->卡扎科夫</a>)</li><li>现在 <code>SYSTEM RELOAD DICTIONARY</code> 完全重新加载字典，忽略 <code>update_field</code>. 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/7440" target="_blank" rel="noopener noreferrer">#7440</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8037" target="_blank" rel="noopener noreferrer">#8037</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">维塔利<!-- -->*<!-- -->巴拉诺夫</a>)</li><li>添加检查字典是否存在于创建查询的能力。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8032" target="_blank" rel="noopener noreferrer">#8032</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>修复 <code>Float*</code> 解析中 <code>Values</code> 格式。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/7817" target="_blank" rel="noopener noreferrer">#7817</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7870" target="_blank" rel="noopener noreferrer">#7870</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>修复崩溃时，我们不能在一些后台操作保留空间 <code>*MergeTree</code> 表引擎家族. <a href="https://github.com/ClickHouse/ClickHouse/pull/7873" target="_blank" rel="noopener noreferrer">#7873</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>修复表包含合并操作时的崩溃 <code>SimpleAggregateFunction(LowCardinality)</code> 列。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8515" target="_blank" rel="noopener noreferrer">#8515</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8522" target="_blank" rel="noopener noreferrer">#8522</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>恢复对所有ICU区域设置的支持，并添加对常量表达式应用排序规则的功能。 还添加语言名称 <code>system.collations</code> 桌子 <a href="https://github.com/ClickHouse/ClickHouse/pull/8051" target="_blank" rel="noopener noreferrer">#8051</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>修正错误时，外部字典与零最小寿命 (<code>LIFETIME(MIN 0 MAX N)</code>, <code>LIFETIME(N)</code>）不要在后台更新。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7983" target="_blank" rel="noopener noreferrer">#7983</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>修复当clickhouse源外部字典在查询中有子查询时崩溃。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8351" target="_blank" rel="noopener noreferrer">#8351</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li><li>修复文件扩展名不正确的解析表与引擎 <code>URL</code>. 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8157" target="_blank" rel="noopener noreferrer">#8157</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8419" target="_blank" rel="noopener noreferrer">#8419</a> (<a href="https://github.com/apbodrov" target="_blank" rel="noopener noreferrer">安德烈<!-- -->*<!-- -->博德罗夫</a>)</li><li>修复 <code>CHECK TABLE</code> 查询为 <code>*MergeTree</code> 表没有关键. 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/7543" target="_blank" rel="noopener noreferrer">#7543</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7979" target="_blank" rel="noopener noreferrer">#7979</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>固定转换 <code>Float64</code> 到MySQL类型。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8079" target="_blank" rel="noopener noreferrer">#8079</a> (<a href="https://github.com/yurriy" target="_blank" rel="noopener noreferrer">尤里<!-- -->*<!-- -->巴拉诺夫</a>)</li><li>现在，如果表没有完全删除，因为服务器崩溃，服务器将尝试恢复并加载它。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8176" target="_blank" rel="noopener noreferrer">#8176</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li><li>修复了表函数中的崩溃 <code>file</code> 同时插入到不存在的文件。 现在在这种情况下，文件将被创建，然后插入将被处理。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8177" target="_blank" rel="noopener noreferrer">#8177</a> (<a href="https://github.com/stavrolia" target="_blank" rel="noopener noreferrer">Olga Khvostikova</a>)</li><li>修复罕见的死锁时，可能发生 <code>trace_log</code> 处于启用状态。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7838" target="_blank" rel="noopener noreferrer">#7838</a> (<a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">filimonov</a>)</li><li>添加能力与不同类型的工作，除了 <code>Date</code> 在 <code>RangeHashed</code> 从DDL查询创建的外部字典。 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/7899" target="_blank" rel="noopener noreferrer">7899</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8275" target="_blank" rel="noopener noreferrer">#8275</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>修复崩溃时 <code>now64()</code> 用另一个函数的结果调用。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8270" target="_blank" rel="noopener noreferrer">#8270</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">瓦西里<!-- -->*<!-- -->内姆科夫</a>)</li><li>修正了通过mysql有线协议检测客户端IP连接的错误。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7743" target="_blank" rel="noopener noreferrer">#7743</a> (<a href="https://github.com/dmitriy-myz" target="_blank" rel="noopener noreferrer">Dmitry Muzyka</a>)</li><li>修复空阵列处理 <code>arraySplit</code> 功能。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/7708" target="_blank" rel="noopener noreferrer">#7708</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7747" target="_blank" rel="noopener noreferrer">#7747</a> (<a href="https://github.com/hczhcz" target="_blank" rel="noopener noreferrer">hcz</a>)</li><li>修复了以下问题 <code>pid-file</code> 另一个运行 <code>clickhouse-server</code> 可能会被删除。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8487" target="_blank" rel="noopener noreferrer">#8487</a> (<a href="https://github.com/weiqxu" target="_blank" rel="noopener noreferrer">徐伟清</a>)</li><li>修复字典重新加载，如果它有 <code>invalidate_query</code>，停止更新，并在以前的更新尝试一些异常。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8029" target="_blank" rel="noopener noreferrer">#8029</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>修正了功能错误 <code>arrayReduce</code> 这可能会导致 “double free” 和聚合函数组合器中的错误 <code>Resample</code> 这可能会导致内存泄漏。 添加聚合功能 <code>aggThrow</code>. 此功能可用于测试目的。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8446" target="_blank" rel="noopener noreferrer">#8446</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="improvement-1">改进<a class="hash-link" href="#improvement-1" title="Direct link to heading">​</a></h4><ul><li>改进了使用时的日志记录 <code>S3</code> 表引擎。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8251" target="_blank" rel="noopener noreferrer">#8251</a> (<a href="https://github.com/GrigoryPervakov" target="_blank" rel="noopener noreferrer">Grigory Pervakov</a>)</li><li>在调用时未传递任何参数时打印帮助消息 <code>clickhouse-local</code>. 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/5335" target="_blank" rel="noopener noreferrer">#5335</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8230" target="_blank" rel="noopener noreferrer">#8230</a> (<a href="https://github.com/Melancholic" target="_blank" rel="noopener noreferrer">安德烈<!-- -->*<!-- -->纳戈尔尼</a>)</li><li>添加设置 <code>mutations_sync</code> 这允许等待 <code>ALTER UPDATE/DELETE</code> 同步查询。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8237" target="_blank" rel="noopener noreferrer">#8237</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>允许设置相对 <code>user_files_path</code> 在 <code>config.xml</code> （在类似的方式 <code>format_schema_path</code>). <a href="https://github.com/ClickHouse/ClickHouse/pull/7632" target="_blank" rel="noopener noreferrer">#7632</a> (<a href="https://github.com/hczhcz" target="_blank" rel="noopener noreferrer">hcz</a>)</li><li>为转换函数添加非法类型的异常 <code>-OrZero</code> 后缀 <a href="https://github.com/ClickHouse/ClickHouse/pull/7880" target="_blank" rel="noopener noreferrer">#7880</a> (<a href="https://github.com/akonyaev90" target="_blank" rel="noopener noreferrer">安德烈<!-- -->*<!-- -->科尼亚耶夫</a>)</li><li>简化在分布式查询中发送到分片的数据头的格式。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8044" target="_blank" rel="noopener noreferrer">#8044</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">维塔利<!-- -->*<!-- -->巴拉诺夫</a>)</li><li><code>Live View</code> 表引擎重构。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8519" target="_blank" rel="noopener noreferrer">#8519</a> (<a href="https://github.com/vzakaznikov" target="_blank" rel="noopener noreferrer">vzakaznikov</a>)</li><li>为从DDL查询创建的外部字典添加额外的检查。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8127" target="_blank" rel="noopener noreferrer">#8127</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>修复错误 <code>Column ... already exists</code> 使用时 <code>FINAL</code> 和 <code>SAMPLE</code> together, e.g. <code>select count() from table final sample 1/2</code>. 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/5186" target="_blank" rel="noopener noreferrer">#5186</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7907" target="_blank" rel="noopener noreferrer">#7907</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li><li>现在表的第一个参数 <code>joinGet</code> 函数可以是表标识符。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7707" target="_blank" rel="noopener noreferrer">#7707</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">阿莫斯鸟</a>)</li><li>允许使用 <code>MaterializedView</code> 与上面的子查询 <code>Kafka</code> 桌子 <a href="https://github.com/ClickHouse/ClickHouse/pull/8197" target="_blank" rel="noopener noreferrer">#8197</a> (<a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">filimonov</a>)</li><li>现在后台在磁盘之间移动，运行它的seprate线程池。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7670" target="_blank" rel="noopener noreferrer">#7670</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li><code>SYSTEM RELOAD DICTIONARY</code> 现在同步执行。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8240" target="_blank" rel="noopener noreferrer">#8240</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">维塔利<!-- -->*<!-- -->巴拉诺夫</a>)</li><li>堆栈跟踪现在显示物理地址（对象文件中的偏移量），而不是虚拟内存地址（加载对象文件的位置）。 这允许使用 <code>addr2line</code> 当二进制独立于位置并且ASLR处于活动状态时。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8360" target="_blank" rel="noopener noreferrer">#8360</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8387" target="_blank" rel="noopener noreferrer">#8387</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>支持行级安全筛选器的新语法: <code>&lt;table name=&#x27;table_name&#x27;&gt;…&lt;/table&gt;</code>. 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/5779" target="_blank" rel="noopener noreferrer">#5779</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8381" target="_blank" rel="noopener noreferrer">#8381</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">伊万</a>)</li><li>现在 <code>cityHash</code> 功能可以与工作 <code>Decimal</code> 和 <code>UUID</code> 类型。 修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/5184" target="_blank" rel="noopener noreferrer">#5184</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7693" target="_blank" rel="noopener noreferrer">#7693</a> (<a href="https://github.com/millb" target="_blank" rel="noopener noreferrer">米哈伊尔<!-- -->*<!-- -->科罗托夫</a>)</li><li>从系统日志中删除了固定的索引粒度（它是1024），因为它在实现自适应粒度之后已经过时。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7698" target="_blank" rel="noopener noreferrer">#7698</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>当ClickHouse在没有SSL的情况下编译时，启用MySQL兼容服务器。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7852" target="_blank" rel="noopener noreferrer">#7852</a> (<a href="https://github.com/yurriy" target="_blank" rel="noopener noreferrer">尤里<!-- -->*<!-- -->巴拉诺夫</a>)</li><li>现在服务器校验和分布式批处理，这在批处理中损坏数据的情况下提供了更多详细的错误。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7914" target="_blank" rel="noopener noreferrer">#7914</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>碌莽禄Support: <code>DROP DATABASE</code>, <code>DETACH TABLE</code>, <code>DROP TABLE</code> 和 <code>ATTACH TABLE</code> 为 <code>MySQL</code> 数据库引擎。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8202" target="_blank" rel="noopener noreferrer">#8202</a> (<a href="https://github.com/zhang2014" target="_blank" rel="noopener noreferrer">张冬</a>)</li><li>在S3表功能和表引擎中添加身份验证。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7623" target="_blank" rel="noopener noreferrer">#7623</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>增加了检查额外的部分 <code>MergeTree</code> 在不同的磁盘上，为了不允许错过未定义磁盘上的数据部分。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8118" target="_blank" rel="noopener noreferrer">#8118</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>启用Mac客户端和服务器的SSL支持。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8297" target="_blank" rel="noopener noreferrer">#8297</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">伊万</a>)</li><li>现在ClickHouse可以作为MySQL联合服务器（参见<a href="https://dev.mysql.com/doc/refman/5.7/en/federated-create-server.html%EF%BC%89%E3%80%82" target="_blank" rel="noopener noreferrer">https://dev.mysql.com/doc/refman/5.7/en/federated-create-server.html）。</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/7717" target="_blank" rel="noopener noreferrer">#7717</a> (<a href="https://github.com/MaxFedotov" target="_blank" rel="noopener noreferrer">Maxim Fedotov</a>)</li><li><code>clickhouse-client</code> 现在只能启用 <code>bracketed-paste</code> 当多查询处于打开状态且多行处于关闭状态时。 这修复（＃7757）<!-- -->[<a href="https://github.com/ClickHouse/ClickHouse/issues/7757%E3%80%82" target="_blank" rel="noopener noreferrer">https://github.com/ClickHouse/ClickHouse/issues/7757。</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/7761" target="_blank" rel="noopener noreferrer">#7761</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">阿莫斯鸟</a>)</li><li>碌莽禄Support: <code>Array(Decimal)</code> 在 <code>if</code> 功能。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7721" target="_blank" rel="noopener noreferrer">#7721</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>支持小数 <code>arrayDifference</code>, <code>arrayCumSum</code> 和 <code>arrayCumSumNegative</code> 功能。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7724" target="_blank" rel="noopener noreferrer">#7724</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>已添加 <code>lifetime</code> 列到 <code>system.dictionaries</code> 桌子 <a href="https://github.com/ClickHouse/ClickHouse/issues/6820" target="_blank" rel="noopener noreferrer">#6820</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/7727" target="_blank" rel="noopener noreferrer">#7727</a> (<a href="https://github.com/kekekekule" target="_blank" rel="noopener noreferrer">kekekekule</a>)</li><li>改进了检查不同磁盘上的现有部件 <code>*MergeTree</code> 表引擎. 地址 <a href="https://github.com/ClickHouse/ClickHouse/issues/7660" target="_blank" rel="noopener noreferrer">#7660</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8440" target="_blank" rel="noopener noreferrer">#8440</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>集成与 <code>AWS SDK</code> 为 <code>S3</code> 交互允许使用开箱即用的所有S3功能。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8011" target="_blank" rel="noopener noreferrer">#8011</a> (<a href="https://github.com/Jokser" target="_blank" rel="noopener noreferrer">帕维尔<!-- -->*<!-- -->科瓦连科</a>)</li><li>增加了对子查询的支持 <code>Live View</code> 桌子 <a href="https://github.com/ClickHouse/ClickHouse/pull/7792" target="_blank" rel="noopener noreferrer">#7792</a> (<a href="https://github.com/vzakaznikov" target="_blank" rel="noopener noreferrer">vzakaznikov</a>)</li><li>检查使用 <code>Date</code> 或 <code>DateTime</code> 从列 <code>TTL</code> 表达式已删除。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7920" target="_blank" rel="noopener noreferrer">#7920</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>有关磁盘的信息已添加到 <code>system.detached_parts</code> 桌子 <a href="https://github.com/ClickHouse/ClickHouse/pull/7833" target="_blank" rel="noopener noreferrer">#7833</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>现在设置 <code>max_(table|partition)_size_to_drop</code> 无需重新启动即可更改。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7779" target="_blank" rel="noopener noreferrer">#7779</a> (<a href="https://github.com/GrigoryPervakov" target="_blank" rel="noopener noreferrer">Grigory Pervakov</a>)</li><li>错误消息的可用性略好。 要求用户不要删除下面的行 <code>Stack trace:</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7897" target="_blank" rel="noopener noreferrer">#7897</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>更好地阅读消息 <code>Kafka</code> 引擎在各种格式后 <a href="https://github.com/ClickHouse/ClickHouse/issues/7935" target="_blank" rel="noopener noreferrer">#7935</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8035" target="_blank" rel="noopener noreferrer">#8035</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">伊万</a>)</li><li>与不支持MySQL客户端更好的兼容性 <code>sha2_password</code> 验证插件。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8036" target="_blank" rel="noopener noreferrer">#8036</a> (<a href="https://github.com/yurriy" target="_blank" rel="noopener noreferrer">尤里<!-- -->*<!-- -->巴拉诺夫</a>)</li><li>支持MySQL兼容性服务器中的更多列类型。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7975" target="_blank" rel="noopener noreferrer">#7975</a> (<a href="https://github.com/yurriy" target="_blank" rel="noopener noreferrer">尤里<!-- -->*<!-- -->巴拉诺夫</a>)</li><li>执行 <code>ORDER BY</code> 优化 <code>Merge</code>, <code>Buffer</code> 和 <code>Materilized View</code> 存储与底层 <code>MergeTree</code> 桌子 <a href="https://github.com/ClickHouse/ClickHouse/pull/8130" target="_blank" rel="noopener noreferrer">#8130</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">安东<!-- -->*<!-- -->波波夫</a>)</li><li>现在我们总是使用POSIX实现 <code>getrandom</code> 与旧内核更好的兼容性（\&lt;3.17）。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7940" target="_blank" rel="noopener noreferrer">#7940</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">阿莫斯鸟</a>)</li><li>更好地检查移动ttl规则中的有效目标。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8410" target="_blank" rel="noopener noreferrer">#8410</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>更好地检查损坏的刀片批次 <code>Distributed</code> 表引擎。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7933" target="_blank" rel="noopener noreferrer">#7933</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>添加带有部件名称数组的列，这些部件将来必须处理突变 <code>system.mutations</code> 桌子 <a href="https://github.com/ClickHouse/ClickHouse/pull/8179" target="_blank" rel="noopener noreferrer">#8179</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>处理器的并行合并排序优化。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8552" target="_blank" rel="noopener noreferrer">#8552</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li><li>设置 <code>mark_cache_min_lifetime</code> 现在已经过时了，什么也不做。 在以前的版本中，标记缓存可以在内存中增长大于 <code>mark_cache_size</code> 以容纳内的数据 <code>mark_cache_min_lifetime</code> 秒。 这导致了混乱和比预期更高的内存使用率，这在内存受限的系统上尤其糟糕。 如果您在安装此版本后会看到性能下降，则应增加 <code>mark_cache_size</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8484" target="_blank" rel="noopener noreferrer">#8484</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>准备使用 <code>tid</code> 到处都是 这是必要的 <a href="https://github.com/ClickHouse/ClickHouse/issues/7477" target="_blank" rel="noopener noreferrer">#7477</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8276" target="_blank" rel="noopener noreferrer">#8276</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="performance-improvement-1">性能改进<a class="hash-link" href="#performance-improvement-1" title="Direct link to heading">​</a></h4><ul><li>处理器管道中的性能优化。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7988" target="_blank" rel="noopener noreferrer">#7988</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li><li>缓存字典中过期密钥的非阻塞更新（具有读取旧密钥的权限）。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8303" target="_blank" rel="noopener noreferrer">#8303</a> (<a href="https://github.com/nikitamikhaylov" target="_blank" rel="noopener noreferrer">尼基塔<!-- -->*<!-- -->米哈伊洛夫</a>)</li><li>没有编译ClickHouse <code>-fno-omit-frame-pointer</code> 在全球范围内多余一个寄存器。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8097" target="_blank" rel="noopener noreferrer">#8097</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">阿莫斯鸟</a>)</li><li>加速 <code>greatCircleDistance</code> 功能，并为它添加性能测试。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7307" target="_blank" rel="noopener noreferrer">#7307</a> (<a href="https://github.com/stavrolia" target="_blank" rel="noopener noreferrer">Olga Khvostikova</a>)</li><li>改进的功能性能 <code>roundDown</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8465" target="_blank" rel="noopener noreferrer">#8465</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>改进的性能 <code>max</code>, <code>min</code>, <code>argMin</code>, <code>argMax</code> 为 <code>DateTime64</code> 数据类型。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8199" target="_blank" rel="noopener noreferrer">#8199</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">瓦西里<!-- -->*<!-- -->内姆科夫</a>)</li><li>改进了无限制或大限制和外部排序的排序性能。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8545" target="_blank" rel="noopener noreferrer">#8545</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>改进的性能格式化浮点数高达6倍。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8542" target="_blank" rel="noopener noreferrer">#8542</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>改进的性能 <code>modulo</code> 功能。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7750" target="_blank" rel="noopener noreferrer">#7750</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">阿莫斯鸟</a>)</li><li>优化 <code>ORDER BY</code> 并与单列键合并。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8335" target="_blank" rel="noopener noreferrer">#8335</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>更好地实施 <code>arrayReduce</code>, <code>-Array</code> 和 <code>-State</code> 组合子 <a href="https://github.com/ClickHouse/ClickHouse/pull/7710" target="_blank" rel="noopener noreferrer">#7710</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">阿莫斯鸟</a>)</li><li>现在 <code>PREWHERE</code> 应优化为至少一样高效 <code>WHERE</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7769" target="_blank" rel="noopener noreferrer">#7769</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">阿莫斯鸟</a>)</li><li>改进方式 <code>round</code> 和 <code>roundBankers</code> 处理负数。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8229" target="_blank" rel="noopener noreferrer">#8229</a> (<a href="https://github.com/hczhcz" target="_blank" rel="noopener noreferrer">hcz</a>)</li><li>改进的解码性能 <code>DoubleDelta</code> 和 <code>Gorilla</code> 编解码器大约30-40％。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/7082" target="_blank" rel="noopener noreferrer">#7082</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8019" target="_blank" rel="noopener noreferrer">#8019</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">瓦西里<!-- -->*<!-- -->内姆科夫</a>)</li><li>改进的性能 <code>base64</code> 相关功能。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8444" target="_blank" rel="noopener noreferrer">#8444</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>增加了一个功能 <code>geoDistance</code>. 它类似于 <code>greatCircleDistance</code> 但使用近似于WGS-84椭球模型。 两个功能的性能几乎相同。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8086" target="_blank" rel="noopener noreferrer">#8086</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>更快 <code>min</code> 和 <code>max</code> 聚合函数 <code>Decimal</code> 数据类型。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8144" target="_blank" rel="noopener noreferrer">#8144</a> (<a href="https://github.com/4ertus2" target="_blank" rel="noopener noreferrer">Artem Zuikov</a>)</li><li>矢量化处理 <code>arrayReduce</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7608" target="_blank" rel="noopener noreferrer">#7608</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">阿莫斯鸟</a>)</li><li><code>if</code> 链现在优化为 <code>multiIf</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8355" target="_blank" rel="noopener noreferrer">#8355</a> (<a href="https://github.com/kamalov-ruslan" target="_blank" rel="noopener noreferrer">kamalov-ruslan</a>)</li><li>修复性能回归 <code>Kafka</code> 表引擎在19.15中引入。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/7261" target="_blank" rel="noopener noreferrer">#7261</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7935" target="_blank" rel="noopener noreferrer">#7935</a> (<a href="https://github.com/filimonov" target="_blank" rel="noopener noreferrer">filimonov</a>)</li><li>已删除 “pie” 代码生成 <code>gcc</code> 从Debian软件包偶尔带来默认情况下。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8483" target="_blank" rel="noopener noreferrer">#8483</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>并行解析数据格式 <a href="https://github.com/ClickHouse/ClickHouse/pull/6553" target="_blank" rel="noopener noreferrer">#6553</a> (<a href="https://github.com/nikitamikhaylov" target="_blank" rel="noopener noreferrer">尼基塔<!-- -->*<!-- -->米哈伊洛夫</a>)</li><li>启用优化的解析器 <code>Values</code> 默认使用表达式 (<code>input_format_values_deduce_templates_of_expressions=1</code>). <a href="https://github.com/ClickHouse/ClickHouse/pull/8231" target="_blank" rel="noopener noreferrer">#8231</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">tavplubix</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="buildtestingpackaging-improvement-2">构建/测试/包装改进<a class="hash-link" href="#buildtestingpackaging-improvement-2" title="Direct link to heading">​</a></h4><ul><li>构建修复 <code>ARM</code> 而在最小模式。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8304" target="_blank" rel="noopener noreferrer">#8304</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>添加复盖文件刷新 <code>clickhouse-server</code> 当不调用std::atexit时。 还略微改进了无状态测试的复盖率日志记录。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8267" target="_blank" rel="noopener noreferrer">#8267</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>更新contrib中的LLVM库。 避免从操作系统包中使用LLVM。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8258" target="_blank" rel="noopener noreferrer">#8258</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>使bund绑 <code>curl</code> 建立完全安静。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8232" target="_blank" rel="noopener noreferrer">#8232</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/8203" target="_blank" rel="noopener noreferrer">#8203</a> (<a href="https://github.com/Jokser" target="_blank" rel="noopener noreferrer">帕维尔<!-- -->*<!-- -->科瓦连科</a>)</li><li>修复一些 <code>MemorySanitizer</code> 警告。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8235" target="_blank" rel="noopener noreferrer">#8235</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">Alexander Kuzmenkov</a>)</li><li>使用 <code>add_warning</code> 和 <code>no_warning</code> 宏 <code>CMakeLists.txt</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8604" target="_blank" rel="noopener noreferrer">#8604</a> (<a href="https://github.com/abyss7" target="_blank" rel="noopener noreferrer">伊万</a>)</li><li>添加对Minio S3兼容对象的支持（<a href="https://min.io/)%E4%B8%BA%E4%BA%86%E6%9B%B4%E5%A5%BD%E7%9A%84%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%95%E3%80%82" target="_blank" rel="noopener noreferrer">https://min.io/)为了更好的集成测试。</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/7863" target="_blank" rel="noopener noreferrer">#7863</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/7875" target="_blank" rel="noopener noreferrer">#7875</a> (<a href="https://github.com/Jokser" target="_blank" rel="noopener noreferrer">帕维尔<!-- -->*<!-- -->科瓦连科</a>)</li><li>导入 <code>libc</code> 标题到contrib。 它允许在各种系统中使构建更加一致（仅适用于 <code>x86_64-linux-gnu</code>). <a href="https://github.com/ClickHouse/ClickHouse/pull/5773" target="_blank" rel="noopener noreferrer">#5773</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>删除 <code>-fPIC</code> 从一些图书馆。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8464" target="_blank" rel="noopener noreferrer">#8464</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>清洁 <code>CMakeLists.txt</code> 对于卷曲。 看<a href="https://github.com/ClickHouse/ClickHouse/pull/8011#issuecomment-569478910" target="_blank" rel="noopener noreferrer">https://github.com/ClickHouse/ClickHouse/pull/8011#issuecomment-569478910</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/8459" target="_blank" rel="noopener noreferrer">#8459</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>无声警告 <code>CapNProto</code> 图书馆. <a href="https://github.com/ClickHouse/ClickHouse/pull/8220" target="_blank" rel="noopener noreferrer">#8220</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>为短字符串优化哈希表添加性能测试。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7679" target="_blank" rel="noopener noreferrer">#7679</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">阿莫斯鸟</a>)</li><li>现在ClickHouse将建立在 <code>AArch64</code> 即使 <code>MADV_FREE</code> 不可用。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8027" target="_blank" rel="noopener noreferrer">#8027</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8243" target="_blank" rel="noopener noreferrer">#8243</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">阿莫斯鸟</a>)</li><li>更新 <code>zlib-ng</code> 来解决记忆消毒的问题 <a href="https://github.com/ClickHouse/ClickHouse/pull/7182" target="_blank" rel="noopener noreferrer">#7182</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/8206" target="_blank" rel="noopener noreferrer">#8206</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">Alexander Kuzmenkov</a>)</li><li>在非Linux系统上启用内部MySQL库，因为操作系统包的使用非常脆弱，通常根本不起作用。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/5765" target="_blank" rel="noopener noreferrer">#5765</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8426" target="_blank" rel="noopener noreferrer">#8426</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>修复了启用后在某些系统上构建的问题 <code>libc++</code>. 这取代了 <a href="https://github.com/ClickHouse/ClickHouse/issues/8374" target="_blank" rel="noopener noreferrer">#8374</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8380" target="_blank" rel="noopener noreferrer">#8380</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>赂眉露<!-- -->&gt;<!-- -->&gt;<!-- --> <code>Field</code> 方法更类型安全，以找到更多的错误。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7386" target="_blank" rel="noopener noreferrer">#7386</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/8209" target="_blank" rel="noopener noreferrer">#8209</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">Alexander Kuzmenkov</a>)</li><li>添加丢失的文件到 <code>libc-headers</code> 子模块。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8507" target="_blank" rel="noopener noreferrer">#8507</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>修复错误 <code>JSON</code> 引用性能测试输出。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8497" target="_blank" rel="noopener noreferrer">#8497</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li><li>现在堆栈跟踪显示 <code>std::exception</code> 和 <code>Poco::Exception</code>. 在以前的版本中，它仅适用于 <code>DB::Exception</code>. 这改进了诊断。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8501" target="_blank" rel="noopener noreferrer">#8501</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>移植 <code>clock_gettime</code> 和 <code>clock_nanosleep</code> 对于新鲜的glibc版本。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8054" target="_blank" rel="noopener noreferrer">#8054</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">阿莫斯鸟</a>)</li><li>启用 <code>part_log</code> 在示例配置开发人员。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8609" target="_blank" rel="noopener noreferrer">#8609</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>修复重新加载的异步性质 <code>01036_no_superfluous_dict_reload_on_create_database*</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8111" target="_blank" rel="noopener noreferrer">#8111</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>)</li><li>固定编解码器性能测试。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8615" target="_blank" rel="noopener noreferrer">#8615</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">瓦西里<!-- -->*<!-- -->内姆科夫</a>)</li><li>添加安装脚本 <code>.tgz</code> 为他们构建和文档。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8612" target="_blank" rel="noopener noreferrer">#8612</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/8591" target="_blank" rel="noopener noreferrer">#8591</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>删除旧 <code>ZSTD</code> 测试（它是在2016年创建的，以重现zstd1.0版本之前的错误）。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8618" target="_blank" rel="noopener noreferrer">#8618</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8619" target="_blank" rel="noopener noreferrer">#8619</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>固定构建在Mac OS卡特琳娜。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8600" target="_blank" rel="noopener noreferrer">#8600</a> (<a href="https://github.com/meob" target="_blank" rel="noopener noreferrer">meo</a>)</li><li>增加编解码器性能测试中的行数，以使结果显着。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8574" target="_blank" rel="noopener noreferrer">#8574</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">瓦西里<!-- -->*<!-- -->内姆科夫</a>)</li><li>在调试版本中，处理 <code>LOGICAL_ERROR</code> 异常作为断言失败，使得它们更容易被注意到。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8475" target="_blank" rel="noopener noreferrer">#8475</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">Alexander Kuzmenkov</a>)</li><li>使与格式相关的性能测试更具确定性。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8477" target="_blank" rel="noopener noreferrer">#8477</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>更新 <code>lz4</code> 来修复记忆消毒器的故障 <a href="https://github.com/ClickHouse/ClickHouse/pull/8181" target="_blank" rel="noopener noreferrer">#8181</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">Alexander Kuzmenkov</a>)</li><li>在异常处理中抑制已知MemorySanitizer误报。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8182" target="_blank" rel="noopener noreferrer">#8182</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">Alexander Kuzmenkov</a>)</li><li>更新 <code>gcc</code> 和 <code>g++</code> 到版本9在 <code>build/docker/build.sh</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/7766" target="_blank" rel="noopener noreferrer">#7766</a> (<a href="https://github.com/tlightsky" target="_blank" rel="noopener noreferrer">TLightSky</a>)</li><li>添加性能测试用例来测试 <code>PREWHERE</code> 比 <code>WHERE</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7768" target="_blank" rel="noopener noreferrer">#7768</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">阿莫斯鸟</a>)</li><li>在修复一个笨拙的测试方面取得了进展。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8621" target="_blank" rel="noopener noreferrer">#8621</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>避免从MemorySanitizer报告数据 <code>libunwind</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8539" target="_blank" rel="noopener noreferrer">#8539</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>更新 <code>libc++</code> 到最新版本。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8324" target="_blank" rel="noopener noreferrer">#8324</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>从源头构建ICU库。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/6460" target="_blank" rel="noopener noreferrer">#6460</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8219" target="_blank" rel="noopener noreferrer">#8219</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>从切换 <code>libressl</code> 到 <code>openssl</code>. ClickHouse应在此更改后支持TLS1.3和SNI。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8171" target="_blank" rel="noopener noreferrer">#8171</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8218" target="_blank" rel="noopener noreferrer">#8218</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>使用时固定的UBSan报告 <code>chacha20_poly1305</code> 从SSL（发生在连接到<a href="https://yandex.ru/)%E3%80%82" target="_blank" rel="noopener noreferrer">https://yandex.ru/)。</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/8214" target="_blank" rel="noopener noreferrer">#8214</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>修复默认密码文件的模式 <code>.deb</code> linux发行版。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8075" target="_blank" rel="noopener noreferrer">#8075</a> (<a href="https://github.com/proller" target="_blank" rel="noopener noreferrer">proller</a>)</li><li>改进的表达式获取 <code>clickhouse-server</code> PID输入 <code>clickhouse-test</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8063" target="_blank" rel="noopener noreferrer">#8063</a> (<a href="https://github.com/Akazz" target="_blank" rel="noopener noreferrer">亚历山大<!-- -->*<!-- -->卡扎科夫</a>)</li><li>更新contrib/googletest到v1.10.0。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8587" target="_blank" rel="noopener noreferrer">#8587</a> (<a href="https://github.com/Alex-Burmak" target="_blank" rel="noopener noreferrer">Alexander Burmak</a>)</li><li>修复了ThreadSaninitizer报告 <code>base64</code> 图书馆. 还将此库更新到最新版本，但无关紧要。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8397" target="_blank" rel="noopener noreferrer">#8397</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8403" target="_blank" rel="noopener noreferrer">#8403</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>修复 <code>00600_replace_running_query</code> 对于处理器。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8272" target="_blank" rel="noopener noreferrer">#8272</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li><li>删除支持 <code>tcmalloc</code> 为了使 <code>CMakeLists.txt</code> 更简单 <a href="https://github.com/ClickHouse/ClickHouse/pull/8310" target="_blank" rel="noopener noreferrer">#8310</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>发布海湾合作委员会构建现在使用 <code>libc++</code> 而不是 <code>libstdc++</code>. 最近 <code>libc++</code> 只与叮当一起使用。 这将提高构建配置的一致性和可移植性。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8311" target="_blank" rel="noopener noreferrer">#8311</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>使用MemorySanitizer启用ICU库进行构建。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8222" target="_blank" rel="noopener noreferrer">#8222</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>禁止从警告 <code>CapNProto</code> 图书馆. <a href="https://github.com/ClickHouse/ClickHouse/pull/8224" target="_blank" rel="noopener noreferrer">#8224</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>删除代码的特殊情况 <code>tcmalloc</code>，因为它不再受支持。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8225" target="_blank" rel="noopener noreferrer">#8225</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>在CI coverage任务中，优雅地终止服务器以允许它保存coverage报告。 这修复了我们最近看到的不完整的复盖率报告。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8142" target="_blank" rel="noopener noreferrer">#8142</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>针对所有编解码器的性能测试 <code>Float64</code> 和 <code>UInt64</code> 值。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8349" target="_blank" rel="noopener noreferrer">#8349</a> (<a href="https://github.com/Enmk" target="_blank" rel="noopener noreferrer">瓦西里<!-- -->*<!-- -->内姆科夫</a>)</li><li><code>termcap</code> 非常不推荐使用，并导致各种问题（f.g.missing “up” 帽和呼应 <code>^J</code> 而不是多行）。 帮个忙 <code>terminfo</code> 或bund绑 <code>ncurses</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7737" target="_blank" rel="noopener noreferrer">#7737</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">阿莫斯鸟</a>)</li><li>修复 <code>test_storage_s3</code> 集成测试。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7734" target="_blank" rel="noopener noreferrer">#7734</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li><li>碌莽禄Support: <code>StorageFile(&lt;format&gt;, null)</code> 将块插入给定格式的文件而不实际写入磁盘。 这是性能测试所必需的。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8455" target="_blank" rel="noopener noreferrer">#8455</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">阿莫斯鸟</a>)</li><li>添加参数 <code>--print-time</code> 功能测试打印每个测试的执行时间。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8001" target="_blank" rel="noopener noreferrer">#8001</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li><li>添加断言 <code>KeyCondition</code> 同时评估RPN。 这将修复来自gcc-9的警告。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8279" target="_blank" rel="noopener noreferrer">#8279</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>在CI构建中转储cmake选项。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8273" target="_blank" rel="noopener noreferrer">#8273</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">Alexander Kuzmenkov</a>)</li><li>不要为某些fat库生成调试信息。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8271" target="_blank" rel="noopener noreferrer">#8271</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>赂眉露<!-- -->&gt;<!-- -->&gt;<!-- --> <code>log_to_console.xml</code> 始终登录到stderr，无论它是否交互。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8395" target="_blank" rel="noopener noreferrer">#8395</a> (<a href="https://github.com/akuzm" target="_blank" rel="noopener noreferrer">Alexander Kuzmenkov</a>)</li><li>删除了一些未使用的功能 <code>clickhouse-performance-test</code> 工具 <a href="https://github.com/ClickHouse/ClickHouse/pull/8555" target="_blank" rel="noopener noreferrer">#8555</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>现在我们也将搜索 <code>lld-X</code> 与相应的 <code>clang-X</code> 版本。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8092" target="_blank" rel="noopener noreferrer">#8092</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">阿利沙平</a>)</li><li>实木复合地板建设改善。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8421" target="_blank" rel="noopener noreferrer">#8421</a> (<a href="https://github.com/maxulan" target="_blank" rel="noopener noreferrer">马苏兰</a>)</li><li>更多海湾合作委员会警告 <a href="https://github.com/ClickHouse/ClickHouse/pull/8221" target="_blank" rel="noopener noreferrer">#8221</a> (<a href="https://github.com/kreuzerkrieg" target="_blank" rel="noopener noreferrer">kreuzerkrieg</a>)</li><li>Arch Linux的软件包现在允许运行ClickHouse服务器，而不仅仅是客户端。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8534" target="_blank" rel="noopener noreferrer">#8534</a> (<a href="https://github.com/excitoon" target="_blank" rel="noopener noreferrer">Vladimir Chebotarev</a>)</li><li>修复与处理器的测试。 微小的性能修复。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7672" target="_blank" rel="noopener noreferrer">#7672</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">尼古拉<!-- -->*<!-- -->科切托夫</a>)</li><li>更新contrib/protobuf。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8256" target="_blank" rel="noopener noreferrer">#8256</a> (<a href="https://github.com/matwey" target="_blank" rel="noopener noreferrer">Matwey V.Kornilov</a>)</li><li>在准备切换到c++20作为新年庆祝活动。 “May the C++ force be with ClickHouse.” <a href="https://github.com/ClickHouse/ClickHouse/pull/8447" target="_blank" rel="noopener noreferrer">#8447</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">阿莫斯鸟</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="experimental-feature-1">实验特点<a class="hash-link" href="#experimental-feature-1" title="Direct link to heading">​</a></h4><ul><li>增加了实验设置 <code>min_bytes_to_use_mmap_io</code>. 它允许读取大文件，而无需将数据从内核复制到用户空间。 默认情况下禁用该设置。 建议的阈值大约是64MB，因为mmap/munmap很慢。 <a href="https://github.com/ClickHouse/ClickHouse/pull/8520" target="_blank" rel="noopener noreferrer">#8520</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li><li>返工配额作为访问控制系统的一部分。 增加了新表 <code>system.quotas</code>，新功能 <code>currentQuota</code>, <code>currentQuotaKey</code>，新的SQL语法 <code>CREATE QUOTA</code>, <code>ALTER QUOTA</code>, <code>DROP QUOTA</code>, <code>SHOW QUOTA</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7257" target="_blank" rel="noopener noreferrer">#7257</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">维塔利<!-- -->*<!-- -->巴拉诺夫</a>)</li><li>允许跳过带有警告的未知设置，而不是引发异常。 <a href="https://github.com/ClickHouse/ClickHouse/pull/7653" target="_blank" rel="noopener noreferrer">#7653</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">维塔利<!-- -->*<!-- -->巴拉诺夫</a>)</li><li>重新设计的行策略作为访问控制系统的一部分。 增加了新表 <code>system.row_policies</code>，新功能 <code>currentRowPolicies()</code>，新的SQL语法 <code>CREATE POLICY</code>, <code>ALTER POLICY</code>, <code>DROP POLICY</code>, <code>SHOW CREATE POLICY</code>, <code>SHOW POLICIES</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/7808" target="_blank" rel="noopener noreferrer">#7808</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">维塔利<!-- -->*<!-- -->巴拉诺夫</a>)</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="security-fix">安全修复<a class="hash-link" href="#security-fix" title="Direct link to heading">​</a></h4><ul><li>修正了读取目录结构中的表的可能性 <code>File</code> 表引擎。 这修复 <a href="https://github.com/ClickHouse/ClickHouse/issues/8536" target="_blank" rel="noopener noreferrer">#8536</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/8537" target="_blank" rel="noopener noreferrer">#8537</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">阿列克谢-米洛维多夫</a>)</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="changelog-for-2019"><a href="https://github.com/ClickHouse/ClickHouse/blob/master/docs/en/changelog/2019.md" target="_blank" rel="noopener noreferrer">更新日志2019</a><a class="hash-link" href="#changelog-for-2019" title="Direct link to heading">​</a></h2></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ClickHouse/ClickHouse/tree/docs-staging/docs/zh/changelog/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/zh/whats-new/changelog/2020"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">2020</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/zh/development/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ClickHouse 开发</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#clickhouse-release-v20-3" class="table-of-contents__link toc-highlight">碌莽禄release拢.0755-88888888</a><ul><li><a href="#clickhouse-release-v20-3-4-10-2020-03-20" class="table-of-contents__link toc-highlight">ClickHouse版本v20.3.4.10,2020-03-20</a></li><li><a href="#clickhouse-release-v20-3-3-6-2020-03-17" class="table-of-contents__link toc-highlight">ClickHouse释放v20.3.3.6,2020-03-17</a></li><li><a href="#clickhouse-release-v20-3-2-1-2020-03-12" class="table-of-contents__link toc-highlight">ClickHouse版本v20.3.2.1,2020-03-12</a></li></ul></li><li><a href="#clickhouse-release-v20-1" class="table-of-contents__link toc-highlight">碌莽禄.拢.0755-88888888</a><ul><li><a href="#clickhouse-release-v20-1-8-41-2020-03-20" class="table-of-contents__link toc-highlight">ClickHouse版本v20.1.8.41,2020-03-20</a></li><li><a href="#clickhouse-release-v20-1-7-38-2020-03-18" class="table-of-contents__link toc-highlight">ClickHouse释放v20.1.7.38,2020-03-18</a></li><li><a href="#clickhouse-release-v20-1-6-30-2020-03-05" class="table-of-contents__link toc-highlight">ClickHouse释放v20.1.6.30,2020-03-05</a></li><li><a href="#clickhouse-release-v20-1-2-4-2020-01-22" class="table-of-contents__link toc-highlight">ClickHouse版本v20.1.2.4,2020-01-22</a></li></ul></li><li><a href="#changelog-for-2019" class="table-of-contents__link toc-highlight">更新日志2019</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">ClickHouse</div><ul class="footer__items"><li class="footer__item"><a href="https://clickhouse.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Company</a></li><li class="footer__item"><a href="https://clickhouse.com/cloud/" target="_blank" rel="noopener noreferrer" class="footer__link-item">ClickHouse as a Service</a></li><li class="footer__item"><a href="https://clickhouse.com/careers/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Careers</a></li><li class="footer__item"><a href="https://clickhouse.com/learn/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Learn ClickHouse</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/ClickHouse/ClickHouse" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://clickhouse.com/blog/en/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/c/ClickHouseDB" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/ClickHouseDB" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://join.slack.com/t/clickhousedb/shared_invite/zt-rxm3rdrk-lIUmhLC3V8WTaL0TGxsOmg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Policies</div><ul class="footer__items"><li class="footer__item"><a href="https://clickhouse.com/legal/trademark-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trademark Policy</a></li><li class="footer__item"><a href="https://clickhouse.com/legal/privacy-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy</a></li><li class="footer__item"><a href="https://clickhouse.com/legal/cookie-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cookie Policy</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/logo.png" alt="ClickHouse Documentation" class="themedImage_W2Cr themedImage--light_TfLj footer__logo"><img src="/img/logo.png" alt="ClickHouse Documentation" class="themedImage_W2Cr themedImage--dark_oUvU footer__logo"></div><div class="footer__copyright">Copyright &copy; 2016&ndash;2022 ClickHouse, Inc. ClickHouse Docs provided under the Creative Commons CC BY-NC-SA license. ClickHouse&reg; is a registered trademark of ClickHouse, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.db9e59e5.js"></script>
<script src="/assets/js/main.028d105f.js"></script>
</body>
</html>